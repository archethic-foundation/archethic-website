import{d as me,G as ln,s as rt,n as Ma,a5 as Ph,ah as Ao,aD as Ae,ak as Fa,m as Rr,q as ir,bQ as Lh,o as Nh,bR as $r,bS as Ch,a7 as Zu,bT as Ju,ag as Bh}from"./index-Bibw8odz.js";import{J as jh,T as $h,r as Dh}from"./index-DQlzy8aC-BLa2RM0w.js";var Mh=Fh;function Fh(e){e=e||{};var t=e.max||Number.MAX_SAFE_INTEGER,r=typeof e.start<"u"?e.start:Math.floor(Math.random()*t);return function(){return r=r%t,r++}}const Uh=Rr(Mh);var ss={exports:{}},vi,Ua;function Hh(){if(Ua)return vi;Ua=1;var e=1e3,t=e*60,r=t*60,n=r*24,o=n*7,i=n*365.25;vi=function(f,h){h=h||{};var d=typeof f;if(d==="string"&&f.length>0)return s(f);if(d==="number"&&isFinite(f))return h.long?l(f):c(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function s(f){if(f=String(f),!(f.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(h){var d=parseFloat(h[1]),_=(h[2]||"ms").toLowerCase();switch(_){case"years":case"year":case"yrs":case"yr":case"y":return d*i;case"weeks":case"week":case"w":return d*o;case"days":case"day":case"d":return d*n;case"hours":case"hour":case"hrs":case"hr":case"h":return d*r;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function c(f){var h=Math.abs(f);return h>=n?Math.round(f/n)+"d":h>=r?Math.round(f/r)+"h":h>=t?Math.round(f/t)+"m":h>=e?Math.round(f/e)+"s":f+"ms"}function l(f){var h=Math.abs(f);return h>=n?u(f,h,n,"day"):h>=r?u(f,h,r,"hour"):h>=t?u(f,h,t,"minute"):h>=e?u(f,h,e,"second"):f+" ms"}function u(f,h,d,_){var T=h>=d*1.5;return Math.round(f/d)+" "+_+(T?"s":"")}return vi}function zh(e){r.debug=r,r.default=r,r.coerce=l,r.disable=i,r.enable=o,r.enabled=s,r.humanize=Hh(),r.destroy=u,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let h=0;for(let d=0;d<f.length;d++)h=(h<<5)-h+f.charCodeAt(d),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=t;function r(f){let h,d=null,_,T;function R(...L){if(!R.enabled)return;const V=R,P=Number(new Date),k=P-(h||P);V.diff=k,V.prev=h,V.curr=P,h=P,L[0]=r.coerce(L[0]),typeof L[0]!="string"&&L.unshift("%O");let S=0;L[0]=L[0].replace(/%([a-zA-Z%])/g,($,q)=>{if($==="%%")return"%";S++;const re=r.formatters[q];if(typeof re=="function"){const U=L[S];$=re.call(V,U),L.splice(S,1),S--}return $}),r.formatArgs.call(V,L),(V.log||r.log).apply(V,L)}return R.namespace=f,R.useColors=r.useColors(),R.color=r.selectColor(f),R.extend=n,R.destroy=r.destroy,Object.defineProperty(R,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(_!==r.namespaces&&(_=r.namespaces,T=r.enabled(f)),T),set:L=>{d=L}}),typeof r.init=="function"&&r.init(R),R}function n(f,h){const d=r(this.namespace+(typeof h>"u"?":":h)+f);return d.log=this.log,d}function o(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let h;const d=(typeof f=="string"?f:"").split(/[\s,]+/),_=d.length;for(h=0;h<_;h++)d[h]&&(f=d[h].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function i(){const f=[...r.names.map(c),...r.skips.map(c).map(h=>"-"+h)].join(",");return r.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let h,d;for(h=0,d=r.skips.length;h<d;h++)if(r.skips[h].test(f))return!1;for(h=0,d=r.names.length;h<d;h++)if(r.names[h].test(f))return!0;return!1}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function l(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var Wh=zh;(function(e,t){t.formatArgs=n,t.save=o,t.load=i,t.useColors=r,t.storage=s(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(f++,d==="%c"&&(h=f))}),l.splice(h,0,u)}t.log=console.debug||console.log||(()=>{});function o(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function i(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof me.process<"u"&&"env"in me.process&&(l=me.process.env.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=Wh(t);const{formatters:c}=e.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(ss,ss.exports);var qh=ss.exports,Gt={},vr={},Ns=Nn;Nn.default=Nn;Nn.stable=Yu;Nn.stableStringify=Yu;var go="[...]",Ku="[Circular]",Nr=[],Pr=[];function Xu(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Nn(e,t,r,n){typeof n>"u"&&(n=Xu()),as(e,"",0,[],void 0,0,n);var o;try{Pr.length===0?o=JSON.stringify(e,t,r):o=JSON.stringify(e,Qu(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Nr.length!==0;){var i=Nr.pop();i.length===4?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}}return o}function Jr(e,t,r,n){var o=Object.getOwnPropertyDescriptor(n,r);o.get!==void 0?o.configurable?(Object.defineProperty(n,r,{value:e}),Nr.push([n,r,t,o])):Pr.push([t,r,e]):(n[r]=e,Nr.push([n,r,t]))}function as(e,t,r,n,o,i,s){i+=1;var c;if(typeof e=="object"&&e!==null){for(c=0;c<n.length;c++)if(n[c]===e){Jr(Ku,e,t,o);return}if(typeof s.depthLimit<"u"&&i>s.depthLimit){Jr(go,e,t,o);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){Jr(go,e,t,o);return}if(n.push(e),Array.isArray(e))for(c=0;c<e.length;c++)as(e[c],c,c,n,e,i,s);else{var l=Object.keys(e);for(c=0;c<l.length;c++){var u=l[c];as(e[u],u,c,n,e,i,s)}}n.pop()}}function Vh(e,t){return e<t?-1:e>t?1:0}function Yu(e,t,r,n){typeof n>"u"&&(n=Xu());var o=ls(e,"",0,[],void 0,0,n)||e,i;try{Pr.length===0?i=JSON.stringify(o,t,r):i=JSON.stringify(o,Qu(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Nr.length!==0;){var s=Nr.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function ls(e,t,r,n,o,i,s){i+=1;var c;if(typeof e=="object"&&e!==null){for(c=0;c<n.length;c++)if(n[c]===e){Jr(Ku,e,t,o);return}try{if(typeof e.toJSON=="function")return}catch{return}if(typeof s.depthLimit<"u"&&i>s.depthLimit){Jr(go,e,t,o);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){Jr(go,e,t,o);return}if(n.push(e),Array.isArray(e))for(c=0;c<e.length;c++)ls(e[c],c,c,n,e,i,s);else{var l={},u=Object.keys(e).sort(Vh);for(c=0;c<u.length;c++){var f=u[c];ls(e[f],f,c,n,e,i,s),l[f]=e[f]}if(typeof o<"u")Nr.push([o,t,e]),o[t]=l;else return l}n.pop()}}function Qu(e){return e=typeof e<"u"?e:function(t,r){return r},function(t,r){if(Pr.length>0)for(var n=0;n<Pr.length;n++){var o=Pr[n];if(o[1]===t&&o[0]===r){r=o[2],Pr.splice(n,1);break}}return e.call(this,t,r)}}const Gh=Rr(Ns);Object.defineProperty(vr,"__esModule",{value:!0});vr.EthereumProviderError=vr.EthereumRpcError=void 0;const Zh=Ns;class ec extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return Zh.default(this.serialize(),Xh,2)}}vr.EthereumRpcError=ec;let Jh=class extends ec{constructor(e,t,r){if(!Kh(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}};vr.EthereumProviderError=Jh;function Kh(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function Xh(e,t){if(t!=="[Circular]")return t}var Cs={},Er={};Object.defineProperty(Er,"__esModule",{value:!0});Er.errorValues=Er.errorCodes=void 0;Er.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};Er.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=Er,r=vr,n=t.errorCodes.rpc.internal,o="Unspecified error message. This is a bug, please report it.",i={code:n,message:s(n)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function s(d,_=o){if(Number.isInteger(d)){const T=d.toString();if(h(t.errorValues,T))return t.errorValues[T].message;if(u(d))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return _}e.getMessageFromCode=s;function c(d){if(!Number.isInteger(d))return!1;const _=d.toString();return!!(t.errorValues[_]||u(d))}e.isValidCode=c;function l(d,{fallbackError:_=i,shouldIncludeStack:T=!1}={}){var R,L;if(!_||!Number.isInteger(_.code)||typeof _.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(d instanceof r.EthereumRpcError)return d.serialize();const V={};if(d&&typeof d=="object"&&!Array.isArray(d)&&h(d,"code")&&c(d.code)){const k=d;V.code=k.code,k.message&&typeof k.message=="string"?(V.message=k.message,h(k,"data")&&(V.data=k.data)):(V.message=s(V.code),V.data={originalError:f(d)})}else{V.code=_.code;const k=(R=d)===null||R===void 0?void 0:R.message;V.message=k&&typeof k=="string"?k:_.message,V.data={originalError:f(d)}}const P=(L=d)===null||L===void 0?void 0:L.stack;return T&&d&&P&&typeof P=="string"&&(V.stack=P),V}e.serializeError=l;function u(d){return d>=-32099&&d<=-32e3}function f(d){return d&&typeof d=="object"&&!Array.isArray(d)?Object.assign({},d):d}function h(d,_){return Object.prototype.hasOwnProperty.call(d,_)}})(Cs);var Io={};Object.defineProperty(Io,"__esModule",{value:!0});Io.ethErrors=void 0;const Bs=vr,tc=Cs,mt=Er;Io.ethErrors={rpc:{parse:e=>Ct(mt.errorCodes.rpc.parse,e),invalidRequest:e=>Ct(mt.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Ct(mt.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Ct(mt.errorCodes.rpc.methodNotFound,e),internal:e=>Ct(mt.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Ct(t,e)},invalidInput:e=>Ct(mt.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Ct(mt.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Ct(mt.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Ct(mt.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Ct(mt.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Ct(mt.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>yn(mt.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>yn(mt.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>yn(mt.errorCodes.provider.unsupportedMethod,e),disconnected:e=>yn(mt.errorCodes.provider.disconnected,e),chainDisconnected:e=>yn(mt.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new Bs.EthereumProviderError(t,r,n)}}};function Ct(e,t){const[r,n]=rc(t);return new Bs.EthereumRpcError(e,r||tc.getMessageFromCode(e),n)}function yn(e,t){const[r,n]=rc(t);return new Bs.EthereumProviderError(e,r||tc.getMessageFromCode(e),n)}function rc(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=vr;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const r=Cs;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=Io;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const o=Er;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})})(Gt);var Yh={exports:{}},Ei={exports:{}},it={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Boolean,Uint8Array},nc={exports:{}},_n={exports:{}},Ha;function Cn(){if(Ha)return _n.exports;Ha=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return _n.exports=e,_n.exports.AbortSignal=t,_n.exports.default=e,_n.exports}(function(e){const t=ir,{kResistStopPropagation:r,SymbolDispose:n}=it,o=globalThis.AbortSignal||Cn().AbortSignal,i=globalThis.AbortController||Cn().AbortController,s=Object.getPrototypeOf(async function(){}).constructor,c=globalThis.Blob||t.Blob,l=typeof c<"u"?function(d){return d instanceof c}:function(d){return!1},u=(d,_)=>{if(d!==void 0&&(d===null||typeof d!="object"||!("aborted"in d)))throw new ERR_INVALID_ARG_TYPE(_,"AbortSignal",d)},f=(d,_)=>{if(typeof d!="function")throw new ERR_INVALID_ARG_TYPE(_,"Function",d)};class h extends Error{constructor(_){if(!Array.isArray(_))throw new TypeError(`Expected input to be an Array, got ${typeof _}`);let T="";for(let R=0;R<_.length;R++)T+=`    ${_[R].stack}
`;super(T),this.name="AggregateError",this.errors=_}}e.exports={AggregateError:h,kEmptyObject:Object.freeze({}),once(d){let _=!1;return function(...T){_||(_=!0,d.apply(this,T))}},createDeferredPromise:function(){let d,_;return{promise:new Promise((T,R)=>{d=T,_=R}),resolve:d,reject:_}},promisify(d){return new Promise((_,T)=>{d((R,...L)=>R?T(R):_(...L))})},debuglog(){return function(){}},format(d,..._){return d.replace(/%([sdifj])/g,function(...[T,R]){const L=_.shift();return R==="f"?L.toFixed(6):R==="j"?JSON.stringify(L):R==="s"&&typeof L=="object"?`${L.constructor!==Object?L.constructor.name:""} {}`.trim():L.toString()})},inspect(d){switch(typeof d){case"string":if(d.includes("'"))if(d.includes('"')){if(!d.includes("`")&&!d.includes("${"))return`\`${d}\``}else return`"${d}"`;return`'${d}'`;case"number":return isNaN(d)?"NaN":Object.is(d,-0)?String(d):d;case"bigint":return`${String(d)}n`;case"boolean":case"undefined":return String(d);case"object":return"{}"}},types:{isAsyncFunction(d){return d instanceof s},isArrayBufferView(d){return ArrayBuffer.isView(d)}},isBlob:l,deprecate(d,_){return d},addAbortListener:ln.addAbortListener||function(d,_){if(d===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",d);u(d,"signal"),f(_,"listener");let T;return d.aborted?queueMicrotask(()=>_()):(d.addEventListener("abort",_,{__proto__:null,once:!0,[r]:!0}),T=()=>{d.removeEventListener("abort",_)}),{__proto__:null,[n](){var R;(R=T)===null||R===void 0||R()}}},AbortSignalAny:o.any||function(d){if(d.length===1)return d[0];const _=new i,T=()=>_.abort();return d.forEach(R=>{u(R,"signals"),R.addEventListener("abort",T,{once:!0})}),_.signal.addEventListener("abort",()=>{d.forEach(R=>R.removeEventListener("abort",T))},{once:!0}),_.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(nc);var St=nc.exports,js={};const{format:Qh,inspect:bo,AggregateError:ep}=St,tp=globalThis.AggregateError||ep,rp=Symbol("kIsNodeError"),np=["string","function","number","object","Function","Object","boolean","bigint","symbol"],op=/^([A-Z][a-z0-9]*)+$/,ip="__node_internal_",To={};function Lr(e,t){if(!e)throw new To.ERR_INTERNAL_ASSERTION(t)}function za(e){let t="",r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function sp(e,t,r){if(typeof t=="function")return Lr(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const n=(t.match(/%[dfijoOs]/g)||[]).length;return Lr(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?t:Qh(t,...r)}function bt(e,t,r){r||(r=Error);class n extends r{constructor(...i){super(sp(e,t,i))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[rp]=!0,To[e]=n}function Wa(e){const t=ip+e.name;return Object.defineProperty(e,"name",{value:t}),e}function ap(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new tp([t,e],t.message);return r.code=t.code,r}return e||t}let lp=class extends Error{constructor(e="The operation was aborted",t=void 0){if(t!==void 0&&typeof t!="object")throw new To.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}};bt("ERR_ASSERTION","%s",Error);bt("ERR_INVALID_ARG_TYPE",(e,t,r)=>{Lr(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const o=[],i=[],s=[];for(const l of t)Lr(typeof l=="string","All expected entries have to be of type string"),np.includes(l)?o.push(l.toLowerCase()):op.test(l)?i.push(l):(Lr(l!=="object",'The value "object" should be written as "Object"'),s.push(l));if(i.length>0){const l=o.indexOf("object");l!==-1&&(o.splice(o,l,1),i.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{const l=o.pop();n+=`one of type ${o.join(", ")}, or ${l}`}}(i.length>0||s.length>0)&&(n+=" or ")}if(i.length>0){switch(i.length){case 1:n+=`an instance of ${i[0]}`;break;case 2:n+=`an instance of ${i[0]} or ${i[1]}`;break;default:{const l=i.pop();n+=`an instance of ${i.join(", ")}, or ${l}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{const l=s.pop();n+=`one of ${s.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var c;if((c=r.constructor)!==null&&c!==void 0&&c.name)n+=`. Received an instance of ${r.constructor.name}`;else{const l=bo(r,{depth:-1});n+=`. Received ${l}`}}else{let l=bo(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);bt("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=bo(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError);bt("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;const o=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${o}.`},TypeError);bt("ERR_MISSING_ARGS",(...e)=>{Lr(e.length>0,"At least one arg needs to be specified");let t;const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(n=>`"${n}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`},TypeError);bt("ERR_OUT_OF_RANGE",(e,t,r)=>{Lr(t,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=za(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=za(n)),n+="n"):n=bo(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError);bt("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);bt("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);bt("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);bt("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);bt("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);bt("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);bt("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);bt("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);bt("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);bt("ERR_STREAM_WRITE_AFTER_END","write after end",Error);bt("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var It={AbortError:lp,aggregateTwoErrors:Wa(ap),hideStackFrames:Wa,codes:To};const{ArrayIsArray:$s,ArrayPrototypeIncludes:oc,ArrayPrototypeJoin:ic,ArrayPrototypeMap:up,NumberIsInteger:Ds,NumberIsNaN:cp,NumberMAX_SAFE_INTEGER:fp,NumberMIN_SAFE_INTEGER:dp,NumberParseInt:hp,ObjectPrototypeHasOwnProperty:pp,RegExpPrototypeExec:sc,String:gp,StringPrototypeToUpperCase:bp,StringPrototypeTrim:mp}=it,{hideStackFrames:Ut,codes:{ERR_SOCKET_BAD_PORT:yp,ERR_INVALID_ARG_TYPE:wt,ERR_INVALID_ARG_VALUE:un,ERR_OUT_OF_RANGE:Cr,ERR_UNKNOWN_SIGNAL:qa}}=It,{normalizeEncoding:_p}=St,{isAsyncFunction:wp,isArrayBufferView:vp}=St.types,Va={};function Ep(e){return e===(e|0)}function Sp(e){return e===e>>>0}const Rp=/^[0-7]+$/,Ap="must be a 32-bit unsigned integer or an octal string";function Ip(e,t,r){if(typeof e>"u"&&(e=r),typeof e=="string"){if(sc(Rp,e)===null)throw new un(t,e,Ap);e=hp(e,8)}return ac(e,t),e}const Tp=Ut((e,t,r=dp,n=fp)=>{if(typeof e!="number")throw new wt(t,"number",e);if(!Ds(e))throw new Cr(t,"an integer",e);if(e<r||e>n)throw new Cr(t,`>= ${r} && <= ${n}`,e)}),Op=Ut((e,t,r=-2147483648,n=2147483647)=>{if(typeof e!="number")throw new wt(t,"number",e);if(!Ds(e))throw new Cr(t,"an integer",e);if(e<r||e>n)throw new Cr(t,`>= ${r} && <= ${n}`,e)}),ac=Ut((e,t,r=!1)=>{if(typeof e!="number")throw new wt(t,"number",e);if(!Ds(e))throw new Cr(t,"an integer",e);const n=r?1:0,o=4294967295;if(e<n||e>o)throw new Cr(t,`>= ${n} && <= ${o}`,e)});function Ms(e,t){if(typeof e!="string")throw new wt(t,"string",e)}function xp(e,t,r=void 0,n){if(typeof e!="number")throw new wt(t,"number",e);if(r!=null&&e<r||n!=null&&e>n||(r!=null||n!=null)&&cp(e))throw new Cr(t,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,e)}const kp=Ut((e,t,r)=>{if(!oc(r,e)){const n="must be one of: "+ic(up(r,o=>typeof o=="string"?`'${o}'`:gp(o)),", ");throw new un(t,e,n)}});function lc(e,t){if(typeof e!="boolean")throw new wt(t,"boolean",e)}function Si(e,t,r){return e==null||!pp(e,t)?r:e[t]}const Pp=Ut((e,t,r=null)=>{const n=Si(r,"allowArray",!1),o=Si(r,"allowFunction",!1);if(!Si(r,"nullable",!1)&&e===null||!n&&$s(e)||typeof e!="object"&&(!o||typeof e!="function"))throw new wt(t,"Object",e)}),Lp=Ut((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new wt(t,"a dictionary",e)}),Oo=Ut((e,t,r=0)=>{if(!$s(e))throw new wt(t,"Array",e);if(e.length<r){const n=`must be longer than ${r}`;throw new un(t,e,n)}});function Np(e,t){Oo(e,t);for(let r=0;r<e.length;r++)Ms(e[r],`${t}[${r}]`)}function Cp(e,t){Oo(e,t);for(let r=0;r<e.length;r++)lc(e[r],`${t}[${r}]`)}function Bp(e,t){Oo(e,t);for(let r=0;r<e.length;r++){const n=e[r],o=`${t}[${r}]`;if(n==null)throw new wt(o,"AbortSignal",n);uc(n,o)}}function jp(e,t="signal"){if(Ms(e,t),Va[e]===void 0)throw Va[bp(e)]!==void 0?new qa(e+" (signals must use all capital letters)"):new qa(e)}const $p=Ut((e,t="buffer")=>{if(!vp(e))throw new wt(t,["Buffer","TypedArray","DataView"],e)});function Dp(e,t){const r=_p(t),n=e.length;if(r==="hex"&&n%2!==0)throw new un("encoding",t,`is invalid for data of length ${n}`)}function Mp(e,t="Port",r=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&mp(e).length===0||+e!==+e>>>0||e>65535||e===0&&!r)throw new yp(t,e,r);return e|0}const uc=Ut((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new wt(t,"AbortSignal",e)}),Fp=Ut((e,t)=>{if(typeof e!="function")throw new wt(t,"Function",e)}),Up=Ut((e,t)=>{if(typeof e!="function"||wp(e))throw new wt(t,"Function",e)}),Hp=Ut((e,t)=>{if(e!==void 0)throw new wt(t,"undefined",e)});function zp(e,t,r){if(!oc(r,e))throw new wt(t,`('${ic(r,"|")}')`,e)}const Wp=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Ga(e,t){if(typeof e>"u"||!sc(Wp,e))throw new un(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function qp(e){if(typeof e=="string")return Ga(e,"hints"),e;if($s(e)){const t=e.length;let r="";if(t===0)return r;for(let n=0;n<t;n++){const o=e[n];Ga(o,"hints"),r+=o,n!==t-1&&(r+=", ")}return r}throw new un("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var Fn={isInt32:Ep,isUint32:Sp,parseFileMode:Ip,validateArray:Oo,validateStringArray:Np,validateBooleanArray:Cp,validateAbortSignalArray:Bp,validateBoolean:lc,validateBuffer:$p,validateDictionary:Lp,validateEncoding:Dp,validateFunction:Fp,validateInt32:Op,validateInteger:Tp,validateNumber:xp,validateObject:Pp,validateOneOf:kp,validatePlainFunction:Up,validatePort:Mp,validateSignalName:jp,validateString:Ms,validateUint32:ac,validateUndefined:Hp,validateUnion:zp,validateAbortSignal:uc,validateLinkHeaderValue:qp},Fs={exports:{}};const{SymbolAsyncIterator:Za,SymbolIterator:Ja,SymbolFor:Dr}=it,cc=Dr("nodejs.stream.destroyed"),fc=Dr("nodejs.stream.errored"),us=Dr("nodejs.stream.readable"),cs=Dr("nodejs.stream.writable"),dc=Dr("nodejs.stream.disturbed"),Vp=Dr("nodejs.webstream.isClosedPromise"),Gp=Dr("nodejs.webstream.controllerErrorFunction");function xo(e,t=!1){var r;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((r=e._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function ko(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function Zp(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function ar(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function hc(e){return!!(e&&!ar(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function pc(e){return!!(e&&!ar(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function gc(e){return!!(e&&!ar(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function Jp(e){return hc(e)||pc(e)||gc(e)}function Kp(e,t){return e==null?!1:t===!0?typeof e[Za]=="function":t===!1?typeof e[Ja]=="function":typeof e[Za]=="function"||typeof e[Ja]=="function"}function Po(e){if(!ar(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[cc]||n!=null&&n.destroyed)}function bc(e){if(!ko(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function Xp(e,t){if(!ko(e))return null;if(e.writableFinished===!0)return!0;const r=e._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||t===!1&&r.ended===!0&&r.length===0)}function Yp(e){if(!xo(e))return null;if(e.readableEnded===!0)return!0;const t=e._readableState;return!t||t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function mc(e,t){if(!xo(e))return null;const r=e._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||t===!1&&r.ended===!0&&r.length===0)}function yc(e){return e&&e[us]!=null?e[us]:typeof(e==null?void 0:e.readable)!="boolean"?null:Po(e)?!1:xo(e)&&e.readable&&!mc(e)}function _c(e){return e&&e[cs]!=null?e[cs]:typeof(e==null?void 0:e.writable)!="boolean"?null:Po(e)?!1:ko(e)&&e.writable&&!bc(e)}function Qp(e,t){return ar(e)?Po(e)?!0:!((t==null?void 0:t.readable)!==!1&&yc(e)||(t==null?void 0:t.writable)!==!1&&_c(e)):null}function eg(e){var t,r;return ar(e)?e.writableErrored?e.writableErrored:(t=(r=e._writableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function tg(e){var t,r;return ar(e)?e.readableErrored?e.readableErrored:(t=(r=e._readableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function rg(e){if(!ar(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,r=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(t==null?void 0:t.closed)||(r==null?void 0:r.closed):typeof e._closed=="boolean"&&wc(e)?e._closed:null}function wc(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function vc(e){return typeof e._sent100=="boolean"&&wc(e)}function ng(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function og(e){if(!ar(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&vc(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function ig(e){var t;return!!(e&&((t=e[dc])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function sg(e){var t,r,n,o,i,s,c,l,u,f;return!!(e&&((t=(r=(n=(o=(i=(s=e[fc])!==null&&s!==void 0?s:e.readableErrored)!==null&&i!==void 0?i:e.writableErrored)!==null&&o!==void 0?o:(c=e._readableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&n!==void 0?n:(l=e._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(u=e._readableState)===null||u===void 0?void 0:u.errored)!==null&&t!==void 0?t:!((f=e._writableState)===null||f===void 0)&&f.errored))}var gr={isDestroyed:Po,kIsDestroyed:cc,isDisturbed:ig,kIsDisturbed:dc,isErrored:sg,kIsErrored:fc,isReadable:yc,kIsReadable:us,kIsClosedPromise:Vp,kControllerErrorFunction:Gp,kIsWritable:cs,isClosed:rg,isDuplexNodeStream:Zp,isFinished:Qp,isIterable:Kp,isReadableNodeStream:xo,isReadableStream:hc,isReadableEnded:Yp,isReadableFinished:mc,isReadableErrored:tg,isNodeStream:ar,isWebStream:Jp,isWritable:_c,isWritableNodeStream:ko,isWritableStream:pc,isWritableEnded:bc,isWritableFinished:Xp,isWritableErrored:eg,isServerRequest:ng,isServerResponse:vc,willEmitClose:og,isTransformStream:gc};const Zr=$r,{AbortError:Ec,codes:ag}=It,{ERR_INVALID_ARG_TYPE:lg,ERR_STREAM_PREMATURE_CLOSE:Ka}=ag,{kEmptyObject:fs,once:ds}=St,{validateAbortSignal:ug,validateFunction:cg,validateObject:fg,validateBoolean:dg}=Fn,{Promise:hg,PromisePrototypeThen:pg,SymbolDispose:Sc}=it,{isClosed:gg,isReadable:Xa,isReadableNodeStream:Ri,isReadableStream:bg,isReadableFinished:Ya,isReadableErrored:Qa,isWritable:el,isWritableNodeStream:tl,isWritableStream:mg,isWritableFinished:rl,isWritableErrored:nl,isNodeStream:yg,willEmitClose:_g,kIsClosedPromise:wg}=gr;let Kr;function vg(e){return e.setHeader&&typeof e.abort=="function"}const hs=()=>{};function Rc(e,t,r){var n,o;if(arguments.length===2?(r=t,t=fs):t==null?t=fs:fg(t,"options"),cg(r,"callback"),ug(t.signal,"options.signal"),r=ds(r),bg(e)||mg(e))return Eg(e,t,r);if(!yg(e))throw new lg("stream",["ReadableStream","WritableStream","Stream"],e);const i=(n=t.readable)!==null&&n!==void 0?n:Ri(e),s=(o=t.writable)!==null&&o!==void 0?o:tl(e),c=e._writableState,l=e._readableState,u=()=>{e.writable||d()};let f=_g(e)&&Ri(e)===i&&tl(e)===s,h=rl(e,!1);const d=()=>{h=!0,e.destroyed&&(f=!1),!(f&&(!e.readable||i))&&(!i||_)&&r.call(e)};let _=Ya(e,!1);const T=()=>{_=!0,e.destroyed&&(f=!1),!(f&&(!e.writable||s))&&(!s||h)&&r.call(e)},R=$=>{r.call(e,$)};let L=gg(e);const V=()=>{L=!0;const $=nl(e)||Qa(e);if($&&typeof $!="boolean")return r.call(e,$);if(i&&!_&&Ri(e,!0)&&!Ya(e,!1))return r.call(e,new Ka);if(s&&!h&&!rl(e,!1))return r.call(e,new Ka);r.call(e)},P=()=>{L=!0;const $=nl(e)||Qa(e);if($&&typeof $!="boolean")return r.call(e,$);r.call(e)},k=()=>{e.req.on("finish",d)};vg(e)?(e.on("complete",d),f||e.on("abort",V),e.req?k():e.on("request",k)):s&&!c&&(e.on("end",u),e.on("close",u)),!f&&typeof e.aborted=="boolean"&&e.on("aborted",V),e.on("end",T),e.on("finish",d),t.error!==!1&&e.on("error",R),e.on("close",V),L?Zr.nextTick(V):c!=null&&c.errorEmitted||l!=null&&l.errorEmitted?f||Zr.nextTick(P):(!i&&(!f||Xa(e))&&(h||el(e)===!1)||!s&&(!f||el(e))&&(_||Xa(e)===!1)||l&&e.req&&e.aborted)&&Zr.nextTick(P);const S=()=>{r=hs,e.removeListener("aborted",V),e.removeListener("complete",d),e.removeListener("abort",V),e.removeListener("request",k),e.req&&e.req.removeListener("finish",d),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",d),e.removeListener("end",T),e.removeListener("error",R),e.removeListener("close",V)};if(t.signal&&!L){const $=()=>{const q=r;S(),q.call(e,new Ec(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)Zr.nextTick($);else{Kr=Kr||St.addAbortListener;const q=Kr(t.signal,$),re=r;r=ds((...U)=>{q[Sc](),re.apply(e,U)})}}return S}function Eg(e,t,r){let n=!1,o=hs;if(t.signal)if(o=()=>{n=!0,r.call(e,new Ec(void 0,{cause:t.signal.reason}))},t.signal.aborted)Zr.nextTick(o);else{Kr=Kr||St.addAbortListener;const s=Kr(t.signal,o),c=r;r=ds((...l)=>{s[Sc](),c.apply(e,l)})}const i=(...s)=>{n||Zr.nextTick(()=>r.apply(e,s))};return pg(e[wg].promise,i,i),hs}function Sg(e,t){var r;let n=!1;return t===null&&(t=fs),(r=t)!==null&&r!==void 0&&r.cleanup&&(dg(t.cleanup,"cleanup"),n=t.cleanup),new hg((o,i)=>{const s=Rc(e,t,c=>{n&&s(),c?i(c):o()})})}Fs.exports=Rc;Fs.exports.finished=Sg;var Ar=Fs.exports;const nr=$r,{aggregateTwoErrors:Rg,codes:{ERR_MULTIPLE_CALLBACK:Ag},AbortError:Ig}=It,{Symbol:Ac}=it,{kIsDestroyed:Tg,isDestroyed:Og,isFinished:xg,isServerRequest:kg}=gr,Ic=Ac("kDestroy"),ps=Ac("kConstruct");function Tc(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function Pg(e,t){const r=this._readableState,n=this._writableState,o=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof t=="function"&&t(),this):(Tc(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?ol(this,e,t):this.once(Ic,function(i){ol(this,Rg(i,e),t)}),this)}function ol(e,t,r){let n=!1;function o(i){if(n)return;n=!0;const s=e._readableState,c=e._writableState;Tc(i,c,s),c&&(c.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(i),i?nr.nextTick(Lg,e,i):nr.nextTick(Oc,e)}try{e._destroy(t||null,o)}catch(i){o(i)}}function Lg(e,t){gs(e,t),Oc(e)}function Oc(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(r!=null&&r.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function gs(e,t){const r=e._readableState,n=e._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function Ng(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function bs(e,t,r){const n=e._readableState,o=e._writableState;if(o!=null&&o.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||o!=null&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),n&&!n.errored&&(n.errored=t),r?nr.nextTick(gs,e,t):gs(e,t))}function Cg(e,t){if(typeof e._construct!="function")return;const r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(ps,t),!(e.listenerCount(ps)>1)&&nr.nextTick(Bg,e)}function Bg(e){let t=!1;function r(n){if(t){bs(e,n??new Ag);return}t=!0;const o=e._readableState,i=e._writableState,s=i||o;o&&(o.constructed=!0),i&&(i.constructed=!0),s.destroyed?e.emit(Ic,n):n?bs(e,n,!0):nr.nextTick(jg,e)}try{e._construct(n=>{nr.nextTick(r,n)})}catch(n){nr.nextTick(r,n)}}function jg(e){e.emit(ps)}function il(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function xc(e){e.emit("close")}function $g(e,t){e.emit("error",t),nr.nextTick(xc,e)}function Dg(e,t){!e||Og(e)||(!t&&!xg(e)&&(t=new Ig),kg(e)?(e.socket=null,e.destroy(t)):il(e)?e.abort():il(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?nr.nextTick($g,e,t):nr.nextTick(xc,e),e.destroyed||(e[Tg]=!0))}var cn={construct:Cg,destroyer:Dg,destroy:Pg,undestroy:Ng,errorOrDestroy:bs};const{ArrayIsArray:Mg,ObjectSetPrototypeOf:kc}=it,{EventEmitter:Lo}=ln;function No(e){Lo.call(this,e)}kc(No.prototype,Lo.prototype);kc(No,Lo);No.prototype.pipe=function(e,t){const r=this;function n(f){e.writable&&e.write(f)===!1&&r.pause&&r.pause()}r.on("data",n);function o(){r.readable&&r.resume&&r.resume()}e.on("drain",o),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",s),r.on("close",c));let i=!1;function s(){i||(i=!0,e.end())}function c(){i||(i=!0,typeof e.destroy=="function"&&e.destroy())}function l(f){u(),Lo.listenerCount(this,"error")===0&&this.emit("error",f)}ms(r,"error",l),ms(e,"error",l);function u(){r.removeListener("data",n),e.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",c),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e};function ms(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Mg(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}var Us={Stream:No,prependListener:ms},Pc={exports:{}};(function(e){const{SymbolDispose:t}=it,{AbortError:r,codes:n}=It,{isNodeStream:o,isWebStream:i,kControllerErrorFunction:s}=gr,c=Ar,{ERR_INVALID_ARG_TYPE:l}=n;let u;const f=(h,d)=>{if(typeof h!="object"||!("aborted"in h))throw new l(d,"AbortSignal",h)};e.exports.addAbortSignal=function(h,d){if(f(h,"signal"),!o(d)&&!i(d))throw new l("stream",["ReadableStream","WritableStream","Stream"],d);return e.exports.addAbortSignalNoValidate(h,d)},e.exports.addAbortSignalNoValidate=function(h,d){if(typeof h!="object"||!("aborted"in h))return d;const _=o(d)?()=>{d.destroy(new r(void 0,{cause:h.reason}))}:()=>{d[s](new r(void 0,{cause:h.reason}))};if(h.aborted)_();else{u=u||St.addAbortListener;const T=u(h,_);c(d,T[t])}return d}})(Pc);var Co=Pc.exports;const{StringPrototypeSlice:sl,SymbolIterator:Fg,TypedArrayPrototypeSet:Qn,Uint8Array:Ug}=it,{Buffer:Ai}=ir,{inspect:Hg}=St;var zg=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let t=this.head,r=""+t.data;for(;(t=t.next)!==null;)r+=e+t.data;return r}concat(e){if(this.length===0)return Ai.alloc(0);const t=Ai.allocUnsafe(e>>>0);let r=this.head,n=0;for(;r;)Qn(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){const r=this.head.data;if(e<r.length){const n=r.slice(0,e);return this.head.data=r.slice(e),n}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Fg](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,n=0;do{const o=r.data;if(e>o.length)t+=o,e-=o.length;else{e===o.length?(t+=o,++n,r.next?this.head=r.next:this.head=this.tail=null):(t+=sl(o,0,e),this.head=r,r.data=sl(o,e));break}++n}while((r=r.next)!==null);return this.length-=n,t}_getBuffer(e){const t=Ai.allocUnsafe(e),r=e;let n=this.head,o=0;do{const i=n.data;if(e>i.length)Qn(t,i,r-e),e-=i.length;else{e===i.length?(Qn(t,i,r-e),++o,n.next?this.head=n.next:this.head=this.tail=null):(Qn(t,new Ug(i.buffer,i.byteOffset,e),r-e),this.head=n,n.data=i.slice(e));break}++o}while((n=n.next)!==null);return this.length-=o,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return Hg(this,{...t,depth:0,customInspect:!1})}};const{MathFloor:Wg,NumberIsInteger:qg}=it,{validateInteger:Vg}=Fn,{ERR_INVALID_ARG_VALUE:Gg}=It.codes;let Lc=16*1024,Nc=16;function Zg(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function Cc(e){return e?Nc:Lc}function Jg(e,t){Vg(t,"value",0),e?Nc=t:Lc=t}function Kg(e,t,r,n){const o=Zg(t,n,r);if(o!=null){if(!qg(o)||o<0){const i=n?`options.${r}`:"options.highWaterMark";throw new Gg(i,o)}return Wg(o)}return Cc(e.objectMode)}var Bo={getHighWaterMark:Kg,getDefaultHighWaterMark:Cc,setDefaultHighWaterMark:Jg};const al=$r,{PromisePrototypeThen:Xg,SymbolAsyncIterator:ll,SymbolIterator:ul}=it,{Buffer:Yg}=ir,{ERR_INVALID_ARG_TYPE:Qg,ERR_STREAM_NULL_VALUES:e0}=It.codes;function t0(e,t,r){let n;if(typeof t=="string"||t instanceof Yg)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});let o;if(t&&t[ll])o=!0,n=t[ll]();else if(t&&t[ul])o=!1,n=t[ul]();else throw new Qg("iterable",["Iterable"],t);const i=new e({objectMode:!0,highWaterMark:1,...r});let s=!1;i._read=function(){s||(s=!0,l())},i._destroy=function(u,f){Xg(c(u),()=>al.nextTick(f,u),h=>al.nextTick(f,h||u))};async function c(u){const f=u!=null,h=typeof n.throw=="function";if(f&&h){const{value:d,done:_}=await n.throw(u);if(await d,_)return}if(typeof n.return=="function"){const{value:d}=await n.return();await d}}async function l(){for(;;){try{const{value:u,done:f}=o?await n.next():n.next();if(f)i.push(null);else{const h=u&&typeof u.then=="function"?await u:u;if(h===null)throw s=!1,new e0;if(i.push(h))continue;s=!1}}catch(u){i.destroy(u)}break}}return i}var Bc=t0,Ii,cl;function jo(){if(cl)return Ii;cl=1;const e=$r,{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:o,ObjectDefineProperties:i,ObjectKeys:s,ObjectSetPrototypeOf:c,Promise:l,SafeSet:u,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:d}=it;Ii=we,we.ReadableState=Be;const{EventEmitter:_}=ln,{Stream:T,prependListener:R}=Us,{Buffer:L}=ir,{addAbortSignal:V}=Co,P=Ar;let k=St.debuglog("stream",b=>{k=b});const S=zg,$=cn,{getHighWaterMark:q,getDefaultHighWaterMark:re}=Bo,{aggregateTwoErrors:U,codes:{ERR_INVALID_ARG_TYPE:H,ERR_METHOD_NOT_IMPLEMENTED:ae,ERR_OUT_OF_RANGE:ee,ERR_STREAM_PUSH_AFTER_EOF:g,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:y},AbortError:w}=It,{validateObject:B}=Fn,M=d("kPaused"),{StringDecoder:O}=Lh(),D=Bc;c(we.prototype,T.prototype),c(we,T);const x=()=>{},{errorOrDestroy:F}=$,G=1,ne=2,W=4,ie=8,fe=16,ue=32,ve=64,ge=128,_e=256,Le=512,Ne=1024,Re=2048,I=4096,N=8192,J=16384,ce=32768,le=65536,he=1<<17,Te=1<<18;function xe(b){return{enumerable:!1,get(){return(this.state&b)!==0},set(E){E?this.state|=b:this.state&=~b}}}i(Be.prototype,{objectMode:xe(G),ended:xe(ne),endEmitted:xe(W),reading:xe(ie),constructed:xe(fe),sync:xe(ue),needReadable:xe(ve),emittedReadable:xe(ge),readableListening:xe(_e),resumeScheduled:xe(Le),errorEmitted:xe(Ne),emitClose:xe(Re),autoDestroy:xe(I),destroyed:xe(N),closed:xe(J),closeEmitted:xe(ce),multiAwaitDrain:xe(le),readingMore:xe(he),dataEmitted:xe(Te)});function Be(b,E,Q){typeof Q!="boolean"&&(Q=E instanceof dr()),this.state=Re|I|fe|ue,b&&b.objectMode&&(this.state|=G),Q&&b&&b.readableObjectMode&&(this.state|=G),this.highWaterMark=b?q(this,b,"readableHighWaterMark",Q):re(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[M]=null,b&&b.emitClose===!1&&(this.state&=~Re),b&&b.autoDestroy===!1&&(this.state&=~I),this.errored=null,this.defaultEncoding=b&&b.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,b&&b.encoding&&(this.decoder=new O(b.encoding),this.encoding=b.encoding)}function we(b){if(!(this instanceof we))return new we(b);const E=this instanceof dr();this._readableState=new Be(b,this,E),b&&(typeof b.read=="function"&&(this._read=b.read),typeof b.destroy=="function"&&(this._destroy=b.destroy),typeof b.construct=="function"&&(this._construct=b.construct),b.signal&&!E&&V(b.signal,this)),T.call(this,b),$.construct(this,()=>{this._readableState.needReadable&&v(this,this._readableState)})}we.prototype.destroy=$.destroy,we.prototype._undestroy=$.undestroy,we.prototype._destroy=function(b,E){E(b)},we.prototype[_.captureRejectionSymbol]=function(b){this.destroy(b)},we.prototype[f]=function(){let b;return this.destroyed||(b=this.readableEnded?null:new w,this.destroy(b)),new l((E,Q)=>P(this,be=>be&&be!==b?Q(be):E(null)))},we.prototype.push=function(b,E){return Me(this,b,E,!1)},we.prototype.unshift=function(b,E){return Me(this,b,E,!0)};function Me(b,E,Q,be){k("readableAddChunk",E);const pe=b._readableState;let Oe;if(pe.state&G||(typeof E=="string"?(Q=Q||pe.defaultEncoding,pe.encoding!==Q&&(be&&pe.encoding?E=L.from(E,Q).toString(pe.encoding):(E=L.from(E,Q),Q=""))):E instanceof L?Q="":T._isUint8Array(E)?(E=T._uint8ArrayToBuffer(E),Q=""):E!=null&&(Oe=new H("chunk",["string","Buffer","Uint8Array"],E))),Oe)F(b,Oe);else if(E===null)pe.state&=~ie,Ue(b,pe);else if(pe.state&G||E&&E.length>0)if(be)if(pe.state&W)F(b,new y);else{if(pe.destroyed||pe.errored)return!1;st(b,pe,E,!0)}else if(pe.ended)F(b,new g);else{if(pe.destroyed||pe.errored)return!1;pe.state&=~ie,pe.decoder&&!Q?(E=pe.decoder.write(E),pe.objectMode||E.length!==0?st(b,pe,E,!1):v(b,pe)):st(b,pe,E,!1)}else be||(pe.state&=~ie,v(b,pe));return!pe.ended&&(pe.length<pe.highWaterMark||pe.length===0)}function st(b,E,Q,be){E.flowing&&E.length===0&&!E.sync&&b.listenerCount("data")>0?(E.state&le?E.awaitDrainWriters.clear():E.awaitDrainWriters=null,E.dataEmitted=!0,b.emit("data",Q)):(E.length+=E.objectMode?1:Q.length,be?E.buffer.unshift(Q):E.buffer.push(Q),E.state&ve&&Qe(b)),v(b,E)}we.prototype.isPaused=function(){const b=this._readableState;return b[M]===!0||b.flowing===!1},we.prototype.setEncoding=function(b){const E=new O(b);this._readableState.decoder=E,this._readableState.encoding=this._readableState.decoder.encoding;const Q=this._readableState.buffer;let be="";for(const pe of Q)be+=E.write(pe);return Q.clear(),be!==""&&Q.push(be),this._readableState.length=be.length,this};const Je=1073741824;function vt(b){if(b>Je)throw new ee("size","<= 1GiB",b);return b--,b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,b|=b>>>16,b++,b}function at(b,E){return b<=0||E.length===0&&E.ended?0:E.state&G?1:n(b)?E.flowing&&E.length?E.buffer.first().length:E.length:b<=E.length?b:E.ended?E.length:0}we.prototype.read=function(b){k("read",b),b===void 0?b=NaN:r(b)||(b=o(b,10));const E=this._readableState,Q=b;if(b>E.highWaterMark&&(E.highWaterMark=vt(b)),b!==0&&(E.state&=~ge),b===0&&E.needReadable&&((E.highWaterMark!==0?E.length>=E.highWaterMark:E.length>0)||E.ended))return k("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?X(this):Qe(this),null;if(b=at(b,E),b===0&&E.ended)return E.length===0&&X(this),null;let be=(E.state&ve)!==0;if(k("need readable",be),(E.length===0||E.length-b<E.highWaterMark)&&(be=!0,k("length less than watermark",be)),E.ended||E.reading||E.destroyed||E.errored||!E.constructed)be=!1,k("reading, ended or constructing",be);else if(be){k("do read"),E.state|=ie|ue,E.length===0&&(E.state|=ve);try{this._read(E.highWaterMark)}catch(Oe){F(this,Oe)}E.state&=~ue,E.reading||(b=at(Q,E))}let pe;return b>0?pe=K(b,E):pe=null,pe===null?(E.needReadable=E.length<=E.highWaterMark,b=0):(E.length-=b,E.multiAwaitDrain?E.awaitDrainWriters.clear():E.awaitDrainWriters=null),E.length===0&&(E.ended||(E.needReadable=!0),Q!==b&&E.ended&&X(this)),pe!==null&&!E.errorEmitted&&!E.closeEmitted&&(E.dataEmitted=!0,this.emit("data",pe)),pe};function Ue(b,E){if(k("onEofChunk"),!E.ended){if(E.decoder){const Q=E.decoder.end();Q&&Q.length&&(E.buffer.push(Q),E.length+=E.objectMode?1:Q.length)}E.ended=!0,E.sync?Qe(b):(E.needReadable=!1,E.emittedReadable=!0,et(b))}}function Qe(b){const E=b._readableState;k("emitReadable",E.needReadable,E.emittedReadable),E.needReadable=!1,E.emittedReadable||(k("emitReadable",E.flowing),E.emittedReadable=!0,e.nextTick(et,b))}function et(b){const E=b._readableState;k("emitReadable_",E.destroyed,E.length,E.ended),!E.destroyed&&!E.errored&&(E.length||E.ended)&&(b.emit("readable"),E.emittedReadable=!1),E.needReadable=!E.flowing&&!E.ended&&E.length<=E.highWaterMark,se(b)}function v(b,E){!E.readingMore&&E.constructed&&(E.readingMore=!0,e.nextTick(oe,b,E))}function oe(b,E){for(;!E.reading&&!E.ended&&(E.length<E.highWaterMark||E.flowing&&E.length===0);){const Q=E.length;if(k("maybeReadMore read 0"),b.read(0),Q===E.length)break}E.readingMore=!1}we.prototype._read=function(b){throw new ae("_read()")},we.prototype.pipe=function(b,E){const Q=this,be=this._readableState;be.pipes.length===1&&(be.multiAwaitDrain||(be.multiAwaitDrain=!0,be.awaitDrainWriters=new u(be.awaitDrainWriters?[be.awaitDrainWriters]:[]))),be.pipes.push(b),k("pipe count=%d opts=%j",be.pipes.length,E);const pe=(!E||E.end!==!1)&&b!==e.stdout&&b!==e.stderr?je:dt;be.endEmitted?e.nextTick(pe):Q.once("end",pe),b.on("unpipe",Oe);function Oe(Nt,Ht){k("onunpipe"),Nt===Q&&Ht&&Ht.hasUnpiped===!1&&(Ht.hasUnpiped=!0,br())}function je(){k("onend"),b.end()}let ze,Ke=!1;function br(){k("cleanup"),b.removeListener("close",tt),b.removeListener("finish",ut),ze&&b.removeListener("drain",ze),b.removeListener("error",ft),b.removeListener("unpipe",Oe),Q.removeListener("end",je),Q.removeListener("end",dt),Q.removeListener("data",Ze),Ke=!0,ze&&be.awaitDrainWriters&&(!b._writableState||b._writableState.needDrain)&&ze()}function lr(){Ke||(be.pipes.length===1&&be.pipes[0]===b?(k("false write response, pause",0),be.awaitDrainWriters=b,be.multiAwaitDrain=!1):be.pipes.length>1&&be.pipes.includes(b)&&(k("false write response, pause",be.awaitDrainWriters.size),be.awaitDrainWriters.add(b)),Q.pause()),ze||(ze=de(Q,b),b.on("drain",ze))}Q.on("data",Ze);function Ze(Nt){k("ondata");const Ht=b.write(Nt);k("dest.write",Ht),Ht===!1&&lr()}function ft(Nt){if(k("onerror",Nt),dt(),b.removeListener("error",ft),b.listenerCount("error")===0){const Ht=b._writableState||b._readableState;Ht&&!Ht.errorEmitted?F(b,Nt):b.emit("error",Nt)}}R(b,"error",ft);function tt(){b.removeListener("finish",ut),dt()}b.once("close",tt);function ut(){k("onfinish"),b.removeListener("close",tt),dt()}b.once("finish",ut);function dt(){k("unpipe"),Q.unpipe(b)}return b.emit("pipe",Q),b.writableNeedDrain===!0?lr():be.flowing||(k("pipe resume"),Q.resume()),b};function de(b,E){return function(){const Q=b._readableState;Q.awaitDrainWriters===E?(k("pipeOnDrain",1),Q.awaitDrainWriters=null):Q.multiAwaitDrain&&(k("pipeOnDrain",Q.awaitDrainWriters.size),Q.awaitDrainWriters.delete(E)),(!Q.awaitDrainWriters||Q.awaitDrainWriters.size===0)&&b.listenerCount("data")&&b.resume()}}we.prototype.unpipe=function(b){const E=this._readableState,Q={hasUnpiped:!1};if(E.pipes.length===0)return this;if(!b){const pe=E.pipes;E.pipes=[],this.pause();for(let Oe=0;Oe<pe.length;Oe++)pe[Oe].emit("unpipe",this,{hasUnpiped:!1});return this}const be=t(E.pipes,b);return be===-1?this:(E.pipes.splice(be,1),E.pipes.length===0&&this.pause(),b.emit("unpipe",this,Q),this)},we.prototype.on=function(b,E){const Q=T.prototype.on.call(this,b,E),be=this._readableState;return b==="data"?(be.readableListening=this.listenerCount("readable")>0,be.flowing!==!1&&this.resume()):b==="readable"&&!be.endEmitted&&!be.readableListening&&(be.readableListening=be.needReadable=!0,be.flowing=!1,be.emittedReadable=!1,k("on readable",be.length,be.reading),be.length?Qe(this):be.reading||e.nextTick(j,this)),Q},we.prototype.addListener=we.prototype.on,we.prototype.removeListener=function(b,E){const Q=T.prototype.removeListener.call(this,b,E);return b==="readable"&&e.nextTick(ye,this),Q},we.prototype.off=we.prototype.removeListener,we.prototype.removeAllListeners=function(b){const E=T.prototype.removeAllListeners.apply(this,arguments);return(b==="readable"||b===void 0)&&e.nextTick(ye,this),E};function ye(b){const E=b._readableState;E.readableListening=b.listenerCount("readable")>0,E.resumeScheduled&&E[M]===!1?E.flowing=!0:b.listenerCount("data")>0?b.resume():E.readableListening||(E.flowing=null)}function j(b){k("readable nexttick read 0"),b.read(0)}we.prototype.resume=function(){const b=this._readableState;return b.flowing||(k("resume"),b.flowing=!b.readableListening,te(this,b)),b[M]=!1,this};function te(b,E){E.resumeScheduled||(E.resumeScheduled=!0,e.nextTick(p,b,E))}function p(b,E){k("resume",E.reading),E.reading||b.read(0),E.resumeScheduled=!1,b.emit("resume"),se(b),E.flowing&&!E.reading&&b.read(0)}we.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[M]=!0,this};function se(b){const E=b._readableState;for(k("flow",E.flowing);E.flowing&&b.read()!==null;);}we.prototype.wrap=function(b){let E=!1;b.on("data",be=>{!this.push(be)&&b.pause&&(E=!0,b.pause())}),b.on("end",()=>{this.push(null)}),b.on("error",be=>{F(this,be)}),b.on("close",()=>{this.destroy()}),b.on("destroy",()=>{this.destroy()}),this._read=()=>{E&&b.resume&&(E=!1,b.resume())};const Q=s(b);for(let be=1;be<Q.length;be++){const pe=Q[be];this[pe]===void 0&&typeof b[pe]=="function"&&(this[pe]=b[pe].bind(b))}return this},we.prototype[h]=function(){return Ie(this)},we.prototype.iterator=function(b){return b!==void 0&&B(b,"options"),Ie(this,b)};function Ie(b,E){typeof b.read!="function"&&(b=we.wrap(b,{objectMode:!0}));const Q=a(b,E);return Q.stream=b,Q}async function*a(b,E){let Q=x;function be(je){this===b?(Q(),Q=x):Q=je}b.on("readable",be);let pe;const Oe=P(b,{writable:!1},je=>{pe=je?U(pe,je):null,Q(),Q=x});try{for(;;){const je=b.destroyed?null:b.read();if(je!==null)yield je;else{if(pe)throw pe;if(pe===null)return;await new l(be)}}}catch(je){throw pe=U(pe,je),pe}finally{(pe||(E==null?void 0:E.destroyOnReturn)!==!1)&&(pe===void 0||b._readableState.autoDestroy)?$.destroyer(b,null):(b.off("readable",be),Oe())}}i(we.prototype,{readable:{__proto__:null,get(){const b=this._readableState;return!!b&&b.readable!==!1&&!b.destroyed&&!b.errorEmitted&&!b.endEmitted},set(b){this._readableState&&(this._readableState.readable=!!b)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(b){this._readableState&&(this._readableState.flowing=b)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(b){this._readableState&&(this._readableState.destroyed=b)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Be.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[M]!==!1},set(b){this[M]=!!b}}}),we._fromList=K;function K(b,E){if(E.length===0)return null;let Q;return E.objectMode?Q=E.buffer.shift():!b||b>=E.length?(E.decoder?Q=E.buffer.join(""):E.buffer.length===1?Q=E.buffer.first():Q=E.buffer.concat(E.length),E.buffer.clear()):Q=E.buffer.consume(b,E.decoder),Q}function X(b){const E=b._readableState;k("endReadable",E.endEmitted),E.endEmitted||(E.ended=!0,e.nextTick(m,E,b))}function m(b,E){if(k("endReadableNT",b.endEmitted,b.length),!b.errored&&!b.closeEmitted&&!b.endEmitted&&b.length===0){if(b.endEmitted=!0,E.emit("end"),E.writable&&E.allowHalfOpen===!1)e.nextTick(C,E);else if(b.autoDestroy){const Q=E._writableState;(!Q||Q.autoDestroy&&(Q.finished||Q.writable===!1))&&E.destroy()}}}function C(b){b.writable&&!b.writableEnded&&!b.destroyed&&b.end()}we.from=function(b,E){return D(we,b,E)};let Z;function Ee(){return Z===void 0&&(Z={}),Z}return we.fromWeb=function(b,E){return Ee().newStreamReadableFromReadableStream(b,E)},we.toWeb=function(b,E){return Ee().newReadableStreamFromStreamReadable(b,E)},we.wrap=function(b,E){var Q,be;return new we({objectMode:(Q=(be=b.readableObjectMode)!==null&&be!==void 0?be:b.objectMode)!==null&&Q!==void 0?Q:!0,...E,destroy(pe,Oe){$.destroyer(b,pe),Oe(pe)}}).wrap(b)},Ii}var Ti,fl;function Hs(){if(fl)return Ti;fl=1;const e=$r,{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:o,ObjectDefineProperties:i,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:c,Symbol:l,SymbolHasInstance:u}=it;Ti=B,B.WritableState=y;const{EventEmitter:f}=ln,h=Us.Stream,{Buffer:d}=ir,_=cn,{addAbortSignal:T}=Co,{getHighWaterMark:R,getDefaultHighWaterMark:L}=Bo,{ERR_INVALID_ARG_TYPE:V,ERR_METHOD_NOT_IMPLEMENTED:P,ERR_MULTIPLE_CALLBACK:k,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:$,ERR_STREAM_ALREADY_FINISHED:q,ERR_STREAM_NULL_VALUES:re,ERR_STREAM_WRITE_AFTER_END:U,ERR_UNKNOWN_ENCODING:H}=It.codes,{errorOrDestroy:ae}=_;s(B.prototype,h.prototype),s(B,h);function ee(){}const g=l("kOnFinished");function y(I,N,J){typeof J!="boolean"&&(J=N instanceof dr()),this.objectMode=!!(I&&I.objectMode),J&&(this.objectMode=this.objectMode||!!(I&&I.writableObjectMode)),this.highWaterMark=I?R(this,I,"writableHighWaterMark",J):L(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ce=!!(I&&I.decodeStrings===!1);this.decodeStrings=!ce,this.defaultEncoding=I&&I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=F.bind(void 0,N),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,w(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!I||I.emitClose!==!1,this.autoDestroy=!I||I.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[g]=[]}function w(I){I.buffered=[],I.bufferedIndex=0,I.allBuffers=!0,I.allNoop=!0}y.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},o(y.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function B(I){const N=this instanceof dr();if(!N&&!n(B,this))return new B(I);this._writableState=new y(I,this,N),I&&(typeof I.write=="function"&&(this._write=I.write),typeof I.writev=="function"&&(this._writev=I.writev),typeof I.destroy=="function"&&(this._destroy=I.destroy),typeof I.final=="function"&&(this._final=I.final),typeof I.construct=="function"&&(this._construct=I.construct),I.signal&&T(I.signal,this)),h.call(this,I),_.construct(this,()=>{const J=this._writableState;J.writing||ie(this,J),ge(this,J)})}o(B,u,{__proto__:null,value:function(I){return n(this,I)?!0:this!==B?!1:I&&I._writableState instanceof y}}),B.prototype.pipe=function(){ae(this,new S)};function M(I,N,J,ce){const le=I._writableState;if(typeof J=="function")ce=J,J=le.defaultEncoding;else{if(!J)J=le.defaultEncoding;else if(J!=="buffer"&&!d.isEncoding(J))throw new H(J);typeof ce!="function"&&(ce=ee)}if(N===null)throw new re;if(!le.objectMode)if(typeof N=="string")le.decodeStrings!==!1&&(N=d.from(N,J),J="buffer");else if(N instanceof d)J="buffer";else if(h._isUint8Array(N))N=h._uint8ArrayToBuffer(N),J="buffer";else throw new V("chunk",["string","Buffer","Uint8Array"],N);let he;return le.ending?he=new U:le.destroyed&&(he=new $("write")),he?(e.nextTick(ce,he),ae(I,he,!0),he):(le.pendingcb++,O(I,le,N,J,ce))}B.prototype.write=function(I,N,J){return M(this,I,N,J)===!0},B.prototype.cork=function(){this._writableState.corked++},B.prototype.uncork=function(){const I=this._writableState;I.corked&&(I.corked--,I.writing||ie(this,I))},B.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=c(I)),!d.isEncoding(I))throw new H(I);return this._writableState.defaultEncoding=I,this};function O(I,N,J,ce,le){const he=N.objectMode?1:J.length;N.length+=he;const Te=N.length<N.highWaterMark;return Te||(N.needDrain=!0),N.writing||N.corked||N.errored||!N.constructed?(N.buffered.push({chunk:J,encoding:ce,callback:le}),N.allBuffers&&ce!=="buffer"&&(N.allBuffers=!1),N.allNoop&&le!==ee&&(N.allNoop=!1)):(N.writelen=he,N.writecb=le,N.writing=!0,N.sync=!0,I._write(J,ce,N.onwrite),N.sync=!1),Te&&!N.errored&&!N.destroyed}function D(I,N,J,ce,le,he,Te){N.writelen=ce,N.writecb=Te,N.writing=!0,N.sync=!0,N.destroyed?N.onwrite(new $("write")):J?I._writev(le,N.onwrite):I._write(le,he,N.onwrite),N.sync=!1}function x(I,N,J,ce){--N.pendingcb,ce(J),W(N),ae(I,J)}function F(I,N){const J=I._writableState,ce=J.sync,le=J.writecb;if(typeof le!="function"){ae(I,new k);return}J.writing=!1,J.writecb=null,J.length-=J.writelen,J.writelen=0,N?(N.stack,J.errored||(J.errored=N),I._readableState&&!I._readableState.errored&&(I._readableState.errored=N),ce?e.nextTick(x,I,J,N,le):x(I,J,N,le)):(J.buffered.length>J.bufferedIndex&&ie(I,J),ce?J.afterWriteTickInfo!==null&&J.afterWriteTickInfo.cb===le?J.afterWriteTickInfo.count++:(J.afterWriteTickInfo={count:1,cb:le,stream:I,state:J},e.nextTick(G,J.afterWriteTickInfo)):ne(I,J,1,le))}function G({stream:I,state:N,count:J,cb:ce}){return N.afterWriteTickInfo=null,ne(I,N,J,ce)}function ne(I,N,J,ce){for(!N.ending&&!I.destroyed&&N.length===0&&N.needDrain&&(N.needDrain=!1,I.emit("drain"));J-- >0;)N.pendingcb--,ce();N.destroyed&&W(N),ge(I,N)}function W(I){if(I.writing)return;for(let le=I.bufferedIndex;le<I.buffered.length;++le){var N;const{chunk:he,callback:Te}=I.buffered[le],xe=I.objectMode?1:he.length;I.length-=xe,Te((N=I.errored)!==null&&N!==void 0?N:new $("write"))}const J=I[g].splice(0);for(let le=0;le<J.length;le++){var ce;J[le]((ce=I.errored)!==null&&ce!==void 0?ce:new $("end"))}w(I)}function ie(I,N){if(N.corked||N.bufferProcessing||N.destroyed||!N.constructed)return;const{buffered:J,bufferedIndex:ce,objectMode:le}=N,he=J.length-ce;if(!he)return;let Te=ce;if(N.bufferProcessing=!0,he>1&&I._writev){N.pendingcb-=he-1;const xe=N.allNoop?ee:we=>{for(let Me=Te;Me<J.length;++Me)J[Me].callback(we)},Be=N.allNoop&&Te===0?J:t(J,Te);Be.allBuffers=N.allBuffers,D(I,N,!0,N.length,Be,"",xe),w(N)}else{do{const{chunk:xe,encoding:Be,callback:we}=J[Te];J[Te++]=null;const Me=le?1:xe.length;D(I,N,!1,Me,xe,Be,we)}while(Te<J.length&&!N.writing);Te===J.length?w(N):Te>256?(J.splice(0,Te),N.bufferedIndex=0):N.bufferedIndex=Te}N.bufferProcessing=!1}B.prototype._write=function(I,N,J){if(this._writev)this._writev([{chunk:I,encoding:N}],J);else throw new P("_write()")},B.prototype._writev=null,B.prototype.end=function(I,N,J){const ce=this._writableState;typeof I=="function"?(J=I,I=null,N=null):typeof N=="function"&&(J=N,N=null);let le;if(I!=null){const he=M(this,I,N);he instanceof r&&(le=he)}return ce.corked&&(ce.corked=1,this.uncork()),le||(!ce.errored&&!ce.ending?(ce.ending=!0,ge(this,ce,!0),ce.ended=!0):ce.finished?le=new q("end"):ce.destroyed&&(le=new $("end"))),typeof J=="function"&&(le||ce.finished?e.nextTick(J,le):ce[g].push(J)),this};function fe(I){return I.ending&&!I.destroyed&&I.constructed&&I.length===0&&!I.errored&&I.buffered.length===0&&!I.finished&&!I.writing&&!I.errorEmitted&&!I.closeEmitted}function ue(I,N){let J=!1;function ce(le){if(J){ae(I,le??k());return}if(J=!0,N.pendingcb--,le){const he=N[g].splice(0);for(let Te=0;Te<he.length;Te++)he[Te](le);ae(I,le,N.sync)}else fe(N)&&(N.prefinished=!0,I.emit("prefinish"),N.pendingcb++,e.nextTick(_e,I,N))}N.sync=!0,N.pendingcb++;try{I._final(ce)}catch(le){ce(le)}N.sync=!1}function ve(I,N){!N.prefinished&&!N.finalCalled&&(typeof I._final=="function"&&!N.destroyed?(N.finalCalled=!0,ue(I,N)):(N.prefinished=!0,I.emit("prefinish")))}function ge(I,N,J){fe(N)&&(ve(I,N),N.pendingcb===0&&(J?(N.pendingcb++,e.nextTick((ce,le)=>{fe(le)?_e(ce,le):le.pendingcb--},I,N)):fe(N)&&(N.pendingcb++,_e(I,N))))}function _e(I,N){N.pendingcb--,N.finished=!0;const J=N[g].splice(0);for(let ce=0;ce<J.length;ce++)J[ce]();if(I.emit("finish"),N.autoDestroy){const ce=I._readableState;(!ce||ce.autoDestroy&&(ce.endEmitted||ce.readable===!1))&&I.destroy()}}i(B.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(I){this._writableState&&(this._writableState.destroyed=I)}},writable:{__proto__:null,get(){const I=this._writableState;return!!I&&I.writable!==!1&&!I.destroyed&&!I.errored&&!I.ending&&!I.ended},set(I){this._writableState&&(this._writableState.writable=!!I)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const I=this._writableState;return I?!I.destroyed&&!I.ending&&I.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Le=_.destroy;B.prototype.destroy=function(I,N){const J=this._writableState;return!J.destroyed&&(J.bufferedIndex<J.buffered.length||J[g].length)&&e.nextTick(W,J),Le.call(this,I,N),this},B.prototype._undestroy=_.undestroy,B.prototype._destroy=function(I,N){N(I)},B.prototype[f.captureRejectionSymbol]=function(I){this.destroy(I)};let Ne;function Re(){return Ne===void 0&&(Ne={}),Ne}return B.fromWeb=function(I,N){return Re().newStreamWritableFromWritableStream(I,N)},B.toWeb=function(I){return Re().newWritableStreamFromStreamWritable(I)},Ti}var Oi,dl;function r0(){if(dl)return Oi;dl=1;const e=$r,t=ir,{isReadable:r,isWritable:n,isIterable:o,isNodeStream:i,isReadableNodeStream:s,isWritableNodeStream:c,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:f}=gr,h=Ar,{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:_,ERR_INVALID_RETURN_VALUE:T}}=It,{destroyer:R}=cn,L=dr(),V=jo(),P=Hs(),{createDeferredPromise:k}=St,S=Bc,$=globalThis.Blob||t.Blob,q=typeof $<"u"?function(g){return g instanceof $}:function(g){return!1},re=globalThis.AbortController||Cn().AbortController,{FunctionPrototypeCall:U}=it;class H extends L{constructor(y){super(y),(y==null?void 0:y.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(y==null?void 0:y.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Oi=function g(y,w){if(l(y))return y;if(s(y))return ee({readable:y});if(c(y))return ee({writable:y});if(i(y))return ee({writable:!1,readable:!1});if(u(y))return ee({readable:V.fromWeb(y)});if(f(y))return ee({writable:P.fromWeb(y)});if(typeof y=="function"){const{value:M,write:O,final:D,destroy:x}=ae(y);if(o(M))return S(H,M,{objectMode:!0,write:O,final:D,destroy:x});const F=M==null?void 0:M.then;if(typeof F=="function"){let G;const ne=U(F,M,W=>{if(W!=null)throw new T("nully","body",W)},W=>{R(G,W)});return G=new H({objectMode:!0,readable:!1,write:O,final(W){D(async()=>{try{await ne,e.nextTick(W,null)}catch(ie){e.nextTick(W,ie)}})},destroy:x})}throw new T("Iterable, AsyncIterable or AsyncFunction",w,M)}if(q(y))return g(y.arrayBuffer());if(o(y))return S(H,y,{objectMode:!0,writable:!1});if(u(y==null?void 0:y.readable)&&f(y==null?void 0:y.writable))return H.fromWeb(y);if(typeof(y==null?void 0:y.writable)=="object"||typeof(y==null?void 0:y.readable)=="object"){const M=y!=null&&y.readable?s(y==null?void 0:y.readable)?y==null?void 0:y.readable:g(y.readable):void 0,O=y!=null&&y.writable?c(y==null?void 0:y.writable)?y==null?void 0:y.writable:g(y.writable):void 0;return ee({readable:M,writable:O})}const B=y==null?void 0:y.then;if(typeof B=="function"){let M;return U(B,y,O=>{O!=null&&M.push(O),M.push(null)},O=>{R(M,O)}),M=new H({objectMode:!0,writable:!1,read(){}})}throw new _(w,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],y)};function ae(g){let{promise:y,resolve:w}=k();const B=new re,M=B.signal;return{value:g(async function*(){for(;;){const O=y;y=null;const{chunk:D,done:x,cb:F}=await O;if(e.nextTick(F),x)return;if(M.aborted)throw new d(void 0,{cause:M.reason});({promise:y,resolve:w}=k()),yield D}}(),{signal:M}),write(O,D,x){const F=w;w=null,F({chunk:O,done:!1,cb:x})},final(O){const D=w;w=null,D({done:!0,cb:O})},destroy(O,D){B.abort(),D(O)}}}function ee(g){const y=g.readable&&typeof g.readable.read!="function"?V.wrap(g.readable):g.readable,w=g.writable;let B=!!r(y),M=!!n(w),O,D,x,F,G;function ne(W){const ie=F;F=null,ie?ie(W):W&&G.destroy(W)}return G=new H({readableObjectMode:!!(y!=null&&y.readableObjectMode),writableObjectMode:!!(w!=null&&w.writableObjectMode),readable:B,writable:M}),M&&(h(w,W=>{M=!1,W&&R(y,W),ne(W)}),G._write=function(W,ie,fe){w.write(W,ie)?fe():O=fe},G._final=function(W){w.end(),D=W},w.on("drain",function(){if(O){const W=O;O=null,W()}}),w.on("finish",function(){if(D){const W=D;D=null,W()}})),B&&(h(y,W=>{B=!1,W&&R(y,W),ne(W)}),y.on("readable",function(){if(x){const W=x;x=null,W()}}),y.on("end",function(){G.push(null)}),G._read=function(){for(;;){const W=y.read();if(W===null){x=G._read;return}if(!G.push(W))return}}),G._destroy=function(W,ie){!W&&F!==null&&(W=new d),x=null,O=null,D=null,F===null?ie(W):(F=ie,R(w,W),R(y,W))},G}return Oi}var xi,hl;function dr(){if(hl)return xi;hl=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=it;xi=s;const o=jo(),i=Hs();n(s.prototype,o.prototype),n(s,o);{const f=r(i.prototype);for(let h=0;h<f.length;h++){const d=f[h];s.prototype[d]||(s.prototype[d]=i.prototype[d])}}function s(f){if(!(this instanceof s))return new s(f);o.call(this,f),i.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});let c;function l(){return c===void 0&&(c={}),c}s.fromWeb=function(f,h){return l().newStreamDuplexFromReadableWritablePair(f,h)},s.toWeb=function(f){return l().newReadableWritablePairFromDuplex(f)};let u;return s.from=function(f){return u||(u=r0()),u(f,"body")},xi}const{ObjectSetPrototypeOf:jc,Symbol:n0}=it;var $c=hr;const{ERR_METHOD_NOT_IMPLEMENTED:o0}=It.codes,zs=dr(),{getHighWaterMark:i0}=Bo;jc(hr.prototype,zs.prototype);jc(hr,zs);const xn=n0("kCallback");function hr(e){if(!(this instanceof hr))return new hr(e);const t=e?i0(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),zs.call(this,e),this._readableState.sync=!1,this[xn]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",s0)}function ys(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}r!=null&&this.push(r),this.push(null),e&&e()}):(this.push(null),e&&e())}function s0(){this._final!==ys&&ys.call(this)}hr.prototype._final=ys;hr.prototype._transform=function(e,t,r){throw new o0("_transform()")};hr.prototype._write=function(e,t,r){const n=this._readableState,o=this._writableState,i=n.length;this._transform(e,t,(s,c)=>{if(s){r(s);return}c!=null&&this.push(c),o.ended||i===n.length||n.length<n.highWaterMark?r():this[xn]=r})};hr.prototype._read=function(){if(this[xn]){const e=this[xn];this[xn]=null,e()}};const{ObjectSetPrototypeOf:Dc}=it;var Mc=Qr;const Ws=$c;Dc(Qr.prototype,Ws.prototype);Dc(Qr,Ws);function Qr(e){if(!(this instanceof Qr))return new Qr(e);Ws.call(this,e)}Qr.prototype._transform=function(e,t,r){r(null,e)};const Tn=$r,{ArrayIsArray:a0,Promise:l0,SymbolAsyncIterator:u0,SymbolDispose:c0}=it,mo=Ar,{once:f0}=St,d0=cn,pl=dr(),{aggregateTwoErrors:h0,codes:{ERR_INVALID_ARG_TYPE:_s,ERR_INVALID_RETURN_VALUE:ki,ERR_MISSING_ARGS:p0,ERR_STREAM_DESTROYED:g0,ERR_STREAM_PREMATURE_CLOSE:b0},AbortError:m0}=It,{validateFunction:y0,validateAbortSignal:_0}=Fn,{isIterable:kr,isReadable:Pi,isReadableNodeStream:ho,isNodeStream:gl,isTransformStream:Gr,isWebStream:w0,isReadableStream:Li,isReadableFinished:v0}=gr,E0=globalThis.AbortController||Cn().AbortController;let Ni,Ci,Bi;function bl(e,t,r){let n=!1;e.on("close",()=>{n=!0});const o=mo(e,{readable:t,writable:r},i=>{n=!i});return{destroy:i=>{n||(n=!0,d0.destroyer(e,i||new g0("pipe")))},cleanup:o}}function S0(e){return y0(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function ji(e){if(kr(e))return e;if(ho(e))return R0(e);throw new _s("val",["Readable","Iterable","AsyncIterable"],e)}async function*R0(e){Ci||(Ci=jo()),yield*Ci.prototype[u0].call(e)}async function eo(e,t,r,{end:n}){let o,i=null;const s=u=>{if(u&&(o=u),i){const f=i;i=null,f()}},c=()=>new l0((u,f)=>{o?f(o):i=()=>{o?f(o):u()}});t.on("drain",s);const l=mo(t,{readable:!1},s);try{t.writableNeedDrain&&await c();for await(const u of e)t.write(u)||await c();n&&(t.end(),await c()),r()}catch(u){r(o!==u?h0(o,u):u)}finally{l(),t.off("drain",s)}}async function $i(e,t,r,{end:n}){Gr(t)&&(t=t.writable);const o=t.getWriter();try{for await(const i of e)await o.ready,o.write(i).catch(()=>{});await o.ready,n&&await o.close(),r()}catch(i){try{await o.abort(i),r(i)}catch(s){r(s)}}}function A0(...e){return Fc(e,f0(S0(e)))}function Fc(e,t,r){if(e.length===1&&a0(e[0])&&(e=e[0]),e.length<2)throw new p0("streams");const n=new E0,o=n.signal,i=r==null?void 0:r.signal,s=[];_0(i,"options.signal");function c(){T(new m0)}Bi=Bi||St.addAbortListener;let l;i&&(l=Bi(i,c));let u,f;const h=[];let d=0;function _(P){T(P,--d===0)}function T(P,k){var S;if(P&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=P),!(!u&&!k)){for(;h.length;)h.shift()(u);(S=l)===null||S===void 0||S[c0](),n.abort(),k&&(u||s.forEach($=>$()),Tn.nextTick(t,u,f))}}let R;for(let P=0;P<e.length;P++){const k=e[P],S=P<e.length-1,$=P>0,q=S||(r==null?void 0:r.end)!==!1,re=P===e.length-1;if(gl(k)){let U=function(H){H&&H.name!=="AbortError"&&H.code!=="ERR_STREAM_PREMATURE_CLOSE"&&_(H)};if(q){const{destroy:H,cleanup:ae}=bl(k,S,$);h.push(H),Pi(k)&&re&&s.push(ae)}k.on("error",U),Pi(k)&&re&&s.push(()=>{k.removeListener("error",U)})}if(P===0)if(typeof k=="function"){if(R=k({signal:o}),!kr(R))throw new ki("Iterable, AsyncIterable or Stream","source",R)}else kr(k)||ho(k)||Gr(k)?R=k:R=pl.from(k);else if(typeof k=="function"){if(Gr(R)){var L;R=ji((L=R)===null||L===void 0?void 0:L.readable)}else R=ji(R);if(R=k(R,{signal:o}),S){if(!kr(R,!0))throw new ki("AsyncIterable",`transform[${P-1}]`,R)}else{var V;Ni||(Ni=Mc);const U=new Ni({objectMode:!0}),H=(V=R)===null||V===void 0?void 0:V.then;if(typeof H=="function")d++,H.call(R,g=>{f=g,g!=null&&U.write(g),q&&U.end(),Tn.nextTick(_)},g=>{U.destroy(g),Tn.nextTick(_,g)});else if(kr(R,!0))d++,eo(R,U,_,{end:q});else if(Li(R)||Gr(R)){const g=R.readable||R;d++,eo(g,U,_,{end:q})}else throw new ki("AsyncIterable or Promise","destination",R);R=U;const{destroy:ae,cleanup:ee}=bl(R,!1,!0);h.push(ae),re&&s.push(ee)}}else if(gl(k)){if(ho(R)){d+=2;const U=I0(R,k,_,{end:q});Pi(k)&&re&&s.push(U)}else if(Gr(R)||Li(R)){const U=R.readable||R;d++,eo(U,k,_,{end:q})}else if(kr(R))d++,eo(R,k,_,{end:q});else throw new _s("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);R=k}else if(w0(k)){if(ho(R))d++,$i(ji(R),k,_,{end:q});else if(Li(R)||kr(R))d++,$i(R,k,_,{end:q});else if(Gr(R))d++,$i(R.readable,k,_,{end:q});else throw new _s("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);R=k}else R=pl.from(k)}return(o!=null&&o.aborted||i!=null&&i.aborted)&&Tn.nextTick(c),R}function I0(e,t,r,{end:n}){let o=!1;if(t.on("close",()=>{o||r(new b0)}),e.pipe(t,{end:!1}),n){let i=function(){o=!0,t.end()};v0(e)?Tn.nextTick(i):e.once("end",i)}else r();return mo(e,{readable:!0,writable:!1},i=>{const s=e._readableState;i&&i.code==="ERR_STREAM_PREMATURE_CLOSE"&&s&&s.ended&&!s.errored&&!s.errorEmitted?e.once("end",r).once("error",r):r(i)}),mo(t,{readable:!1,writable:!0},r)}var qs={pipelineImpl:Fc,pipeline:A0};const{pipeline:T0}=qs,to=dr(),{destroyer:O0}=cn,{isNodeStream:ro,isReadable:ml,isWritable:yl,isWebStream:Di,isTransformStream:Or,isWritableStream:_l,isReadableStream:wl}=gr,{AbortError:x0,codes:{ERR_INVALID_ARG_VALUE:vl,ERR_MISSING_ARGS:k0}}=It,P0=Ar;var Uc=function(...e){if(e.length===0)throw new k0("streams");if(e.length===1)return to.from(e[0]);const t=[...e];if(typeof e[0]=="function"&&(e[0]=to.from(e[0])),typeof e[e.length-1]=="function"){const d=e.length-1;e[d]=to.from(e[d])}for(let d=0;d<e.length;++d)if(!(!ro(e[d])&&!Di(e[d]))){if(d<e.length-1&&!(ml(e[d])||wl(e[d])||Or(e[d])))throw new vl(`streams[${d}]`,t[d],"must be readable");if(d>0&&!(yl(e[d])||_l(e[d])||Or(e[d])))throw new vl(`streams[${d}]`,t[d],"must be writable")}let r,n,o,i,s;function c(d){const _=i;i=null,_?_(d):d?s.destroy(d):!h&&!f&&s.destroy()}const l=e[0],u=T0(e,c),f=!!(yl(l)||_l(l)||Or(l)),h=!!(ml(u)||wl(u)||Or(u));if(s=new to({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:f,readable:h}),f){if(ro(l))s._write=function(_,T,R){l.write(_,T)?R():r=R},s._final=function(_){l.end(),n=_},l.on("drain",function(){if(r){const _=r;r=null,_()}});else if(Di(l)){const _=(Or(l)?l.writable:l).getWriter();s._write=async function(T,R,L){try{await _.ready,_.write(T).catch(()=>{}),L()}catch(V){L(V)}},s._final=async function(T){try{await _.ready,_.close().catch(()=>{}),n=T}catch(R){T(R)}}}const d=Or(u)?u.readable:u;P0(d,()=>{if(n){const _=n;n=null,_()}})}if(h){if(ro(u))u.on("readable",function(){if(o){const d=o;o=null,d()}}),u.on("end",function(){s.push(null)}),s._read=function(){for(;;){const d=u.read();if(d===null){o=s._read;return}if(!s.push(d))return}};else if(Di(u)){const d=(Or(u)?u.readable:u).getReader();s._read=async function(){for(;;)try{const{value:_,done:T}=await d.read();if(!s.push(_))return;if(T){s.push(null);return}}catch{return}}}}return s._destroy=function(d,_){!d&&i!==null&&(d=new x0),o=null,r=null,n=null,i===null?_(d):(i=_,ro(u)&&O0(u,d))},s};const L0=globalThis.AbortController||Cn().AbortController,{codes:{ERR_INVALID_ARG_VALUE:N0,ERR_INVALID_ARG_TYPE:Un,ERR_MISSING_ARGS:C0,ERR_OUT_OF_RANGE:B0},AbortError:sr}=It,{validateAbortSignal:Mr,validateInteger:El,validateObject:Fr}=Fn,j0=it.Symbol("kWeak"),$0=it.Symbol("kResistStopPropagation"),{finished:D0}=Ar,M0=Uc,{addAbortSignalNoValidate:F0}=Co,{isWritable:U0,isNodeStream:H0}=gr,{deprecate:z0}=St,{ArrayPrototypePush:W0,Boolean:q0,MathFloor:Sl,Number:V0,NumberIsNaN:G0,Promise:Rl,PromiseReject:Al,PromiseResolve:Z0,PromisePrototypeThen:Il,Symbol:Hc}=it,yo=Hc("kEmpty"),Tl=Hc("kEof");function J0(e,t){if(t!=null&&Fr(t,"options"),(t==null?void 0:t.signal)!=null&&Mr(t.signal,"options.signal"),H0(e)&&!U0(e))throw new N0("stream",e,"must be writable");const r=M0(this,e);return t!=null&&t.signal&&F0(t.signal,r),r}function $o(e,t){if(typeof e!="function")throw new Un("fn",["Function","AsyncFunction"],e);t!=null&&Fr(t,"options"),(t==null?void 0:t.signal)!=null&&Mr(t.signal,"options.signal");let r=1;(t==null?void 0:t.concurrency)!=null&&(r=Sl(t.concurrency));let n=r-1;return(t==null?void 0:t.highWaterMark)!=null&&(n=Sl(t.highWaterMark)),El(r,"options.concurrency",1),El(n,"options.highWaterMark",0),n+=r,(async function*(){const o=St.AbortSignalAny([t==null?void 0:t.signal].filter(q0)),i=this,s=[],c={signal:o};let l,u,f=!1,h=0;function d(){f=!0,_()}function _(){h-=1,T()}function T(){u&&!f&&h<r&&s.length<n&&(u(),u=null)}async function R(){try{for await(let L of i){if(f)return;if(o.aborted)throw new sr;try{if(L=e(L,c),L===yo)continue;L=Z0(L)}catch(V){L=Al(V)}h+=1,Il(L,_,d),s.push(L),l&&(l(),l=null),!f&&(s.length>=n||h>=r)&&await new Rl(V=>{u=V})}s.push(Tl)}catch(L){const V=Al(L);Il(V,_,d),s.push(V)}finally{f=!0,l&&(l(),l=null)}}R();try{for(;;){for(;s.length>0;){const L=await s[0];if(L===Tl)return;if(o.aborted)throw new sr;L!==yo&&(yield L),s.shift(),T()}await new Rl(L=>{l=L})}}finally{f=!0,u&&(u(),u=null)}}).call(this)}function K0(e=void 0){return e!=null&&Fr(e,"options"),(e==null?void 0:e.signal)!=null&&Mr(e.signal,"options.signal"),(async function*(){let t=0;for await(const n of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new sr({cause:e.signal.reason});yield[t++,n]}}).call(this)}async function zc(e,t=void 0){for await(const r of Vs.call(this,e,t))return!0;return!1}async function X0(e,t=void 0){if(typeof e!="function")throw new Un("fn",["Function","AsyncFunction"],e);return!await zc.call(this,async(...r)=>!await e(...r),t)}async function Y0(e,t){for await(const r of Vs.call(this,e,t))return r}async function Q0(e,t){if(typeof e!="function")throw new Un("fn",["Function","AsyncFunction"],e);async function r(n,o){return await e(n,o),yo}for await(const n of $o.call(this,r,t));}function Vs(e,t){if(typeof e!="function")throw new Un("fn",["Function","AsyncFunction"],e);async function r(n,o){return await e(n,o)?n:yo}return $o.call(this,r,t)}class eb extends C0{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function tb(e,t,r){var n;if(typeof e!="function")throw new Un("reducer",["Function","AsyncFunction"],e);r!=null&&Fr(r,"options"),(r==null?void 0:r.signal)!=null&&Mr(r.signal,"options.signal");let o=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const u=new sr(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await D0(this.destroy(u)),u}const i=new L0,s=i.signal;if(r!=null&&r.signal){const u={once:!0,[j0]:this,[$0]:!0};r.signal.addEventListener("abort",()=>i.abort(),u)}let c=!1;try{for await(const u of this){var l;if(c=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new sr;o?t=await e(t,u,{signal:s}):(t=u,o=!0)}if(!c&&!o)throw new eb}finally{i.abort()}return t}async function rb(e){e!=null&&Fr(e,"options"),(e==null?void 0:e.signal)!=null&&Mr(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new sr(void 0,{cause:e.signal.reason});W0(t,n)}return t}function nb(e,t){const r=$o.call(this,e,t);return(async function*(){for await(const n of r)yield*n}).call(this)}function Wc(e){if(e=V0(e),G0(e))return 0;if(e<0)throw new B0("number",">= 0",e);return e}function ob(e,t=void 0){return t!=null&&Fr(t,"options"),(t==null?void 0:t.signal)!=null&&Mr(t.signal,"options.signal"),e=Wc(e),(async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new sr;for await(const o of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new sr;e--<=0&&(yield o)}}).call(this)}function ib(e,t=void 0){return t!=null&&Fr(t,"options"),(t==null?void 0:t.signal)!=null&&Mr(t.signal,"options.signal"),e=Wc(e),(async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new sr;for await(const o of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new sr;if(e-- >0&&(yield o),e<=0)return}}).call(this)}js.streamReturningOperators={asIndexedPairs:z0(K0,"readable.asIndexedPairs will be removed in a future version."),drop:ob,filter:Vs,flatMap:nb,map:$o,take:ib,compose:J0};js.promiseReturningOperators={every:X0,forEach:Q0,reduce:tb,toArray:rb,some:zc,find:Y0};var Mi,Ol;function qc(){if(Ol)return Mi;Ol=1;const{ArrayPrototypePop:e,Promise:t}=it,{isIterable:r,isNodeStream:n,isWebStream:o}=gr,{pipelineImpl:i}=qs,{finished:s}=Ar;Vc();function c(...l){return new t((u,f)=>{let h,d;const _=l[l.length-1];if(_&&typeof _=="object"&&!n(_)&&!r(_)&&!o(_)){const T=e(l);h=T.signal,d=T.end}i(l,(T,R)=>{T?f(T):u(R)},{signal:h,end:d})})}return Mi={finished:s,pipeline:c},Mi}var xl;function Vc(){if(xl)return Ei.exports;xl=1;const{Buffer:e}=ir,{ObjectDefineProperty:t,ObjectKeys:r,ReflectApply:n}=it,{promisify:{custom:o}}=St,{streamReturningOperators:i,promiseReturningOperators:s}=js,{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=It,l=Uc,{setDefaultHighWaterMark:u,getDefaultHighWaterMark:f}=Bo,{pipeline:h}=qs,{destroyer:d}=cn,_=Ar,T=qc(),R=gr,L=Ei.exports=Us.Stream;L.isDestroyed=R.isDestroyed,L.isDisturbed=R.isDisturbed,L.isErrored=R.isErrored,L.isReadable=R.isReadable,L.isWritable=R.isWritable,L.Readable=jo();for(const P of r(i)){let k=function(...$){if(new.target)throw c();return L.Readable.from(n(S,this,$))};const S=i[P];t(k,"name",{__proto__:null,value:S.name}),t(k,"length",{__proto__:null,value:S.length}),t(L.Readable.prototype,P,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const P of r(s)){let k=function(...$){if(new.target)throw c();return n(S,this,$)};const S=s[P];t(k,"name",{__proto__:null,value:S.name}),t(k,"length",{__proto__:null,value:S.length}),t(L.Readable.prototype,P,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}L.Writable=Hs(),L.Duplex=dr(),L.Transform=$c,L.PassThrough=Mc,L.pipeline=h;const{addAbortSignal:V}=Co;return L.addAbortSignal=V,L.finished=_,L.destroy=d,L.compose=l,L.setDefaultHighWaterMark=u,L.getDefaultHighWaterMark=f,t(L,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return T}}),t(h,o,{__proto__:null,enumerable:!0,get(){return T.pipeline}}),t(_,o,{__proto__:null,enumerable:!0,get(){return T.finished}}),L.Stream=L,L._isUint8Array=function(P){return P instanceof Uint8Array},L._uint8ArrayToBuffer=function(P){return e.from(P.buffer,P.byteOffset,P.byteLength)},Ei.exports}(function(e){const t=Vc(),r=qc(),n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return r}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(Yh);var sb={},Br={},Gs={},gt={};class Gc extends TypeError{constructor(t,r){let n;const{message:o,explanation:i,...s}=t,{path:c}=t,l=c.length===0?o:`At path: ${c.join(".")} -- ${o}`;super(i??l),i!=null&&(this.cause=l),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...r()])}}function ab(e){return Ft(e)&&typeof e[Symbol.iterator]=="function"}function Ft(e){return typeof e=="object"&&e!=null}function kl(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function ct(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function lb(e){const{done:t,value:r}=e.next();return t?void 0:r}function ub(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:o,branch:i}=t,{type:s}=r,{refinement:c,message:l=`Expected a value of type \`${s}\`${c?` with refinement \`${c}\``:""}, but received: \`${ct(n)}\``}=e;return{value:n,type:s,refinement:c,key:o[o.length-1],path:o,branch:i,...e,message:l}}function*ws(e,t,r,n){ab(e)||(e=[e]);for(const o of e){const i=ub(o,t,r,n);i&&(yield i)}}function*Zs(e,t,r={}){const{path:n=[],branch:o=[e],coerce:i=!1,mask:s=!1}=r,c={path:n,branch:o};if(i&&(e=t.coercer(e,c),s&&t.type!=="type"&&Ft(t.schema)&&Ft(e)&&!Array.isArray(e)))for(const u in e)t.schema[u]===void 0&&delete e[u];let l="valid";for(const u of t.validator(e,c))u.explanation=r.message,l="not_valid",yield[u,void 0];for(let[u,f,h]of t.entries(e,c)){const d=Zs(f,h,{path:u===void 0?n:[...n,u],branch:u===void 0?o:[...o,f],coerce:i,mask:s,message:r.message});for(const _ of d)_[0]?(l=_[0].refinement!=null?"not_refined":"not_valid",yield[_[0],void 0]):i&&(f=_[1],u===void 0?e=f:e instanceof Map?e.set(u,f):e instanceof Set?e.add(f):Ft(e)&&(f!==void 0||u in e)&&(e[u]=f))}if(l!=="not_valid")for(const u of t.refiner(e,c))u.explanation=r.message,l="not_refined",yield[u,void 0];l==="valid"&&(yield[void 0,e])}class lt{constructor(t){const{type:r,schema:n,validator:o,refiner:i,coercer:s=l=>l,entries:c=function*(){}}=t;this.type=r,this.schema=n,this.entries=c,this.coercer=s,o?this.validator=(l,u)=>{const f=o(l,u);return ws(f,u,this,l)}:this.validator=()=>[],i?this.refiner=(l,u)=>{const f=i(l,u);return ws(f,u,this,l)}:this.refiner=()=>[]}assert(t,r){return Zc(t,this,r)}create(t,r){return Jc(t,this,r)}is(t){return Js(t,this)}mask(t,r){return Kc(t,this,r)}validate(t,r={}){return fn(t,this,r)}}function Zc(e,t,r){const n=fn(e,t,{message:r});if(n[0])throw n[0]}function Jc(e,t,r){const n=fn(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function Kc(e,t,r){const n=fn(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function Js(e,t){return!fn(e,t)[0]}function fn(e,t,r={}){const n=Zs(e,t,r),o=lb(n);return o[0]?[new Gc(o[0],function*(){for(const i of n)i[0]&&(yield i[0])}),void 0]:[void 0,o[1]]}function cb(...e){const t=e[0].type==="type",r=e.map(o=>o.schema),n=Object.assign({},...r);return t?zn(n):Hn(n)}function Tt(e,t){return new lt({type:e,schema:null,validator:t})}function fb(e,t){return new lt({...e,refiner:(r,n)=>r===void 0||e.refiner(r,n),validator(r,n){return r===void 0?!0:(t(r,n),e.validator(r,n))}})}function db(e){return new lt({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator(t,r){return e(t,r).validator(t,r)},coercer(t,r){return e(t,r).coercer(t,r)},refiner(t,r){return e(t,r).refiner(t,r)}})}function hb(e){let t;return new lt({type:"lazy",schema:null,*entries(r,n){t??(t=e()),yield*t.entries(r,n)},validator(r,n){return t??(t=e()),t.validator(r,n)},coercer(r,n){return t??(t=e()),t.coercer(r,n)},refiner(r,n){return t??(t=e()),t.refiner(r,n)}})}function pb(e,t){const{schema:r}=e,n={...r};for(const o of t)delete n[o];switch(e.type){case"type":return zn(n);default:return Hn(n)}}function gb(e){const t=e instanceof lt,r=t?{...e.schema}:{...e};for(const n in r)r[n]=Xc(r[n]);return t&&e.type==="type"?zn(r):Hn(r)}function bb(e,t){const{schema:r}=e,n={};for(const o of t)n[o]=r[o];switch(e.type){case"type":return zn(n);default:return Hn(n)}}function mb(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),Tt(e,t)}function yb(){return Tt("any",()=>!0)}function _b(e){return new lt({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${ct(t)}`}})}function wb(){return Tt("bigint",e=>typeof e=="bigint")}function vb(){return Tt("boolean",e=>typeof e=="boolean")}function Eb(){return Tt("date",e=>e instanceof Date&&!isNaN(e.getTime())||`Expected a valid \`Date\` object, but received: ${ct(e)}`)}function Sb(e){const t={},r=e.map(n=>ct(n)).join();for(const n of e)t[n]=n;return new lt({type:"enums",schema:t,validator(n){return e.includes(n)||`Expected one of \`${r}\`, but received: ${ct(n)}`}})}function Rb(){return Tt("func",e=>typeof e=="function"||`Expected a function, but received: ${ct(e)}`)}function Ab(e){return Tt("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${ct(t)}`)}function Ib(){return Tt("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${ct(e)}`)}function Tb(e){return new lt({type:"intersection",schema:null,*entries(t,r){for(const n of e)yield*n.entries(t,r)},*validator(t,r){for(const n of e)yield*n.validator(t,r)},*refiner(t,r){for(const n of e)yield*n.refiner(t,r)}})}function Ob(e){const t=ct(e),r=typeof e;return new lt({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||`Expected the literal \`${t}\`, but received: ${ct(n)}`}})}function xb(e,t){return new lt({type:"map",schema:null,*entries(r){if(e&&t&&r instanceof Map)for(const[n,o]of r.entries())yield[n,n,e],yield[n,o,t]},coercer(r){return r instanceof Map?new Map(r):r},validator(r){return r instanceof Map||`Expected a \`Map\` object, but received: ${ct(r)}`}})}function Ks(){return Tt("never",()=>!1)}function kb(e){return new lt({...e,validator:(t,r)=>t===null||e.validator(t,r),refiner:(t,r)=>t===null||e.refiner(t,r)})}function Pb(){return Tt("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${ct(e)}`)}function Hn(e){const t=e?Object.keys(e):[],r=Ks();return new lt({type:"object",schema:e||null,*entries(n){if(e&&Ft(n)){const o=new Set(Object.keys(n));for(const i of t)o.delete(i),yield[i,n[i],e[i]];for(const i of o)yield[i,n[i],r]}},validator(n){return Ft(n)||`Expected an object, but received: ${ct(n)}`},coercer(n){return Ft(n)?{...n}:n}})}function Xc(e){return new lt({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function Lb(e,t){return new lt({type:"record",schema:null,*entries(r){if(Ft(r))for(const n in r){const o=r[n];yield[n,n,e],yield[n,o,t]}},validator(r){return Ft(r)||`Expected an object, but received: ${ct(r)}`}})}function Nb(){return Tt("regexp",e=>e instanceof RegExp)}function Cb(e){return new lt({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(const r of t)yield[r,r,e]},coercer(t){return t instanceof Set?new Set(t):t},validator(t){return t instanceof Set||`Expected a \`Set\` object, but received: ${ct(t)}`}})}function Yc(){return Tt("string",e=>typeof e=="string"||`Expected a string, but received: ${ct(e)}`)}function Bb(e){const t=Ks();return new lt({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let o=0;o<n;o++)yield[o,r[o],e[o]||t]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${ct(r)}`}})}function zn(e){const t=Object.keys(e);return new lt({type:"type",schema:e,*entries(r){if(Ft(r))for(const n of t)yield[n,r[n],e[n]]},validator(r){return Ft(r)||`Expected an object, but received: ${ct(r)}`},coercer(r){return Ft(r)?{...r}:r}})}function jb(e){const t=e.map(r=>r.type).join(" | ");return new lt({type:"union",schema:null,coercer(r){for(const n of e){const[o,i]=n.validate(r,{coerce:!0});if(!o)return i}return r},validator(r,n){const o=[];for(const i of e){const[...s]=Zs(r,i,n),[c]=s;if(c[0])for(const[l]of s)l&&o.push(l);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${ct(r)}`,...o]}})}function Qc(){return Tt("unknown",()=>!0)}function Xs(e,t,r){return new lt({...e,coercer:(n,o)=>Js(n,t)?e.coercer(r(n,o),o):e.coercer(n,o)})}function $b(e,t,r={}){return Xs(e,Qc(),n=>{const o=typeof t=="function"?t():t;if(n===void 0)return o;if(!r.strict&&kl(n)&&kl(o)){const i={...n};let s=!1;for(const c in o)i[c]===void 0&&(i[c]=o[c],s=!0);if(s)return i}return n})}function Db(e){return Xs(e,Yc(),t=>t.trim())}function Mb(e){return Ur(e,"empty",t=>{const r=ef(t);return r===0||`Expected an empty ${e.type} but received one with a size of \`${r}\``})}function ef(e){return e instanceof Map||e instanceof Set?e.size:e.length}function Fb(e,t,r={}){const{exclusive:n}=r;return Ur(e,"max",o=>n?o<t:o<=t||`Expected a ${e.type} less than ${n?"":"or equal to "}${t} but received \`${o}\``)}function Ub(e,t,r={}){const{exclusive:n}=r;return Ur(e,"min",o=>n?o>t:o>=t||`Expected a ${e.type} greater than ${n?"":"or equal to "}${t} but received \`${o}\``)}function Hb(e){return Ur(e,"nonempty",t=>ef(t)>0||`Expected a nonempty ${e.type} but received an empty one`)}function zb(e,t){return Ur(e,"pattern",r=>t.test(r)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${r}"`)}function Wb(e,t,r=t){const n=`Expected a ${e.type}`,o=t===r?`of \`${t}\``:`between \`${t}\` and \`${r}\``;return Ur(e,"size",i=>{if(typeof i=="number"||i instanceof Date)return t<=i&&i<=r||`${n} ${o} but received \`${i}\``;if(i instanceof Map||i instanceof Set){const{size:s}=i;return t<=s&&s<=r||`${n} with a size ${o} but received one with a size of \`${s}\``}else{const{length:s}=i;return t<=s&&s<=r||`${n} with a length ${o} but received one with a length of \`${s}\``}})}function Ur(e,t,r){return new lt({...e,*refiner(n,o){yield*e.refiner(n,o);const i=r(n,o),s=ws(i,o,e,n);for(const c of s)yield{...c,refinement:t}}})}const qb=Object.freeze(Object.defineProperty({__proto__:null,Struct:lt,StructError:Gc,any:yb,array:_b,assert:Zc,assign:cb,bigint:wb,boolean:vb,coerce:Xs,create:Jc,date:Eb,defaulted:$b,define:Tt,deprecated:fb,dynamic:db,empty:Mb,enums:Sb,func:Rb,instance:Ab,integer:Ib,intersection:Tb,is:Js,lazy:hb,literal:Ob,map:xb,mask:Kc,max:Fb,min:Ub,never:Ks,nonempty:Hb,nullable:kb,number:Pb,object:Hn,omit:pb,optional:Xc,partial:gb,pattern:zb,pick:bb,record:Lb,refine:Ur,regexp:Nb,set:Cb,size:Wb,string:Yc,struct:mb,trimmed:Db,tuple:Bb,type:zn,union:jb,unknown:Qc,validate:fn},Symbol.toStringTag,{value:"Module"})),Hr=Nh(qb);Object.defineProperty(gt,"__esModule",{value:!0});gt.assertExhaustive=gt.assertStruct=gt.assert=gt.AssertionError=void 0;const Vb=Hr;function Gb(e){return typeof e=="object"&&e!==null&&"message"in e}function Zb(e){var t,r;return typeof((r=(t=e==null?void 0:e.prototype)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.name)=="string"}function Jb(e){const t=Gb(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}function tf(e,t){return Zb(e)?new e({message:t}):e({message:t})}class Ys extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}}gt.AssertionError=Ys;function Kb(e,t="Assertion failed.",r=Ys){if(!e)throw t instanceof Error?t:tf(r,t)}gt.assert=Kb;function Xb(e,t,r="Assertion failed",n=Ys){try{(0,Vb.assert)(e,t)}catch(o){throw tf(n,`${r}: ${Jb(o)}.`)}}gt.assertStruct=Xb;function Yb(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}gt.assertExhaustive=Yb;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.base64=void 0;const Qb=Hr,em=gt,tm=(e,t={})=>{var r,n;const o=(r=t.paddingRequired)!==null&&r!==void 0?r:!1,i=(n=t.characterSet)!==null&&n!==void 0?n:"base64";let s;i==="base64"?s=String.raw`[A-Za-z0-9+\/]`:((0,em.assert)(i==="base64url"),s=String.raw`[-_A-Za-z0-9]`);let c;return o?c=new RegExp(`^(?:${s}{4})*(?:${s}{3}=|${s}{2}==)?$`,"u"):c=new RegExp(`^(?:${s}{4})*(?:${s}{2,3}|${s}{3}=|${s}{2}==)?$`,"u"),(0,Qb.pattern)(e,c)};Wn.base64=tm;var De={},qn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.remove0x=e.add0x=e.assertIsStrictHexString=e.assertIsHexString=e.isStrictHexString=e.isHexString=e.StrictHexStruct=e.HexStruct=void 0;const t=Hr,r=gt;e.HexStruct=(0,t.pattern)((0,t.string)(),/^(?:0x)?[0-9a-f]+$/iu),e.StrictHexStruct=(0,t.pattern)((0,t.string)(),/^0x[0-9a-f]+$/iu);function n(u){return(0,t.is)(u,e.HexStruct)}e.isHexString=n;function o(u){return(0,t.is)(u,e.StrictHexStruct)}e.isStrictHexString=o;function i(u){(0,r.assert)(n(u),"Value must be a hexadecimal string.")}e.assertIsHexString=i;function s(u){(0,r.assert)(o(u),'Value must be a hexadecimal string, starting with "0x".')}e.assertIsStrictHexString=s;function c(u){return u.startsWith("0x")?u:u.startsWith("0X")?`0x${u.substring(2)}`:`0x${u}`}e.add0x=c;function l(u){return u.startsWith("0x")||u.startsWith("0X")?u.substring(2):u}e.remove0x=l})(qn);Object.defineProperty(De,"__esModule",{value:!0});De.createDataView=De.concatBytes=De.valueToBytes=De.stringToBytes=De.numberToBytes=De.signedBigIntToBytes=De.bigIntToBytes=De.hexToBytes=De.bytesToString=De.bytesToNumber=De.bytesToSignedBigInt=De.bytesToBigInt=De.bytesToHex=De.assertIsBytes=De.isBytes=void 0;const Lt=gt,vs=qn,Pl=48,Ll=58,Nl=87;function rm(){const e=[];return()=>{if(e.length===0)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}const nm=rm();function Qs(e){return e instanceof Uint8Array}De.isBytes=Qs;function dn(e){(0,Lt.assert)(Qs(e),"Value must be a Uint8Array.")}De.assertIsBytes=dn;function rf(e){if(dn(e),e.length===0)return"0x";const t=nm(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,vs.add0x)(r.join(""))}De.bytesToHex=rf;function nf(e){dn(e);const t=rf(e);return BigInt(t)}De.bytesToBigInt=nf;function om(e){dn(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(e.length*8,t)}De.bytesToSignedBigInt=om;function im(e){dn(e);const t=nf(e);return(0,Lt.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)}De.bytesToNumber=im;function sm(e){return dn(e),new TextDecoder().decode(e)}De.bytesToString=sm;function Do(e){var t;if(((t=e==null?void 0:e.toLowerCase)===null||t===void 0?void 0:t.call(e))==="0x")return new Uint8Array;(0,vs.assertIsHexString)(e);const r=(0,vs.remove0x)(e).toLowerCase(),n=r.length%2===0?r:`0${r}`,o=new Uint8Array(n.length/2);for(let i=0;i<o.length;i++){const s=n.charCodeAt(i*2),c=n.charCodeAt(i*2+1),l=s-(s<Ll?Pl:Nl),u=c-(c<Ll?Pl:Nl);o[i]=l*16+u}return o}De.hexToBytes=Do;function of(e){(0,Lt.assert)(typeof e=="bigint","Value must be a bigint."),(0,Lt.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");const t=e.toString(16);return Do(t)}De.bigIntToBytes=of;function am(e,t){(0,Lt.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(t*8+-1))}function lm(e,t){(0,Lt.assert)(typeof e=="bigint","Value must be a bigint."),(0,Lt.assert)(typeof t=="number","Byte length must be a number."),(0,Lt.assert)(t>0,"Byte length must be greater than 0."),(0,Lt.assert)(am(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let o=0;o<n.length;o++)n[o]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()}De.signedBigIntToBytes=lm;function sf(e){(0,Lt.assert)(typeof e=="number","Value must be a number."),(0,Lt.assert)(e>=0,"Value must be a non-negative number."),(0,Lt.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");const t=e.toString(16);return Do(t)}De.numberToBytes=sf;function af(e){return(0,Lt.assert)(typeof e=="string","Value must be a string."),new TextEncoder().encode(e)}De.stringToBytes=af;function lf(e){if(typeof e=="bigint")return of(e);if(typeof e=="number")return sf(e);if(typeof e=="string")return e.startsWith("0x")?Do(e):af(e);if(Qs(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}De.valueToBytes=lf;function um(e){const t=new Array(e.length);let r=0;for(let o=0;o<e.length;o++){const i=lf(e[o]);t[o]=i,r+=i.length}const n=new Uint8Array(r);for(let o=0,i=0;o<t.length;o++)n.set(t[o],i),i+=t[o].length;return n}De.concatBytes=um;function cm(e){if(typeof me.Buffer<"u"&&e instanceof me.Buffer){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}De.createDataView=cm;var Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.ChecksumStruct=void 0;const Cl=Hr,fm=Wn;Mo.ChecksumStruct=(0,Cl.size)((0,fm.base64)((0,Cl.string)(),{paddingRequired:!0}),44,44);var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.createHex=Qt.createBytes=Qt.createBigInt=Qt.createNumber=void 0;const nt=Hr,dm=gt,uf=De,Fo=qn,cf=(0,nt.union)([(0,nt.number)(),(0,nt.bigint)(),(0,nt.string)(),Fo.StrictHexStruct]),hm=(0,nt.coerce)((0,nt.number)(),cf,Number),pm=(0,nt.coerce)((0,nt.bigint)(),cf,BigInt);(0,nt.union)([Fo.StrictHexStruct,(0,nt.instance)(Uint8Array)]);const gm=(0,nt.coerce)((0,nt.instance)(Uint8Array),(0,nt.union)([Fo.StrictHexStruct]),uf.hexToBytes),bm=(0,nt.coerce)(Fo.StrictHexStruct,(0,nt.instance)(Uint8Array),uf.bytesToHex);function mm(e){try{const t=(0,nt.create)(e,hm);return(0,dm.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){throw t instanceof nt.StructError?new Error(`Expected a number-like value, got "${e}".`):t}}Qt.createNumber=mm;function ym(e){try{return(0,nt.create)(e,pm)}catch(t){throw t instanceof nt.StructError?new Error(`Expected a number-like value, got "${String(t.value)}".`):t}}Qt.createBigInt=ym;function _m(e){if(typeof e=="string"&&e.toLowerCase()==="0x")return new Uint8Array;try{return(0,nt.create)(e,gm)}catch(t){throw t instanceof nt.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}Qt.createBytes=_m;function wm(e){if(e instanceof Uint8Array&&e.length===0||typeof e=="string"&&e.toLowerCase()==="0x")return"0x";try{return(0,nt.create)(e,bm)}catch(t){throw t instanceof nt.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}Qt.createHex=wm;var en={},ff=rt&&rt.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Et=rt&&rt.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Wt,Kt;Object.defineProperty(en,"__esModule",{value:!0});en.FrozenSet=en.FrozenMap=void 0;class ea{constructor(t){Wt.set(this,void 0),ff(this,Wt,new Map(t),"f"),Object.freeze(this)}get size(){return Et(this,Wt,"f").size}[(Wt=new WeakMap,Symbol.iterator)](){return Et(this,Wt,"f")[Symbol.iterator]()}entries(){return Et(this,Wt,"f").entries()}forEach(t,r){return Et(this,Wt,"f").forEach((n,o,i)=>t.call(r,n,o,this))}get(t){return Et(this,Wt,"f").get(t)}has(t){return Et(this,Wt,"f").has(t)}keys(){return Et(this,Wt,"f").keys()}values(){return Et(this,Wt,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([t,r])=>`${String(t)} => ${String(r)}`).join(", ")} `:""}}`}}en.FrozenMap=ea;class ta{constructor(t){Kt.set(this,void 0),ff(this,Kt,new Set(t),"f"),Object.freeze(this)}get size(){return Et(this,Kt,"f").size}[(Kt=new WeakMap,Symbol.iterator)](){return Et(this,Kt,"f")[Symbol.iterator]()}entries(){return Et(this,Kt,"f").entries()}forEach(t,r){return Et(this,Kt,"f").forEach((n,o,i)=>t.call(r,n,o,this))}has(t){return Et(this,Kt,"f").has(t)}keys(){return Et(this,Kt,"f").keys()}values(){return Et(this,Kt,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(t=>String(t)).join(", ")} `:""}}`}}en.FrozenSet=ta;Object.freeze(ea);Object.freeze(ea.prototype);Object.freeze(ta);Object.freeze(ta.prototype);var df={};Object.defineProperty(df,"__esModule",{value:!0});var hf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getJsonRpcIdValidator=e.assertIsJsonRpcError=e.isJsonRpcError=e.assertIsJsonRpcFailure=e.isJsonRpcFailure=e.assertIsJsonRpcSuccess=e.isJsonRpcSuccess=e.assertIsJsonRpcResponse=e.isJsonRpcResponse=e.assertIsPendingJsonRpcResponse=e.isPendingJsonRpcResponse=e.JsonRpcResponseStruct=e.JsonRpcFailureStruct=e.JsonRpcSuccessStruct=e.PendingJsonRpcResponseStruct=e.assertIsJsonRpcRequest=e.isJsonRpcRequest=e.assertIsJsonRpcNotification=e.isJsonRpcNotification=e.JsonRpcNotificationStruct=e.JsonRpcRequestStruct=e.JsonRpcParamsStruct=e.JsonRpcErrorStruct=e.JsonRpcIdStruct=e.JsonRpcVersionStruct=e.jsonrpc2=e.getJsonSize=e.isValidJson=e.JsonStruct=e.UnsafeJsonStruct=void 0;const t=Hr,r=gt,n=()=>(0,t.define)("finite number",$=>(0,t.is)($,(0,t.number)())&&Number.isFinite($));e.UnsafeJsonStruct=(0,t.union)([(0,t.literal)(null),(0,t.boolean)(),n(),(0,t.string)(),(0,t.array)((0,t.lazy)(()=>e.UnsafeJsonStruct)),(0,t.record)((0,t.string)(),(0,t.lazy)(()=>e.UnsafeJsonStruct))]),e.JsonStruct=(0,t.define)("Json",($,q)=>{function re(U,H){const ae=[...H.validator(U,q)];return ae.length>0?ae:!0}try{const U=re($,e.UnsafeJsonStruct);return U!==!0?U:re(JSON.parse(JSON.stringify($)),e.UnsafeJsonStruct)}catch(U){return U instanceof RangeError?"Circular reference detected":!1}});function o($){return(0,t.is)($,e.JsonStruct)}e.isValidJson=o;function i($){(0,r.assertStruct)($,e.JsonStruct,"Invalid JSON value");const q=JSON.stringify($);return new TextEncoder().encode(q).byteLength}e.getJsonSize=i,e.jsonrpc2="2.0",e.JsonRpcVersionStruct=(0,t.literal)(e.jsonrpc2),e.JsonRpcIdStruct=(0,t.nullable)((0,t.union)([(0,t.number)(),(0,t.string)()])),e.JsonRpcErrorStruct=(0,t.object)({code:(0,t.integer)(),message:(0,t.string)(),data:(0,t.optional)(e.JsonStruct),stack:(0,t.optional)((0,t.string)())}),e.JsonRpcParamsStruct=(0,t.optional)((0,t.union)([(0,t.record)((0,t.string)(),e.JsonStruct),(0,t.array)(e.JsonStruct)])),e.JsonRpcRequestStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,method:(0,t.string)(),params:e.JsonRpcParamsStruct}),e.JsonRpcNotificationStruct=(0,t.omit)(e.JsonRpcRequestStruct,["id"]);function s($){return(0,t.is)($,e.JsonRpcNotificationStruct)}e.isJsonRpcNotification=s;function c($,q){(0,r.assertStruct)($,e.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",q)}e.assertIsJsonRpcNotification=c;function l($){return(0,t.is)($,e.JsonRpcRequestStruct)}e.isJsonRpcRequest=l;function u($,q){(0,r.assertStruct)($,e.JsonRpcRequestStruct,"Invalid JSON-RPC request",q)}e.assertIsJsonRpcRequest=u,e.PendingJsonRpcResponseStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:(0,t.optional)((0,t.unknown)()),error:(0,t.optional)(e.JsonRpcErrorStruct)}),e.JsonRpcSuccessStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:e.JsonStruct}),e.JsonRpcFailureStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,error:e.JsonRpcErrorStruct}),e.JsonRpcResponseStruct=(0,t.union)([e.JsonRpcSuccessStruct,e.JsonRpcFailureStruct]);function f($){return(0,t.is)($,e.PendingJsonRpcResponseStruct)}e.isPendingJsonRpcResponse=f;function h($,q){(0,r.assertStruct)($,e.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",q)}e.assertIsPendingJsonRpcResponse=h;function d($){return(0,t.is)($,e.JsonRpcResponseStruct)}e.isJsonRpcResponse=d;function _($,q){(0,r.assertStruct)($,e.JsonRpcResponseStruct,"Invalid JSON-RPC response",q)}e.assertIsJsonRpcResponse=_;function T($){return(0,t.is)($,e.JsonRpcSuccessStruct)}e.isJsonRpcSuccess=T;function R($,q){(0,r.assertStruct)($,e.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",q)}e.assertIsJsonRpcSuccess=R;function L($){return(0,t.is)($,e.JsonRpcFailureStruct)}e.isJsonRpcFailure=L;function V($,q){(0,r.assertStruct)($,e.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",q)}e.assertIsJsonRpcFailure=V;function P($){return(0,t.is)($,e.JsonRpcErrorStruct)}e.isJsonRpcError=P;function k($,q){(0,r.assertStruct)($,e.JsonRpcErrorStruct,"Invalid JSON-RPC error",q)}e.assertIsJsonRpcError=k;function S($){const{permitEmptyString:q,permitFractions:re,permitNull:U}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},$);return H=>!!(typeof H=="number"&&(re||Number.isInteger(H))||typeof H=="string"&&(q||H.length>0)||U&&H===null)}e.getJsonRpcIdValidator=S})(hf);var pf={};Object.defineProperty(pf,"__esModule",{value:!0});var tn={},vm=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tn,"__esModule",{value:!0});tn.createModuleLogger=tn.createProjectLogger=void 0;const Em=vm(qh),Sm=(0,Em.default)("metamask");function Rm(e){return Sm.extend(e)}tn.createProjectLogger=Rm;function Am(e,t){return e.extend(t)}tn.createModuleLogger=Am;var gf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateNumberSize=e.calculateStringSize=e.isASCII=e.isPlainObject=e.ESCAPE_CHARACTERS_REGEXP=e.JsonSize=e.hasProperty=e.isObject=e.isNullOrUndefined=e.isNonEmptyArray=void 0;function t(u){return Array.isArray(u)&&u.length>0}e.isNonEmptyArray=t;function r(u){return u==null}e.isNullOrUndefined=r;function n(u){return!!u&&typeof u=="object"&&!Array.isArray(u)}e.isObject=n;const o=(u,f)=>Object.hasOwnProperty.call(u,f);e.hasProperty=o,function(u){u[u.Null=4]="Null",u[u.Comma=1]="Comma",u[u.Wrapper=1]="Wrapper",u[u.True=4]="True",u[u.False=5]="False",u[u.Quote=1]="Quote",u[u.Colon=1]="Colon",u[u.Date=24]="Date"}(e.JsonSize||(e.JsonSize={})),e.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function i(u){if(typeof u!="object"||u===null)return!1;try{let f=u;for(;Object.getPrototypeOf(f)!==null;)f=Object.getPrototypeOf(f);return Object.getPrototypeOf(u)===f}catch{return!1}}e.isPlainObject=i;function s(u){return u.charCodeAt(0)<=127}e.isASCII=s;function c(u){var f;return u.split("").reduce((h,d)=>s(d)?h+1:h+2,0)+((f=u.match(e.ESCAPE_CHARACTERS_REGEXP))!==null&&f!==void 0?f:[]).length}e.calculateStringSize=c;function l(u){return u.toString().length}e.calculateNumberSize=l})(gf);var er={};Object.defineProperty(er,"__esModule",{value:!0});er.hexToBigInt=er.hexToNumber=er.bigIntToHex=er.numberToHex=void 0;const Xr=gt,Bn=qn,Im=e=>((0,Xr.assert)(typeof e=="number","Value must be a number."),(0,Xr.assert)(e>=0,"Value must be a non-negative number."),(0,Xr.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,Bn.add0x)(e.toString(16)));er.numberToHex=Im;const Tm=e=>((0,Xr.assert)(typeof e=="bigint","Value must be a bigint."),(0,Xr.assert)(e>=0,"Value must be a non-negative bigint."),(0,Bn.add0x)(e.toString(16)));er.bigIntToHex=Tm;const Om=e=>{(0,Bn.assertIsHexString)(e);const t=parseInt(e,16);return(0,Xr.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};er.hexToNumber=Om;const xm=e=>((0,Bn.assertIsHexString)(e),BigInt((0,Bn.add0x)(e)));er.hexToBigInt=xm;var bf={};Object.defineProperty(bf,"__esModule",{value:!0});var mf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeSince=e.inMilliseconds=e.Duration=void 0,function(i){i[i.Millisecond=1]="Millisecond",i[i.Second=1e3]="Second",i[i.Minute=6e4]="Minute",i[i.Hour=36e5]="Hour",i[i.Day=864e5]="Day",i[i.Week=6048e5]="Week",i[i.Year=31536e6]="Year"}(e.Duration||(e.Duration={}));const t=i=>Number.isInteger(i)&&i>=0,r=(i,s)=>{if(!t(i))throw new Error(`"${s}" must be a non-negative integer. Received: "${i}".`)};function n(i,s){return r(i,"count"),i*s}e.inMilliseconds=n;function o(i){return r(i,"timestamp"),Date.now()-i}e.timeSince=o})(mf);var yf={};Object.defineProperty(yf,"__esModule",{value:!0});var _f={},Es={exports:{}};const km="2.0.0",wf=256,Pm=Number.MAX_SAFE_INTEGER||9007199254740991,Lm=16,Nm=wf-6,Cm=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Uo={MAX_LENGTH:wf,MAX_SAFE_COMPONENT_LENGTH:Lm,MAX_SAFE_BUILD_LENGTH:Nm,MAX_SAFE_INTEGER:Pm,RELEASE_TYPES:Cm,SEMVER_SPEC_VERSION:km,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Bm=typeof me.process=="object"&&me.process.env&&me.process.env.NODE_DEBUG&&/\bsemver\b/i.test(me.process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Ho=Bm;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:o}=Uo,i=Ho;t=e.exports={};const s=t.re=[],c=t.safeRe=[],l=t.src=[],u=t.t={};let f=0;const h="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",o],[h,n]],_=R=>{for(const[L,V]of d)R=R.split(`${L}*`).join(`${L}{0,${V}}`).split(`${L}+`).join(`${L}{1,${V}}`);return R},T=(R,L,V)=>{const P=_(L),k=f++;i(R,k,L),u[R]=k,l[k]=L,s[k]=new RegExp(L,V?"g":void 0),c[k]=new RegExp(P,V?"g":void 0)};T("NUMERICIDENTIFIER","0|[1-9]\\d*"),T("NUMERICIDENTIFIERLOOSE","\\d+"),T("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),T("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),T("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),T("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),T("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),T("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),T("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),T("BUILDIDENTIFIER",`${h}+`),T("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),T("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),T("FULL",`^${l[u.FULLPLAIN]}$`),T("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),T("LOOSE",`^${l[u.LOOSEPLAIN]}$`),T("GTLT","((?:<|>)?=?)"),T("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),T("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),T("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),T("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),T("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),T("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),T("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),T("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),T("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),T("COERCERTL",l[u.COERCE],!0),T("COERCERTLFULL",l[u.COERCEFULL],!0),T("LONETILDE","(?:~>?)"),T("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",T("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),T("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),T("LONECARET","(?:\\^)"),T("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",T("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),T("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),T("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),T("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),T("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",T("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),T("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),T("STAR","(<|>)?=?\\s*\\*"),T("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),T("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Es,Es.exports);var Vn=Es.exports;const jm=Object.freeze({loose:!0}),$m=Object.freeze({}),Dm=e=>e?typeof e!="object"?jm:e:$m;var ra=Dm;const Bl=/^[0-9]+$/,vf=(e,t)=>{const r=Bl.test(e),n=Bl.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},Mm=(e,t)=>vf(t,e);var Ef={compareIdentifiers:vf,rcompareIdentifiers:Mm};const no=Ho,{MAX_LENGTH:jl,MAX_SAFE_INTEGER:oo}=Uo,{safeRe:$l,t:Dl}=Vn,Fm=ra,{compareIdentifiers:Wr}=Ef;let Um=class Xt{constructor(t,r){if(r=Fm(r),t instanceof Xt){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>jl)throw new TypeError(`version is longer than ${jl} characters`);no("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?$l[Dl.LOOSE]:$l[Dl.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>oo||this.major<0)throw new TypeError("Invalid major version");if(this.minor>oo||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>oo||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const i=+o;if(i>=0&&i<oo)return i}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(no("SemVer.compare",this.version,this.options,t),!(t instanceof Xt)){if(typeof t=="string"&&t===this.version)return 0;t=new Xt(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Xt||(t=new Xt(t,this.options)),Wr(this.major,t.major)||Wr(this.minor,t.minor)||Wr(this.patch,t.patch)}comparePre(t){if(t instanceof Xt||(t=new Xt(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],o=t.prerelease[r];if(no("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n!==o)return Wr(n,o)}while(++r)}compareBuild(t){t instanceof Xt||(t=new Xt(t,this.options));let r=0;do{const n=this.build[r],o=t.build[r];if(no("build compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n!==o)return Wr(n,o)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const o=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[o];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(r){let i=[r,o];n===!1&&(i=[r]),Wr(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Rt=Um;const Ml=Rt,Hm=(e,t,r=!1)=>{if(e instanceof Ml)return e;try{return new Ml(e,t)}catch(n){if(!r)return null;throw n}};var hn=Hm;const zm=hn,Wm=(e,t)=>{const r=zm(e,t);return r?r.version:null};var qm=Wm;const Vm=hn,Gm=(e,t)=>{const r=Vm(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var Zm=Gm;const Fl=Rt,Jm=(e,t,r,n,o)=>{typeof r=="string"&&(o=n,n=r,r=void 0);try{return new Fl(e instanceof Fl?e.version:e,r).inc(t,n,o).version}catch{return null}};var Km=Jm;const Ul=hn,Xm=(e,t)=>{const r=Ul(e,null,!0),n=Ul(t,null,!0),o=r.compare(n);if(o===0)return null;const i=o>0,s=i?r:n,c=i?n:r,l=!!s.prerelease.length;if(c.prerelease.length&&!l)return!c.patch&&!c.minor?"major":s.patch?"patch":s.minor?"minor":"major";const u=l?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};var Ym=Xm;const Qm=Rt,ey=(e,t)=>new Qm(e,t).major;var ty=ey;const ry=Rt,ny=(e,t)=>new ry(e,t).minor;var oy=ny;const iy=Rt,sy=(e,t)=>new iy(e,t).patch;var ay=sy;const ly=hn,uy=(e,t)=>{const r=ly(e,t);return r&&r.prerelease.length?r.prerelease:null};var cy=uy;const Hl=Rt,fy=(e,t,r)=>new Hl(e,r).compare(new Hl(t,r));var Zt=fy;const dy=Zt,hy=(e,t,r)=>dy(t,e,r);var py=hy;const gy=Zt,by=(e,t)=>gy(e,t,!0);var my=by;const zl=Rt,yy=(e,t,r)=>{const n=new zl(e,r),o=new zl(t,r);return n.compare(o)||n.compareBuild(o)};var na=yy;const _y=na,wy=(e,t)=>e.sort((r,n)=>_y(r,n,t));var vy=wy;const Ey=na,Sy=(e,t)=>e.sort((r,n)=>Ey(n,r,t));var Ry=Sy;const Ay=Zt,Iy=(e,t,r)=>Ay(e,t,r)>0;var zo=Iy;const Ty=Zt,Oy=(e,t,r)=>Ty(e,t,r)<0;var oa=Oy;const xy=Zt,ky=(e,t,r)=>xy(e,t,r)===0;var Sf=ky;const Py=Zt,Ly=(e,t,r)=>Py(e,t,r)!==0;var Rf=Ly;const Ny=Zt,Cy=(e,t,r)=>Ny(e,t,r)>=0;var ia=Cy;const By=Zt,jy=(e,t,r)=>By(e,t,r)<=0;var sa=jy;const $y=Sf,Dy=Rf,My=zo,Fy=ia,Uy=oa,Hy=sa,zy=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return $y(e,r,n);case"!=":return Dy(e,r,n);case">":return My(e,r,n);case">=":return Fy(e,r,n);case"<":return Uy(e,r,n);case"<=":return Hy(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var Af=zy;const Wy=Rt,qy=hn,{safeRe:io,t:so}=Vn,Vy=(e,t)=>{if(e instanceof Wy)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?io[so.COERCEFULL]:io[so.COERCE]);else{const l=t.includePrerelease?io[so.COERCERTLFULL]:io[so.COERCERTL];let u;for(;(u=l.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;const n=r[2],o=r[3]||"0",i=r[4]||"0",s=t.includePrerelease&&r[5]?`-${r[5]}`:"",c=t.includePrerelease&&r[6]?`+${r[6]}`:"";return qy(`${n}.${o}.${i}${s}${c}`,t)};var Gy=Vy;class Zy{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const n=this.map.keys().next().value;this.delete(n)}this.map.set(t,r)}return this}}var Jy=Zy,Fi,Wl;function Jt(){if(Wl)return Fi;Wl=1;class e{constructor(w,B){if(B=n(B),w instanceof e)return w.loose===!!B.loose&&w.includePrerelease===!!B.includePrerelease?w:new e(w.raw,B);if(w instanceof o)return this.raw=w.value,this.set=[[w]],this.format(),this;if(this.options=B,this.loose=!!B.loose,this.includePrerelease=!!B.includePrerelease,this.raw=w.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const M=this.set[0];if(this.set=this.set.filter(O=>!T(O[0])),this.set.length===0)this.set=[M];else if(this.set.length>1){for(const O of this.set)if(O.length===1&&R(O[0])){this.set=[O];break}}}this.format()}format(){return this.range=this.set.map(w=>w.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(w){const B=((this.options.includePrerelease&&d)|(this.options.loose&&_))+":"+w,M=r.get(B);if(M)return M;const O=this.options.loose,D=O?c[l.HYPHENRANGELOOSE]:c[l.HYPHENRANGE];w=w.replace(D,ee(this.options.includePrerelease)),i("hyphen replace",w),w=w.replace(c[l.COMPARATORTRIM],u),i("comparator trim",w),w=w.replace(c[l.TILDETRIM],f),i("tilde trim",w),w=w.replace(c[l.CARETTRIM],h),i("caret trim",w);let x=w.split(" ").map(W=>V(W,this.options)).join(" ").split(/\s+/).map(W=>ae(W,this.options));O&&(x=x.filter(W=>(i("loose invalid filter",W,this.options),!!W.match(c[l.COMPARATORLOOSE])))),i("range list",x);const F=new Map,G=x.map(W=>new o(W,this.options));for(const W of G){if(T(W))return[W];F.set(W.value,W)}F.size>1&&F.has("")&&F.delete("");const ne=[...F.values()];return r.set(B,ne),ne}intersects(w,B){if(!(w instanceof e))throw new TypeError("a Range is required");return this.set.some(M=>L(M,B)&&w.set.some(O=>L(O,B)&&M.every(D=>O.every(x=>D.intersects(x,B)))))}test(w){if(!w)return!1;if(typeof w=="string")try{w=new s(w,this.options)}catch{return!1}for(let B=0;B<this.set.length;B++)if(g(this.set[B],w,this.options))return!0;return!1}}Fi=e;const t=Jy,r=new t,n=ra,o=Wo(),i=Ho,s=Rt,{safeRe:c,t:l,comparatorTrimReplace:u,tildeTrimReplace:f,caretTrimReplace:h}=Vn,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:_}=Uo,T=y=>y.value==="<0.0.0-0",R=y=>y.value==="",L=(y,w)=>{let B=!0;const M=y.slice();let O=M.pop();for(;B&&M.length;)B=M.every(D=>O.intersects(D,w)),O=M.pop();return B},V=(y,w)=>(i("comp",y,w),y=$(y,w),i("caret",y),y=k(y,w),i("tildes",y),y=re(y,w),i("xrange",y),y=H(y,w),i("stars",y),y),P=y=>!y||y.toLowerCase()==="x"||y==="*",k=(y,w)=>y.trim().split(/\s+/).map(B=>S(B,w)).join(" "),S=(y,w)=>{const B=w.loose?c[l.TILDELOOSE]:c[l.TILDE];return y.replace(B,(M,O,D,x,F)=>{i("tilde",y,M,O,D,x,F);let G;return P(O)?G="":P(D)?G=`>=${O}.0.0 <${+O+1}.0.0-0`:P(x)?G=`>=${O}.${D}.0 <${O}.${+D+1}.0-0`:F?(i("replaceTilde pr",F),G=`>=${O}.${D}.${x}-${F} <${O}.${+D+1}.0-0`):G=`>=${O}.${D}.${x} <${O}.${+D+1}.0-0`,i("tilde return",G),G})},$=(y,w)=>y.trim().split(/\s+/).map(B=>q(B,w)).join(" "),q=(y,w)=>{i("caret",y,w);const B=w.loose?c[l.CARETLOOSE]:c[l.CARET],M=w.includePrerelease?"-0":"";return y.replace(B,(O,D,x,F,G)=>{i("caret",y,O,D,x,F,G);let ne;return P(D)?ne="":P(x)?ne=`>=${D}.0.0${M} <${+D+1}.0.0-0`:P(F)?D==="0"?ne=`>=${D}.${x}.0${M} <${D}.${+x+1}.0-0`:ne=`>=${D}.${x}.0${M} <${+D+1}.0.0-0`:G?(i("replaceCaret pr",G),D==="0"?x==="0"?ne=`>=${D}.${x}.${F}-${G} <${D}.${x}.${+F+1}-0`:ne=`>=${D}.${x}.${F}-${G} <${D}.${+x+1}.0-0`:ne=`>=${D}.${x}.${F}-${G} <${+D+1}.0.0-0`):(i("no pr"),D==="0"?x==="0"?ne=`>=${D}.${x}.${F}${M} <${D}.${x}.${+F+1}-0`:ne=`>=${D}.${x}.${F}${M} <${D}.${+x+1}.0-0`:ne=`>=${D}.${x}.${F} <${+D+1}.0.0-0`),i("caret return",ne),ne})},re=(y,w)=>(i("replaceXRanges",y,w),y.split(/\s+/).map(B=>U(B,w)).join(" ")),U=(y,w)=>{y=y.trim();const B=w.loose?c[l.XRANGELOOSE]:c[l.XRANGE];return y.replace(B,(M,O,D,x,F,G)=>{i("xRange",y,M,O,D,x,F,G);const ne=P(D),W=ne||P(x),ie=W||P(F),fe=ie;return O==="="&&fe&&(O=""),G=w.includePrerelease?"-0":"",ne?O===">"||O==="<"?M="<0.0.0-0":M="*":O&&fe?(W&&(x=0),F=0,O===">"?(O=">=",W?(D=+D+1,x=0,F=0):(x=+x+1,F=0)):O==="<="&&(O="<",W?D=+D+1:x=+x+1),O==="<"&&(G="-0"),M=`${O+D}.${x}.${F}${G}`):W?M=`>=${D}.0.0${G} <${+D+1}.0.0-0`:ie&&(M=`>=${D}.${x}.0${G} <${D}.${+x+1}.0-0`),i("xRange return",M),M})},H=(y,w)=>(i("replaceStars",y,w),y.trim().replace(c[l.STAR],"")),ae=(y,w)=>(i("replaceGTE0",y,w),y.trim().replace(c[w.includePrerelease?l.GTE0PRE:l.GTE0],"")),ee=y=>(w,B,M,O,D,x,F,G,ne,W,ie,fe)=>(P(M)?B="":P(O)?B=`>=${M}.0.0${y?"-0":""}`:P(D)?B=`>=${M}.${O}.0${y?"-0":""}`:x?B=`>=${B}`:B=`>=${B}${y?"-0":""}`,P(ne)?G="":P(W)?G=`<${+ne+1}.0.0-0`:P(ie)?G=`<${ne}.${+W+1}.0-0`:fe?G=`<=${ne}.${W}.${ie}-${fe}`:y?G=`<${ne}.${W}.${+ie+1}-0`:G=`<=${G}`,`${B} ${G}`.trim()),g=(y,w,B)=>{for(let M=0;M<y.length;M++)if(!y[M].test(w))return!1;if(w.prerelease.length&&!B.includePrerelease){for(let M=0;M<y.length;M++)if(i(y[M].semver),y[M].semver!==o.ANY&&y[M].semver.prerelease.length>0){const O=y[M].semver;if(O.major===w.major&&O.minor===w.minor&&O.patch===w.patch)return!0}return!1}return!0};return Fi}var Ui,ql;function Wo(){if(ql)return Ui;ql=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,h){if(h=r(h),f instanceof t){if(f.loose===!!h.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),s("comparator",f,h),this.options=h,this.loose=!!h.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(f){const h=this.options.loose?n[o.COMPARATORLOOSE]:n[o.COMPARATOR],d=f.match(h);if(!d)throw new TypeError(`Invalid comparator: ${f}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new c(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(s("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new c(f,this.options)}catch{return!1}return i(f,this.operator,this.semver,this.options)}intersects(f,h){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(f.value,h).test(this.value):f.operator===""?f.value===""?!0:new l(this.value,h).test(f.semver):(h=r(h),h.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||i(this.semver,"<",f.semver,h)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||i(this.semver,">",f.semver,h)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}Ui=t;const r=ra,{safeRe:n,t:o}=Vn,i=Af,s=Ho,c=Rt,l=Jt();return Ui}const Ky=Jt(),Xy=(e,t,r)=>{try{t=new Ky(t,r)}catch{return!1}return t.test(e)};var qo=Xy;const Yy=Jt(),Qy=(e,t)=>new Yy(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var e_=Qy;const t_=Rt,r_=Jt(),n_=(e,t,r)=>{let n=null,o=null,i=null;try{i=new r_(t,r)}catch{return null}return e.forEach(s=>{i.test(s)&&(!n||o.compare(s)===-1)&&(n=s,o=new t_(n,r))}),n};var o_=n_;const i_=Rt,s_=Jt(),a_=(e,t,r)=>{let n=null,o=null,i=null;try{i=new s_(t,r)}catch{return null}return e.forEach(s=>{i.test(s)&&(!n||o.compare(s)===1)&&(n=s,o=new i_(n,r))}),n};var l_=a_;const Hi=Rt,u_=Jt(),Vl=zo,c_=(e,t)=>{e=new u_(e,t);let r=new Hi("0.0.0");if(e.test(r)||(r=new Hi("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const o=e.set[n];let i=null;o.forEach(s=>{const c=new Hi(s.semver.version);switch(s.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!i||Vl(c,i))&&(i=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),i&&(!r||Vl(r,i))&&(r=i)}return r&&e.test(r)?r:null};var f_=c_;const d_=Jt(),h_=(e,t)=>{try{return new d_(e,t).range||"*"}catch{return null}};var p_=h_;const g_=Rt,If=Wo(),{ANY:b_}=If,m_=Jt(),y_=qo,Gl=zo,Zl=oa,__=sa,w_=ia,v_=(e,t,r,n)=>{e=new g_(e,n),t=new m_(t,n);let o,i,s,c,l;switch(r){case">":o=Gl,i=__,s=Zl,c=">",l=">=";break;case"<":o=Zl,i=w_,s=Gl,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(y_(e,t,n))return!1;for(let u=0;u<t.set.length;++u){const f=t.set[u];let h=null,d=null;if(f.forEach(_=>{_.semver===b_&&(_=new If(">=0.0.0")),h=h||_,d=d||_,o(_.semver,h.semver,n)?h=_:s(_.semver,d.semver,n)&&(d=_)}),h.operator===c||h.operator===l||(!d.operator||d.operator===c)&&i(e,d.semver)||d.operator===l&&s(e,d.semver))return!1}return!0};var aa=v_;const E_=aa,S_=(e,t,r)=>E_(e,t,">",r);var R_=S_;const A_=aa,I_=(e,t,r)=>A_(e,t,"<",r);var T_=I_;const Jl=Jt(),O_=(e,t,r)=>(e=new Jl(e,r),t=new Jl(t,r),e.intersects(t,r));var x_=O_;const k_=qo,P_=Zt;var L_=(e,t,r)=>{const n=[];let o=null,i=null;const s=e.sort((f,h)=>P_(f,h,r));for(const f of s)k_(f,t,r)?(i=f,o||(o=f)):(i&&n.push([o,i]),i=null,o=null);o&&n.push([o,null]);const c=[];for(const[f,h]of n)f===h?c.push(f):!h&&f===s[0]?c.push("*"):h?f===s[0]?c.push(`<=${h}`):c.push(`${f} - ${h}`):c.push(`>=${f}`);const l=c.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return l.length<u.length?l:t};const Kl=Jt(),la=Wo(),{ANY:zi}=la,wn=qo,ua=Zt,N_=(e,t,r={})=>{if(e===t)return!0;e=new Kl(e,r),t=new Kl(t,r);let n=!1;e:for(const o of e.set){for(const i of t.set){const s=B_(o,i,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},C_=[new la(">=0.0.0-0")],Xl=[new la(">=0.0.0")],B_=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===zi){if(t.length===1&&t[0].semver===zi)return!0;r.includePrerelease?e=C_:e=Xl}if(t.length===1&&t[0].semver===zi){if(r.includePrerelease)return!0;t=Xl}const n=new Set;let o,i;for(const _ of e)_.operator===">"||_.operator===">="?o=Yl(o,_,r):_.operator==="<"||_.operator==="<="?i=Ql(i,_,r):n.add(_.semver);if(n.size>1)return null;let s;if(o&&i&&(s=ua(o.semver,i.semver,r),s>0||s===0&&(o.operator!==">="||i.operator!=="<=")))return null;for(const _ of n){if(o&&!wn(_,String(o),r)||i&&!wn(_,String(i),r))return null;for(const T of t)if(!wn(_,String(T),r))return!1;return!0}let c,l,u,f,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,d=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;h&&h.prerelease.length===1&&i.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(const _ of t){if(f=f||_.operator===">"||_.operator===">=",u=u||_.operator==="<"||_.operator==="<=",o){if(d&&_.semver.prerelease&&_.semver.prerelease.length&&_.semver.major===d.major&&_.semver.minor===d.minor&&_.semver.patch===d.patch&&(d=!1),_.operator===">"||_.operator===">="){if(c=Yl(o,_,r),c===_&&c!==o)return!1}else if(o.operator===">="&&!wn(o.semver,String(_),r))return!1}if(i){if(h&&_.semver.prerelease&&_.semver.prerelease.length&&_.semver.major===h.major&&_.semver.minor===h.minor&&_.semver.patch===h.patch&&(h=!1),_.operator==="<"||_.operator==="<="){if(l=Ql(i,_,r),l===_&&l!==i)return!1}else if(i.operator==="<="&&!wn(i.semver,String(_),r))return!1}if(!_.operator&&(i||o)&&s!==0)return!1}return!(o&&u&&!i&&s!==0||i&&f&&!o&&s!==0||d||h)},Yl=(e,t,r)=>{if(!e)return t;const n=ua(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Ql=(e,t,r)=>{if(!e)return t;const n=ua(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var j_=N_;const Wi=Vn,eu=Uo,$_=Rt,tu=Ef,D_=hn,M_=qm,F_=Zm,U_=Km,H_=Ym,z_=ty,W_=oy,q_=ay,V_=cy,G_=Zt,Z_=py,J_=my,K_=na,X_=vy,Y_=Ry,Q_=zo,ew=oa,tw=Sf,rw=Rf,nw=ia,ow=sa,iw=Af,sw=Gy,aw=Wo(),lw=Jt(),uw=qo,cw=e_,fw=o_,dw=l_,hw=f_,pw=p_,gw=aa,bw=R_,mw=T_,yw=x_,_w=L_,ww=j_;var vw={parse:D_,valid:M_,clean:F_,inc:U_,diff:H_,major:z_,minor:W_,patch:q_,prerelease:V_,compare:G_,rcompare:Z_,compareLoose:J_,compareBuild:K_,sort:X_,rsort:Y_,gt:Q_,lt:ew,eq:tw,neq:rw,gte:nw,lte:ow,cmp:iw,coerce:sw,Comparator:aw,Range:lw,satisfies:uw,toComparators:cw,maxSatisfying:fw,minSatisfying:dw,minVersion:hw,validRange:pw,outside:gw,gtr:bw,ltr:mw,intersects:yw,simplifyRange:_w,subset:ww,SemVer:$_,re:Wi.re,src:Wi.src,tokens:Wi.t,SEMVER_SPEC_VERSION:eu.SEMVER_SPEC_VERSION,RELEASE_TYPES:eu.RELEASE_TYPES,compareIdentifiers:tu.compareIdentifiers,rcompareIdentifiers:tu.rcompareIdentifiers};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.satisfiesVersionRange=e.gtRange=e.gtVersion=e.assertIsSemVerRange=e.assertIsSemVerVersion=e.isValidSemVerRange=e.isValidSemVerVersion=e.VersionRangeStruct=e.VersionStruct=void 0;const t=vw,r=Hr,n=gt;e.VersionStruct=(0,r.refine)((0,r.string)(),"Version",h=>(0,t.valid)(h)===null?`Expected SemVer version, got "${h}"`:!0),e.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",h=>(0,t.validRange)(h)===null?`Expected SemVer range, got "${h}"`:!0);function o(h){return(0,r.is)(h,e.VersionStruct)}e.isValidSemVerVersion=o;function i(h){return(0,r.is)(h,e.VersionRangeStruct)}e.isValidSemVerRange=i;function s(h){(0,n.assertStruct)(h,e.VersionStruct)}e.assertIsSemVerVersion=s;function c(h){(0,n.assertStruct)(h,e.VersionRangeStruct)}e.assertIsSemVerRange=c;function l(h,d){return(0,t.gt)(h,d)}e.gtVersion=l;function u(h,d){return(0,t.gtr)(h,d)}e.gtRange=u;function f(h,d){return(0,t.satisfies)(h,d,{includePrerelease:!0})}e.satisfiesVersionRange=f})(_f);(function(e){var t=rt&&rt.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i);var c=Object.getOwnPropertyDescriptor(o,i);(!c||("get"in c?!o.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(n,s,c)}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=rt&&rt.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(gt,e),r(Wn,e),r(De,e),r(Mo,e),r(Qt,e),r(en,e),r(df,e),r(qn,e),r(hf,e),r(pf,e),r(tn,e),r(gf,e),r(er,e),r(bf,e),r(mf,e),r(yf,e),r(_f,e)})(Gs);var Vo={},Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.errorValues=Sr.errorCodes=void 0;Sr.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};Sr.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeCause=e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=Gs,r=Sr,n=r.errorCodes.rpc.internal,o="Unspecified error message. This is a bug, please report it.",i={code:n,message:s(n)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function s(_,T=o){if(c(_)){const R=_.toString();if((0,t.hasProperty)(r.errorValues,R))return r.errorValues[R].message;if(f(_))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return T}e.getMessageFromCode=s;function c(_){return Number.isInteger(_)}e.isValidCode=c;function l(_,{fallbackError:T=i,shouldIncludeStack:R=!0}={}){if(!(0,t.isJsonRpcError)(T))throw new Error("Must provide fallback error with integer number code and string message.");const L=u(_,T);return R||delete L.stack,L}e.serializeError=l;function u(_,T){if(_&&typeof _=="object"&&"serialize"in _&&typeof _.serialize=="function")return _.serialize();if((0,t.isJsonRpcError)(_))return _;const R=h(_);return{...T,data:{cause:R}}}function f(_){return _>=-32099&&_<=-32e3}function h(_){return Array.isArray(_)?_.map(T=>(0,t.isValidJson)(T)?T:(0,t.isObject)(T)?d(T):null):(0,t.isObject)(_)?d(_):(0,t.isValidJson)(_)?_:null}e.serializeCause=h;function d(_){return Object.getOwnPropertyNames(_).reduce((T,R)=>{const L=_[R];return(0,t.isValidJson)(L)&&(T[R]=L),T},{})}})(Vo);var Ew=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Br,"__esModule",{value:!0});Br.EthereumProviderError=Br.JsonRpcError=void 0;const Sw=Gs,Rw=Ew(Ns),Aw=Vo;class Tf extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a non-empty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data,(0,Sw.isPlainObject)(this.data)&&(t.data.cause=(0,Aw.serializeCause)(this.data.cause))),this.stack&&(t.stack=this.stack),t}toString(){return(0,Rw.default)(this.serialize(),Ow,2)}}Br.JsonRpcError=Tf;class Iw extends Tf{constructor(t,r,n){if(!Tw(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}}Br.EthereumProviderError=Iw;function Tw(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function Ow(e,t){if(t!=="[Circular]")return t}var rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.providerErrors=rn.rpcErrors=void 0;const ca=Br,yt=Sr,Of=Vo;rn.rpcErrors={parse:e=>Bt(yt.errorCodes.rpc.parse,e),invalidRequest:e=>Bt(yt.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Bt(yt.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Bt(yt.errorCodes.rpc.methodNotFound,e),internal:e=>Bt(yt.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Bt(t,e)},invalidInput:e=>Bt(yt.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Bt(yt.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Bt(yt.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Bt(yt.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Bt(yt.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Bt(yt.errorCodes.rpc.limitExceeded,e)};rn.providerErrors={userRejectedRequest:e=>vn(yt.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>vn(yt.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>vn(yt.errorCodes.provider.unsupportedMethod,e),disconnected:e=>vn(yt.errorCodes.provider.disconnected,e),chainDisconnected:e=>vn(yt.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new ca.EthereumProviderError(t,r,n)}};function Bt(e,t){const[r,n]=xf(t);return new ca.JsonRpcError(e,r??(0,Of.getMessageFromCode)(e),n)}function vn(e,t){const[r,n]=xf(t);return new ca.EthereumProviderError(e,r??(0,Of.getMessageFromCode)(e),n)}function xf(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t??void 0,r]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.errorCodes=e.providerErrors=e.rpcErrors=e.getMessageFromCode=e.serializeError=e.serializeCause=e.EthereumProviderError=e.JsonRpcError=void 0;var t=Br;Object.defineProperty(e,"JsonRpcError",{enumerable:!0,get:function(){return t.JsonRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});var r=Vo;Object.defineProperty(e,"serializeCause",{enumerable:!0,get:function(){return r.serializeCause}}),Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});var n=rn;Object.defineProperty(e,"rpcErrors",{enumerable:!0,get:function(){return n.rpcErrors}}),Object.defineProperty(e,"providerErrors",{enumerable:!0,get:function(){return n.providerErrors}});var o=Sr;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})})(sb);var fa={exports:{}},xw=kf;function kf(e,t){if(e&&t)return kf(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];var i=e.apply(this,n),s=n[n.length-1];return typeof i=="function"&&i!==s&&Object.keys(s).forEach(function(c){i[c]=s[c]}),i}}var Pf=xw;fa.exports=Pf(po);fa.exports.strict=Pf(Lf);po.proto=po(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return po(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Lf(this)},configurable:!0})});function po(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Lf(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var da=fa.exports;const kw=Rr(da);var Pw=da,Lw=function(){},Nw=function(e){return e.setHeader&&typeof e.abort=="function"},Cw=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},Nf=function(e,t,r){if(typeof t=="function")return Nf(e,null,t);t||(t={}),r=Pw(r||Lw);var n=e._writableState,o=e._readableState,i=t.readable||t.readable!==!1&&e.readable,s=t.writable||t.writable!==!1&&e.writable,c=!1,l=function(){e.writable||u()},u=function(){s=!1,i||r.call(e)},f=function(){i=!1,s||r.call(e)},h=function(L){r.call(e,L?new Error("exited with error code: "+L):null)},d=function(L){r.call(e,L)},_=function(){me.process.nextTick(T)},T=function(){if(!c){if(i&&!(o&&o.ended&&!o.destroyed))return r.call(e,new Error("premature close"));if(s&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"))}},R=function(){e.req.on("finish",u)};return Nw(e)?(e.on("complete",u),e.on("abort",_),e.req?R():e.on("request",R)):s&&!n&&(e.on("end",l),e.on("close",l)),Cw(e)&&e.on("exit",h),e.on("end",f),e.on("finish",u),t.error!==!1&&e.on("error",d),e.on("close",_),function(){c=!0,e.removeListener("complete",u),e.removeListener("abort",_),e.removeListener("request",R),e.req&&e.req.removeListener("finish",u),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",u),e.removeListener("exit",h),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",_)}},Cf=Nf;const ru=Rr(Cf);var Bw=da,jw=Cf,qi=Bh,jn=function(){},$w=/^v?\.0/.test(me.process.version),Go=function(e){return typeof e=="function"},Dw=function(e){return!$w||!qi?!1:(e instanceof(qi.ReadStream||jn)||e instanceof(qi.WriteStream||jn))&&Go(e.close)},Mw=function(e){return e.setHeader&&Go(e.abort)},Fw=function(e,t,r,n){n=Bw(n);var o=!1;e.on("close",function(){o=!0}),jw(e,{readable:t,writable:r},function(s){if(s)return n(s);o=!0,n()});var i=!1;return function(s){if(!o&&!i){if(i=!0,Dw(e))return e.close(jn);if(Mw(e))return e.abort();if(Go(e.destroy))return e.destroy();n(s||new Error("stream was destroyed"))}}},nu=function(e){e()},Uw=function(e,t){return e.pipe(t)},Hw=function(){var e=Array.prototype.slice.call(arguments),t=Go(e[e.length-1]||jn)&&e.pop()||jn;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(o,i){var s=i<e.length-1,c=i>0;return Fw(o,s,c,function(l){r||(r=l),l&&n.forEach(nu),!s&&(n.forEach(nu),t(r))})});return e.reduce(Uw)},zw=Hw;const ou=Rr(zw);var Ww={},Zo={},Jo={},Bf={},nn={},Ko={},ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.output=ht.exists=ht.hash=ht.bytes=ht.bool=ht.number=void 0;function _o(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}ht.number=_o;function jf(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}ht.bool=jf;function qw(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ha(e,...t){if(!qw(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}ht.bytes=ha;function $f(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");_o(e.outputLen),_o(e.blockLen)}ht.hash=$f;function Df(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}ht.exists=Df;function Mf(e,t){ha(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}ht.output=Mf;const Vw={number:_o,bool:jf,bytes:ha,hash:$f,exists:Df,output:Mf};ht.default=Vw;var pr={},Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.crypto=void 0;Xo.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=Xo,r=U=>new Uint8Array(U.buffer,U.byteOffset,U.byteLength);e.u8=r;const n=U=>new Uint32Array(U.buffer,U.byteOffset,Math.floor(U.byteLength/4));e.u32=n;function o(U){return U instanceof Uint8Array||U!=null&&typeof U=="object"&&U.constructor.name==="Uint8Array"}const i=U=>new DataView(U.buffer,U.byteOffset,U.byteLength);e.createView=i;const s=(U,H)=>U<<32-H|U>>>H;if(e.rotr=s,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const c=Array.from({length:256},(U,H)=>H.toString(16).padStart(2,"0"));function l(U){if(!o(U))throw new Error("Uint8Array expected");let H="";for(let ae=0;ae<U.length;ae++)H+=c[U[ae]];return H}e.bytesToHex=l;const u={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function f(U){if(U>=u._0&&U<=u._9)return U-u._0;if(U>=u._A&&U<=u._F)return U-(u._A-10);if(U>=u._a&&U<=u._f)return U-(u._a-10)}function h(U){if(typeof U!="string")throw new Error("hex string expected, got "+typeof U);const H=U.length,ae=H/2;if(H%2)throw new Error("padded hex string expected, got unpadded hex of length "+H);const ee=new Uint8Array(ae);for(let g=0,y=0;g<ae;g++,y+=2){const w=f(U.charCodeAt(y)),B=f(U.charCodeAt(y+1));if(w===void 0||B===void 0){const M=U[y]+U[y+1];throw new Error('hex string expected, got non-hex character "'+M+'" at index '+y)}ee[g]=w*16+B}return ee}e.hexToBytes=h;const d=async()=>{};e.nextTick=d;async function _(U,H,ae){let ee=Date.now();for(let g=0;g<U;g++){ae(g);const y=Date.now()-ee;y>=0&&y<H||(await(0,e.nextTick)(),ee+=y)}}e.asyncLoop=_;function T(U){if(typeof U!="string")throw new Error(`utf8ToBytes expected string, got ${typeof U}`);return new Uint8Array(new TextEncoder().encode(U))}e.utf8ToBytes=T;function R(U){if(typeof U=="string"&&(U=T(U)),!o(U))throw new Error(`expected Uint8Array, got ${typeof U}`);return U}e.toBytes=R;function L(...U){let H=0;for(let ee=0;ee<U.length;ee++){const g=U[ee];if(!o(g))throw new Error("Uint8Array expected");H+=g.length}const ae=new Uint8Array(H);for(let ee=0,g=0;ee<U.length;ee++){const y=U[ee];ae.set(y,g),g+=y.length}return ae}e.concatBytes=L;class V{clone(){return this._cloneInto()}}e.Hash=V;const P={}.toString;function k(U,H){if(H!==void 0&&P.call(H)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(U,H)}e.checkOpts=k;function S(U){const H=ee=>U().update(R(ee)).digest(),ae=U();return H.outputLen=ae.outputLen,H.blockLen=ae.blockLen,H.create=()=>U(),H}e.wrapConstructor=S;function $(U){const H=(ee,g)=>U(g).update(R(ee)).digest(),ae=U({});return H.outputLen=ae.outputLen,H.blockLen=ae.blockLen,H.create=ee=>U(ee),H}e.wrapConstructorWithOpts=$;function q(U){const H=(ee,g)=>U(g).update(R(ee)).digest(),ae=U({});return H.outputLen=ae.outputLen,H.blockLen=ae.blockLen,H.create=ee=>U(ee),H}e.wrapXOFConstructorWithOpts=q;function re(U=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(U));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=re})(pr);Object.defineProperty(Ko,"__esModule",{value:!0});Ko.SHA2=void 0;const Vi=ht,En=pr;function Gw(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const o=BigInt(32),i=BigInt(4294967295),s=Number(r>>o&i),c=Number(r&i),l=n?4:0,u=n?0:4;e.setUint32(t+l,s,n),e.setUint32(t+u,c,n)}class Zw extends En.Hash{constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,En.createView)(this.buffer)}update(t){(0,Vi.exists)(this);const{view:r,buffer:n,blockLen:o}=this;t=(0,En.toBytes)(t);const i=t.length;for(let s=0;s<i;){const c=Math.min(o-this.pos,i-s);if(c===o){const l=(0,En.createView)(t);for(;o<=i-s;s+=o)this.process(l,s);continue}n.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,Vi.exists)(this),(0,Vi.output)(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:o,isLE:i}=this;let{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(n,0),s=0);for(let h=s;h<o;h++)r[h]=0;Gw(n,o-8,BigInt(this.length*8),i),this.process(n,0);const c=(0,En.createView)(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)c.setUint32(4*h,f[h],i)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:o,finished:i,destroyed:s,pos:c}=this;return t.length=o,t.pos=c,t.finished=i,t.destroyed=s,o%r&&t.buffer.set(n),t}}Ko.SHA2=Zw;Object.defineProperty(nn,"__esModule",{value:!0});nn.sha224=nn.sha256=void 0;const Jw=Ko,$t=pr,Kw=(e,t,r)=>e&t^~e&r,Xw=(e,t,r)=>e&t^e&r^t&r,Yw=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),yr=new Uint32Array(64);class Ff extends Jw.SHA2{constructor(){super(64,32,8,!1),this.A=mr[0]|0,this.B=mr[1]|0,this.C=mr[2]|0,this.D=mr[3]|0,this.E=mr[4]|0,this.F=mr[5]|0,this.G=mr[6]|0,this.H=mr[7]|0}get(){const{A:t,B:r,C:n,D:o,E:i,F:s,G:c,H:l}=this;return[t,r,n,o,i,s,c,l]}set(t,r,n,o,i,s,c,l){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=c|0,this.H=l|0}process(t,r){for(let h=0;h<16;h++,r+=4)yr[h]=t.getUint32(r,!1);for(let h=16;h<64;h++){const d=yr[h-15],_=yr[h-2],T=(0,$t.rotr)(d,7)^(0,$t.rotr)(d,18)^d>>>3,R=(0,$t.rotr)(_,17)^(0,$t.rotr)(_,19)^_>>>10;yr[h]=R+yr[h-7]+T+yr[h-16]|0}let{A:n,B:o,C:i,D:s,E:c,F:l,G:u,H:f}=this;for(let h=0;h<64;h++){const d=(0,$t.rotr)(c,6)^(0,$t.rotr)(c,11)^(0,$t.rotr)(c,25),_=f+d+Kw(c,l,u)+Yw[h]+yr[h]|0,T=((0,$t.rotr)(n,2)^(0,$t.rotr)(n,13)^(0,$t.rotr)(n,22))+Xw(n,o,i)|0;f=u,u=l,l=c,c=s+_|0,s=i,i=o,o=n,n=_+T|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,c=c+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,o,i,s,c,l,u,f)}roundClean(){yr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Qw extends Ff{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}nn.sha256=(0,$t.wrapConstructor)(()=>new Ff);nn.sha224=(0,$t.wrapConstructor)(()=>new Qw);var Ce={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.validateObject=Pe.createHmacDrbg=Pe.bitMask=Pe.bitSet=Pe.bitGet=Pe.bitLen=Pe.utf8ToBytes=Pe.equalBytes=Pe.concatBytes=Pe.ensureBytes=Pe.numberToVarBytesBE=Pe.numberToBytesLE=Pe.numberToBytesBE=Pe.bytesToNumberLE=Pe.bytesToNumberBE=Pe.hexToBytes=Pe.hexToNumber=Pe.numberToHexUnpadded=Pe.bytesToHex=Pe.isBytes=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uf=BigInt(0),Yo=BigInt(1),ev=BigInt(2);function pn(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}Pe.isBytes=pn;const tv=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function pa(e){if(!pn(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=tv[e[r]];return t}Pe.bytesToHex=pa;function Hf(e){const t=e.toString(16);return t.length&1?`0${t}`:t}Pe.numberToHexUnpadded=Hf;function ga(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}Pe.hexToNumber=ga;const ur={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function iu(e){if(e>=ur._0&&e<=ur._9)return e-ur._0;if(e>=ur._A&&e<=ur._F)return e-(ur._A-10);if(e>=ur._a&&e<=ur._f)return e-(ur._a-10)}function Qo(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let o=0,i=0;o<r;o++,i+=2){const s=iu(e.charCodeAt(i)),c=iu(e.charCodeAt(i+1));if(s===void 0||c===void 0){const l=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}n[o]=s*16+c}return n}Pe.hexToBytes=Qo;function rv(e){return ga(pa(e))}Pe.bytesToNumberBE=rv;function nv(e){if(!pn(e))throw new Error("Uint8Array expected");return ga(pa(Uint8Array.from(e).reverse()))}Pe.bytesToNumberLE=nv;function zf(e,t){return Qo(e.toString(16).padStart(t*2,"0"))}Pe.numberToBytesBE=zf;function ov(e,t){return zf(e,t).reverse()}Pe.numberToBytesLE=ov;function iv(e){return Qo(Hf(e))}Pe.numberToVarBytesBE=iv;function sv(e,t,r){let n;if(typeof t=="string")try{n=Qo(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(pn(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=n.length;if(typeof r=="number"&&o!==r)throw new Error(`${e} expected ${r} bytes, got ${o}`);return n}Pe.ensureBytes=sv;function Wf(...e){let t=0;for(let o=0;o<e.length;o++){const i=e[o];if(!pn(i))throw new Error("Uint8Array expected");t+=i.length}let r=new Uint8Array(t),n=0;for(let o=0;o<e.length;o++){const i=e[o];r.set(i,n),n+=i.length}return r}Pe.concatBytes=Wf;function av(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}Pe.equalBytes=av;function lv(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}Pe.utf8ToBytes=lv;function uv(e){let t;for(t=0;e>Uf;e>>=Yo,t+=1);return t}Pe.bitLen=uv;function cv(e,t){return e>>BigInt(t)&Yo}Pe.bitGet=cv;const fv=(e,t,r)=>e|(r?Yo:Uf)<<BigInt(t);Pe.bitSet=fv;const dv=e=>(ev<<BigInt(e-1))-Yo;Pe.bitMask=dv;const Gi=e=>new Uint8Array(e),su=e=>Uint8Array.from(e);function hv(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Gi(e),o=Gi(e),i=0;const s=()=>{n.fill(1),o.fill(0),i=0},c=(...f)=>r(o,n,...f),l=(f=Gi())=>{o=c(su([0]),f),n=c(),f.length!==0&&(o=c(su([1]),f),n=c())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<t;){n=c();const d=n.slice();h.push(d),f+=n.length}return Wf(...h)};return(f,h)=>{s(),l(f);let d;for(;!(d=h(u()));)l();return s(),d}}Pe.createHmacDrbg=hv;const pv={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||pn(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function gv(e,t,r={}){const n=(o,i,s)=>{const c=pv[i];if(typeof c!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=e[o];if(!(s&&l===void 0)&&!c(l,e))throw new Error(`Invalid param ${String(o)}=${l} (${typeof l}), expected ${i}`)};for(const[o,i]of Object.entries(t))n(o,i,!1);for(const[o,i]of Object.entries(r))n(o,i,!0);return e}Pe.validateObject=gv;Object.defineProperty(Ce,"__esModule",{value:!0});Ce.mapHashToField=Ce.getMinHashLength=Ce.getFieldBytesLength=Ce.hashToPrivateScalar=Ce.FpSqrtEven=Ce.FpSqrtOdd=Ce.Field=Ce.nLength=Ce.FpIsSquare=Ce.FpDiv=Ce.FpInvertBatch=Ce.FpPow=Ce.validateField=Ce.isNegativeLE=Ce.FpSqrt=Ce.tonelliShanks=Ce.invert=Ce.pow2=Ce.pow=Ce.mod=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pt=Pe,pt=BigInt(0),Ge=BigInt(1),wr=BigInt(2),bv=BigInt(3),Ss=BigInt(4),au=BigInt(5),lu=BigInt(8);BigInt(9);BigInt(16);function xt(e,t){const r=e%t;return r>=pt?r:t+r}Ce.mod=xt;function qf(e,t,r){if(r<=pt||t<pt)throw new Error("Expected power/modulo > 0");if(r===Ge)return pt;let n=Ge;for(;t>pt;)t&Ge&&(n=n*e%r),e=e*e%r,t>>=Ge;return n}Ce.pow=qf;function mv(e,t,r){let n=e;for(;t-- >pt;)n*=n,n%=r;return n}Ce.pow2=mv;function wo(e,t){if(e===pt||t<=pt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=xt(e,t),n=t,o=pt,i=Ge;for(;r!==pt;){const s=n/r,c=n%r,l=o-i*s;n=r,r=c,o=i,i=l}if(n!==Ge)throw new Error("invert: does not exist");return xt(o,t)}Ce.invert=wo;function Vf(e){const t=(e-Ge)/wr;let r,n,o;for(r=e-Ge,n=0;r%wr===pt;r/=wr,n++);for(o=wr;o<e&&qf(o,t,e)!==e-Ge;o++);if(n===1){const s=(e+Ge)/Ss;return function(c,l){const u=c.pow(l,s);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(r+Ge)/wr;return function(s,c){if(s.pow(c,t)===s.neg(s.ONE))throw new Error("Cannot find square root");let l=n,u=s.pow(s.mul(s.ONE,o),r),f=s.pow(c,i),h=s.pow(c,r);for(;!s.eql(h,s.ONE);){if(s.eql(h,s.ZERO))return s.ZERO;let d=1;for(let T=s.sqr(h);d<l&&!s.eql(T,s.ONE);d++)T=s.sqr(T);const _=s.pow(u,Ge<<BigInt(l-d-1));u=s.sqr(_),f=s.mul(f,_),h=s.mul(h,u),l=d}return f}}Ce.tonelliShanks=Vf;function Gf(e){if(e%Ss===bv){const t=(e+Ge)/Ss;return function(r,n){const o=r.pow(n,t);if(!r.eql(r.sqr(o),n))throw new Error("Cannot find square root");return o}}if(e%lu===au){const t=(e-au)/lu;return function(r,n){const o=r.mul(n,wr),i=r.pow(o,t),s=r.mul(n,i),c=r.mul(r.mul(s,wr),i),l=r.mul(s,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),n))throw new Error("Cannot find square root");return l}}return Vf(e)}Ce.FpSqrt=Gf;const yv=(e,t)=>(xt(e,t)&Ge)===Ge;Ce.isNegativeLE=yv;const _v=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wv(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=_v.reduce((n,o)=>(n[o]="function",n),t);return(0,Pt.validateObject)(e,r)}Ce.validateField=wv;function Zf(e,t,r){if(r<pt)throw new Error("Expected power > 0");if(r===pt)return e.ONE;if(r===Ge)return t;let n=e.ONE,o=t;for(;r>pt;)r&Ge&&(n=e.mul(n,o)),o=e.sqr(o),r>>=Ge;return n}Ce.FpPow=Zf;function Jf(e,t){const r=new Array(t.length),n=t.reduce((i,s,c)=>e.is0(s)?i:(r[c]=i,e.mul(i,s)),e.ONE),o=e.inv(n);return t.reduceRight((i,s,c)=>e.is0(s)?i:(r[c]=e.mul(i,r[c]),e.mul(i,s)),o),r}Ce.FpInvertBatch=Jf;function vv(e,t,r){return e.mul(t,typeof r=="bigint"?wo(r,e.ORDER):e.inv(r))}Ce.FpDiv=vv;function Ev(e){const t=(e.ORDER-Ge)/wr;return r=>{const n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}}Ce.FpIsSquare=Ev;function ba(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}Ce.nLength=ba;function Sv(e,t,r=!1,n={}){if(e<=pt)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:i}=ba(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=Gf(e),c=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:(0,Pt.bitMask)(o),ZERO:pt,ONE:Ge,create:l=>xt(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return pt<=l&&l<e},is0:l=>l===pt,isOdd:l=>(l&Ge)===Ge,neg:l=>xt(-l,e),eql:(l,u)=>l===u,sqr:l=>xt(l*l,e),add:(l,u)=>xt(l+u,e),sub:(l,u)=>xt(l-u,e),mul:(l,u)=>xt(l*u,e),pow:(l,u)=>Zf(c,l,u),div:(l,u)=>xt(l*wo(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>wo(l,e),sqrt:n.sqrt||(l=>s(c,l)),invertBatch:l=>Jf(c,l),cmov:(l,u,f)=>f?u:l,toBytes:l=>r?(0,Pt.numberToBytesLE)(l,i):(0,Pt.numberToBytesBE)(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return r?(0,Pt.bytesToNumberLE)(l):(0,Pt.bytesToNumberBE)(l)}});return Object.freeze(c)}Ce.Field=Sv;function Rv(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)}Ce.FpSqrtOdd=Rv;function Av(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}Ce.FpSqrtEven=Av;function Iv(e,t,r=!1){e=(0,Pt.ensureBytes)("privateHash",e);const n=e.length,o=ba(t).nByteLength+8;if(o<24||n<o||n>1024)throw new Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${n}`);const i=r?(0,Pt.bytesToNumberLE)(e):(0,Pt.bytesToNumberBE)(e);return xt(i,t-Ge)+Ge}Ce.hashToPrivateScalar=Iv;function ma(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}Ce.getFieldBytesLength=ma;function Kf(e){const t=ma(e);return t+Math.ceil(t/2)}Ce.getMinHashLength=Kf;function Tv(e,t,r=!1){const n=e.length,o=ma(t),i=Kf(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const s=r?(0,Pt.bytesToNumberBE)(e):(0,Pt.bytesToNumberLE)(e),c=xt(s,t-Ge)+Ge;return r?(0,Pt.numberToBytesLE)(c,o):(0,Pt.numberToBytesBE)(c,o)}Ce.mapHashToField=Tv;var ya={},on={};Object.defineProperty(on,"__esModule",{value:!0});on.validateBasic=on.wNAF=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uu=Ce,Ov=Pe,xv=BigInt(0),Zi=BigInt(1);function kv(e,t){const r=(o,i)=>{const s=i.negate();return o?s:i},n=o=>{const i=Math.ceil(t/o)+1,s=2**(o-1);return{windows:i,windowSize:s}};return{constTimeNegate:r,unsafeLadder(o,i){let s=e.ZERO,c=o;for(;i>xv;)i&Zi&&(s=s.add(c)),c=c.double(),i>>=Zi;return s},precomputeWindow(o,i){const{windows:s,windowSize:c}=n(i),l=[];let u=o,f=u;for(let h=0;h<s;h++){f=u,l.push(f);for(let d=1;d<c;d++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(o,i,s){const{windows:c,windowSize:l}=n(o);let u=e.ZERO,f=e.BASE;const h=BigInt(2**o-1),d=2**o,_=BigInt(o);for(let T=0;T<c;T++){const R=T*l;let L=Number(s&h);s>>=_,L>l&&(L-=d,s+=Zi);const V=R,P=R+Math.abs(L)-1,k=T%2!==0,S=L<0;L===0?f=f.add(r(k,i[V])):u=u.add(r(S,i[P]))}return{p:u,f}},wNAFCached(o,i,s,c){const l=o._WINDOW_SIZE||1;let u=i.get(o);return u||(u=this.precomputeWindow(o,l),l!==1&&i.set(o,c(u))),this.wNAF(l,u,s)}}}on.wNAF=kv;function Pv(e){return(0,uu.validateField)(e.Fp),(0,Ov.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,uu.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}on.validateBasic=Pv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mapToCurveSimpleSWU=e.SWUFpSqrtRatio=e.weierstrass=e.weierstrassPoints=e.DER=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=Ce,r=Pe,n=Pe,o=on;function i(P){const k=(0,o.validateBasic)(P);r.validateObject(k,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:S,Fp:$,a:q}=k;if(S){if(!$.eql(q,$.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof S!="object"||typeof S.beta!="bigint"||typeof S.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...k})}const{bytesToNumberBE:s,hexToBytes:c}=r;e.DER={Err:class extends Error{constructor(P=""){super(P)}},_parseInt(P){const{Err:k}=e.DER;if(P.length<2||P[0]!==2)throw new k("Invalid signature integer tag");const S=P[1],$=P.subarray(2,S+2);if(!S||$.length!==S)throw new k("Invalid signature integer: wrong length");if($[0]&128)throw new k("Invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new k("Invalid signature integer: unnecessary leading zero");return{d:s($),l:P.subarray(S+2)}},toSig(P){const{Err:k}=e.DER,S=typeof P=="string"?c(P):P;if(!r.isBytes(S))throw new Error("ui8a expected");let $=S.length;if($<2||S[0]!=48)throw new k("Invalid signature tag");if(S[1]!==$-2)throw new k("Invalid signature: incorrect length");const{d:q,l:re}=e.DER._parseInt(S.subarray(2)),{d:U,l:H}=e.DER._parseInt(re);if(H.length)throw new k("Invalid signature: left bytes after parsing");return{r:q,s:U}},hexFromSig(P){const k=ee=>Number.parseInt(ee[0],16)&8?"00"+ee:ee,S=ee=>{const g=ee.toString(16);return g.length&1?`0${g}`:g},$=k(S(P.s)),q=k(S(P.r)),re=$.length/2,U=q.length/2,H=S(re),ae=S(U);return`30${S(U+re+4)}02${ae}${q}02${H}${$}`}};const l=BigInt(0),u=BigInt(1),f=BigInt(2),h=BigInt(3),d=BigInt(4);function _(P){const k=i(P),{Fp:S}=k,$=k.toBytes||((M,O,D)=>{const x=O.toAffine();return r.concatBytes(Uint8Array.from([4]),S.toBytes(x.x),S.toBytes(x.y))}),q=k.fromBytes||(M=>{const O=M.subarray(1),D=S.fromBytes(O.subarray(0,S.BYTES)),x=S.fromBytes(O.subarray(S.BYTES,2*S.BYTES));return{x:D,y:x}});function re(M){const{a:O,b:D}=k,x=S.sqr(M),F=S.mul(x,M);return S.add(S.add(F,S.mul(M,O)),D)}if(!S.eql(S.sqr(k.Gy),re(k.Gx)))throw new Error("bad generator point: equation left != right");function U(M){return typeof M=="bigint"&&l<M&&M<k.n}function H(M){if(!U(M))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function ae(M){const{allowedPrivateKeyLengths:O,nByteLength:D,wrapPrivateKey:x,n:F}=k;if(O&&typeof M!="bigint"){if(r.isBytes(M)&&(M=r.bytesToHex(M)),typeof M!="string"||!O.includes(M.length))throw new Error("Invalid key");M=M.padStart(D*2,"0")}let G;try{G=typeof M=="bigint"?M:r.bytesToNumberBE((0,n.ensureBytes)("private key",M,D))}catch{throw new Error(`private key must be ${D} bytes, hex or bigint, not ${typeof M}`)}return x&&(G=t.mod(G,F)),H(G),G}const ee=new Map;function g(M){if(!(M instanceof y))throw new Error("ProjectivePoint expected")}class y{constructor(O,D,x){if(this.px=O,this.py=D,this.pz=x,O==null||!S.isValid(O))throw new Error("x required");if(D==null||!S.isValid(D))throw new Error("y required");if(x==null||!S.isValid(x))throw new Error("z required")}static fromAffine(O){const{x:D,y:x}=O||{};if(!O||!S.isValid(D)||!S.isValid(x))throw new Error("invalid affine point");if(O instanceof y)throw new Error("projective point not allowed");const F=G=>S.eql(G,S.ZERO);return F(D)&&F(x)?y.ZERO:new y(D,x,S.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(O){const D=S.invertBatch(O.map(x=>x.pz));return O.map((x,F)=>x.toAffine(D[F])).map(y.fromAffine)}static fromHex(O){const D=y.fromAffine(q((0,n.ensureBytes)("pointHex",O)));return D.assertValidity(),D}static fromPrivateKey(O){return y.BASE.multiply(ae(O))}_setWindowSize(O){this._WINDOW_SIZE=O,ee.delete(this)}assertValidity(){if(this.is0()){if(k.allowInfinityPoint&&!S.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:O,y:D}=this.toAffine();if(!S.isValid(O)||!S.isValid(D))throw new Error("bad point: x or y not FE");const x=S.sqr(D),F=re(O);if(!S.eql(x,F))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:O}=this.toAffine();if(S.isOdd)return!S.isOdd(O);throw new Error("Field doesn't support isOdd")}equals(O){g(O);const{px:D,py:x,pz:F}=this,{px:G,py:ne,pz:W}=O,ie=S.eql(S.mul(D,W),S.mul(G,F)),fe=S.eql(S.mul(x,W),S.mul(ne,F));return ie&&fe}negate(){return new y(this.px,S.neg(this.py),this.pz)}double(){const{a:O,b:D}=k,x=S.mul(D,h),{px:F,py:G,pz:ne}=this;let W=S.ZERO,ie=S.ZERO,fe=S.ZERO,ue=S.mul(F,F),ve=S.mul(G,G),ge=S.mul(ne,ne),_e=S.mul(F,G);return _e=S.add(_e,_e),fe=S.mul(F,ne),fe=S.add(fe,fe),W=S.mul(O,fe),ie=S.mul(x,ge),ie=S.add(W,ie),W=S.sub(ve,ie),ie=S.add(ve,ie),ie=S.mul(W,ie),W=S.mul(_e,W),fe=S.mul(x,fe),ge=S.mul(O,ge),_e=S.sub(ue,ge),_e=S.mul(O,_e),_e=S.add(_e,fe),fe=S.add(ue,ue),ue=S.add(fe,ue),ue=S.add(ue,ge),ue=S.mul(ue,_e),ie=S.add(ie,ue),ge=S.mul(G,ne),ge=S.add(ge,ge),ue=S.mul(ge,_e),W=S.sub(W,ue),fe=S.mul(ge,ve),fe=S.add(fe,fe),fe=S.add(fe,fe),new y(W,ie,fe)}add(O){g(O);const{px:D,py:x,pz:F}=this,{px:G,py:ne,pz:W}=O;let ie=S.ZERO,fe=S.ZERO,ue=S.ZERO;const ve=k.a,ge=S.mul(k.b,h);let _e=S.mul(D,G),Le=S.mul(x,ne),Ne=S.mul(F,W),Re=S.add(D,x),I=S.add(G,ne);Re=S.mul(Re,I),I=S.add(_e,Le),Re=S.sub(Re,I),I=S.add(D,F);let N=S.add(G,W);return I=S.mul(I,N),N=S.add(_e,Ne),I=S.sub(I,N),N=S.add(x,F),ie=S.add(ne,W),N=S.mul(N,ie),ie=S.add(Le,Ne),N=S.sub(N,ie),ue=S.mul(ve,I),ie=S.mul(ge,Ne),ue=S.add(ie,ue),ie=S.sub(Le,ue),ue=S.add(Le,ue),fe=S.mul(ie,ue),Le=S.add(_e,_e),Le=S.add(Le,_e),Ne=S.mul(ve,Ne),I=S.mul(ge,I),Le=S.add(Le,Ne),Ne=S.sub(_e,Ne),Ne=S.mul(ve,Ne),I=S.add(I,Ne),_e=S.mul(Le,I),fe=S.add(fe,_e),_e=S.mul(N,I),ie=S.mul(Re,ie),ie=S.sub(ie,_e),_e=S.mul(Re,Le),ue=S.mul(N,ue),ue=S.add(ue,_e),new y(ie,fe,ue)}subtract(O){return this.add(O.negate())}is0(){return this.equals(y.ZERO)}wNAF(O){return B.wNAFCached(this,ee,O,D=>{const x=S.invertBatch(D.map(F=>F.pz));return D.map((F,G)=>F.toAffine(x[G])).map(y.fromAffine)})}multiplyUnsafe(O){const D=y.ZERO;if(O===l)return D;if(H(O),O===u)return this;const{endo:x}=k;if(!x)return B.unsafeLadder(this,O);let{k1neg:F,k1:G,k2neg:ne,k2:W}=x.splitScalar(O),ie=D,fe=D,ue=this;for(;G>l||W>l;)G&u&&(ie=ie.add(ue)),W&u&&(fe=fe.add(ue)),ue=ue.double(),G>>=u,W>>=u;return F&&(ie=ie.negate()),ne&&(fe=fe.negate()),fe=new y(S.mul(fe.px,x.beta),fe.py,fe.pz),ie.add(fe)}multiply(O){H(O);let D=O,x,F;const{endo:G}=k;if(G){const{k1neg:ne,k1:W,k2neg:ie,k2:fe}=G.splitScalar(D);let{p:ue,f:ve}=this.wNAF(W),{p:ge,f:_e}=this.wNAF(fe);ue=B.constTimeNegate(ne,ue),ge=B.constTimeNegate(ie,ge),ge=new y(S.mul(ge.px,G.beta),ge.py,ge.pz),x=ue.add(ge),F=ve.add(_e)}else{const{p:ne,f:W}=this.wNAF(D);x=ne,F=W}return y.normalizeZ([x,F])[0]}multiplyAndAddUnsafe(O,D,x){const F=y.BASE,G=(W,ie)=>ie===l||ie===u||!W.equals(F)?W.multiplyUnsafe(ie):W.multiply(ie),ne=G(this,D).add(G(O,x));return ne.is0()?void 0:ne}toAffine(O){const{px:D,py:x,pz:F}=this,G=this.is0();O==null&&(O=G?S.ONE:S.inv(F));const ne=S.mul(D,O),W=S.mul(x,O),ie=S.mul(F,O);if(G)return{x:S.ZERO,y:S.ZERO};if(!S.eql(ie,S.ONE))throw new Error("invZ was invalid");return{x:ne,y:W}}isTorsionFree(){const{h:O,isTorsionFree:D}=k;if(O===u)return!0;if(D)return D(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:O,clearCofactor:D}=k;return O===u?this:D?D(y,this):this.multiplyUnsafe(k.h)}toRawBytes(O=!0){return this.assertValidity(),$(y,this,O)}toHex(O=!0){return r.bytesToHex(this.toRawBytes(O))}}y.BASE=new y(k.Gx,k.Gy,S.ONE),y.ZERO=new y(S.ZERO,S.ONE,S.ZERO);const w=k.nBitLength,B=(0,o.wNAF)(y,k.endo?Math.ceil(w/2):w);return{CURVE:k,ProjectivePoint:y,normPrivateKeyToScalar:ae,weierstrassEquation:re,isWithinCurveOrder:U}}e.weierstrassPoints=_;function T(P){const k=(0,o.validateBasic)(P);return r.validateObject(k,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...k})}function R(P){const k=T(P),{Fp:S,n:$}=k,q=S.BYTES+1,re=2*S.BYTES+1;function U(I){return l<I&&I<S.ORDER}function H(I){return t.mod(I,$)}function ae(I){return t.invert(I,$)}const{ProjectivePoint:ee,normPrivateKeyToScalar:g,weierstrassEquation:y,isWithinCurveOrder:w}=_({...k,toBytes(I,N,J){const ce=N.toAffine(),le=S.toBytes(ce.x),he=r.concatBytes;return J?he(Uint8Array.from([N.hasEvenY()?2:3]),le):he(Uint8Array.from([4]),le,S.toBytes(ce.y))},fromBytes(I){const N=I.length,J=I[0],ce=I.subarray(1);if(N===q&&(J===2||J===3)){const le=r.bytesToNumberBE(ce);if(!U(le))throw new Error("Point is not on curve");const he=y(le);let Te=S.sqrt(he);const xe=(Te&u)===u;return(J&1)===1!==xe&&(Te=S.neg(Te)),{x:le,y:Te}}else if(N===re&&J===4){const le=S.fromBytes(ce.subarray(0,S.BYTES)),he=S.fromBytes(ce.subarray(S.BYTES,2*S.BYTES));return{x:le,y:he}}else throw new Error(`Point of length ${N} was invalid. Expected ${q} compressed bytes or ${re} uncompressed bytes`)}}),B=I=>r.bytesToHex(r.numberToBytesBE(I,k.nByteLength));function M(I){const N=$>>u;return I>N}function O(I){return M(I)?H(-I):I}const D=(I,N,J)=>r.bytesToNumberBE(I.slice(N,J));class x{constructor(N,J,ce){this.r=N,this.s=J,this.recovery=ce,this.assertValidity()}static fromCompact(N){const J=k.nByteLength;return N=(0,n.ensureBytes)("compactSignature",N,J*2),new x(D(N,0,J),D(N,J,2*J))}static fromDER(N){const{r:J,s:ce}=e.DER.toSig((0,n.ensureBytes)("DER",N));return new x(J,ce)}assertValidity(){if(!w(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!w(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(N){return new x(this.r,this.s,N)}recoverPublicKey(N){const{r:J,s:ce,recovery:le}=this,he=fe((0,n.ensureBytes)("msgHash",N));if(le==null||![0,1,2,3].includes(le))throw new Error("recovery id invalid");const Te=le===2||le===3?J+k.n:J;if(Te>=S.ORDER)throw new Error("recovery id 2 or 3 invalid");const xe=le&1?"03":"02",Be=ee.fromHex(xe+B(Te)),we=ae(Te),Me=H(-he*we),st=H(ce*we),Je=ee.BASE.multiplyAndAddUnsafe(Be,Me,st);if(!Je)throw new Error("point at infinify");return Je.assertValidity(),Je}hasHighS(){return M(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,H(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return B(this.r)+B(this.s)}}const F={isValidPrivateKey(I){try{return g(I),!0}catch{return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const I=t.getMinHashLength(k.n);return t.mapHashToField(k.randomBytes(I),k.n)},precompute(I=8,N=ee.BASE){return N._setWindowSize(I),N.multiply(BigInt(3)),N}};function G(I,N=!0){return ee.fromPrivateKey(I).toRawBytes(N)}function ne(I){const N=r.isBytes(I),J=typeof I=="string",ce=(N||J)&&I.length;return N?ce===q||ce===re:J?ce===2*q||ce===2*re:I instanceof ee}function W(I,N,J=!0){if(ne(I))throw new Error("first arg must be private key");if(!ne(N))throw new Error("second arg must be public key");return ee.fromHex(N).multiply(g(I)).toRawBytes(J)}const ie=k.bits2int||function(I){const N=r.bytesToNumberBE(I),J=I.length*8-k.nBitLength;return J>0?N>>BigInt(J):N},fe=k.bits2int_modN||function(I){return H(ie(I))},ue=r.bitMask(k.nBitLength);function ve(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(l<=I&&I<ue))throw new Error(`bigint expected < 2^${k.nBitLength}`);return r.numberToBytesBE(I,k.nByteLength)}function ge(I,N,J=_e){if(["recovered","canonical"].some(at=>at in J))throw new Error("sign() legacy options not supported");const{hash:ce,randomBytes:le}=k;let{lowS:he,prehash:Te,extraEntropy:xe}=J;he==null&&(he=!0),I=(0,n.ensureBytes)("msgHash",I),Te&&(I=(0,n.ensureBytes)("prehashed msgHash",ce(I)));const Be=fe(I),we=g(N),Me=[ve(we),ve(Be)];if(xe!=null){const at=xe===!0?le(S.BYTES):xe;Me.push((0,n.ensureBytes)("extraEntropy",at))}const st=r.concatBytes(...Me),Je=Be;function vt(at){const Ue=ie(at);if(!w(Ue))return;const Qe=ae(Ue),et=ee.BASE.multiply(Ue).toAffine(),v=H(et.x);if(v===l)return;const oe=H(Qe*H(Je+v*we));if(oe===l)return;let de=(et.x===v?0:2)|Number(et.y&u),ye=oe;return he&&M(oe)&&(ye=O(oe),de^=1),new x(v,ye,de)}return{seed:st,k2sig:vt}}const _e={lowS:k.lowS,prehash:!1},Le={lowS:k.lowS,prehash:!1};function Ne(I,N,J=_e){const{seed:ce,k2sig:le}=ge(I,N,J),he=k;return r.createHmacDrbg(he.hash.outputLen,he.nByteLength,he.hmac)(ce,le)}ee.BASE._setWindowSize(8);function Re(I,N,J,ce=Le){var le;const he=I;if(N=(0,n.ensureBytes)("msgHash",N),J=(0,n.ensureBytes)("publicKey",J),"strict"in ce)throw new Error("options.strict was renamed to lowS");const{lowS:Te,prehash:xe}=ce;let Be,we;try{if(typeof he=="string"||r.isBytes(he))try{Be=x.fromDER(he)}catch(et){if(!(et instanceof e.DER.Err))throw et;Be=x.fromCompact(he)}else if(typeof he=="object"&&typeof he.r=="bigint"&&typeof he.s=="bigint"){const{r:et,s:v}=he;Be=new x(et,v)}else throw new Error("PARSE");we=ee.fromHex(J)}catch(et){if(et.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Te&&Be.hasHighS())return!1;xe&&(N=k.hash(N));const{r:Me,s:st}=Be,Je=fe(N),vt=ae(st),at=H(Je*vt),Ue=H(Me*vt),Qe=(le=ee.BASE.multiplyAndAddUnsafe(we,at,Ue))==null?void 0:le.toAffine();return Qe?H(Qe.x)===Me:!1}return{CURVE:k,getPublicKey:G,getSharedSecret:W,sign:Ne,verify:Re,ProjectivePoint:ee,Signature:x,utils:F}}e.weierstrass=R;function L(P,k){const S=P.ORDER;let $=l;for(let M=S-u;M%f===l;M/=f)$+=u;const q=$,re=f<<q-u-u,U=re*f,H=(S-u)/U,ae=(H-u)/f,ee=U-u,g=re,y=P.pow(k,H),w=P.pow(k,(H+u)/f);let B=(M,O)=>{let D=y,x=P.pow(O,ee),F=P.sqr(x);F=P.mul(F,O);let G=P.mul(M,F);G=P.pow(G,ae),G=P.mul(G,x),x=P.mul(G,O),F=P.mul(G,M);let ne=P.mul(F,x);G=P.pow(ne,g);let W=P.eql(G,P.ONE);x=P.mul(F,w),G=P.mul(ne,D),F=P.cmov(x,F,W),ne=P.cmov(G,ne,W);for(let ie=q;ie>u;ie--){let fe=ie-f;fe=f<<fe-u;let ue=P.pow(ne,fe);const ve=P.eql(ue,P.ONE);x=P.mul(F,D),D=P.mul(D,D),ue=P.mul(ne,D),F=P.cmov(x,F,ve),ne=P.cmov(ue,ne,ve)}return{isValid:W,value:F}};if(P.ORDER%d===h){const M=(P.ORDER-h)/d,O=P.sqrt(P.neg(k));B=(D,x)=>{let F=P.sqr(x);const G=P.mul(D,x);F=P.mul(F,G);let ne=P.pow(F,M);ne=P.mul(ne,G);const W=P.mul(ne,O),ie=P.mul(P.sqr(ne),x),fe=P.eql(ie,D);let ue=P.cmov(W,ne,fe);return{isValid:fe,value:ue}}}return B}e.SWUFpSqrtRatio=L;function V(P,k){if(t.validateField(P),!P.isValid(k.A)||!P.isValid(k.B)||!P.isValid(k.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const S=L(P,k.Z);if(!P.isOdd)throw new Error("Fp.isOdd is not implemented!");return $=>{let q,re,U,H,ae,ee,g,y;q=P.sqr($),q=P.mul(q,k.Z),re=P.sqr(q),re=P.add(re,q),U=P.add(re,P.ONE),U=P.mul(U,k.B),H=P.cmov(k.Z,P.neg(re),!P.eql(re,P.ZERO)),H=P.mul(H,k.A),re=P.sqr(U),ee=P.sqr(H),ae=P.mul(ee,k.A),re=P.add(re,ae),re=P.mul(re,U),ee=P.mul(ee,H),ae=P.mul(ee,k.B),re=P.add(re,ae),g=P.mul(q,U);const{isValid:w,value:B}=S(re,ee);y=P.mul(q,$),y=P.mul(y,B),g=P.cmov(g,U,w),y=P.cmov(y,B,w);const M=P.isOdd($)===P.isOdd(y);return y=P.cmov(P.neg(y),y,M),g=P.div(g,H),{x:g,y}}}e.mapToCurveSimpleSWU=V})(ya);var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.createHasher=Dt.isogenyMap=Dt.hash_to_field=Dt.expand_message_xof=Dt.expand_message_xmd=void 0;const Lv=Ce,kt=Pe;function Nv(e){if((0,kt.isBytes)(e))return e;if(typeof e=="string")return(0,kt.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}const Cv=kt.bytesToNumberBE;function _r(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=e&255,e>>>=8;return new Uint8Array(r)}function Bv(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function $n(e){if(!(0,kt.isBytes)(e))throw new Error("Uint8Array expected")}function _a(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Xf(e,t,r,n){$n(e),$n(t),_a(r),t.length>255&&(t=n((0,kt.concatBytes)((0,kt.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:o,blockLen:i}=n,s=Math.ceil(r/o);if(s>255)throw new Error("Invalid xmd length");const c=(0,kt.concatBytes)(t,_r(t.length,1)),l=_r(0,i),u=_r(r,2),f=new Array(s),h=n((0,kt.concatBytes)(l,e,u,_r(0,1),c));f[0]=n((0,kt.concatBytes)(h,_r(1,1),c));for(let d=1;d<=s;d++){const _=[Bv(h,f[d-1]),_r(d+1,1),c];f[d]=n((0,kt.concatBytes)(..._))}return(0,kt.concatBytes)(...f).slice(0,r)}Dt.expand_message_xmd=Xf;function Yf(e,t,r,n,o){if($n(e),$n(t),_a(r),t.length>255){const i=Math.ceil(2*n/8);t=o.create({dkLen:i}).update((0,kt.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return o.create({dkLen:r}).update(e).update(_r(r,2)).update(t).update(_r(t.length,1)).digest()}Dt.expand_message_xof=Yf;function Rs(e,t,r){(0,kt.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:o,m:i,hash:s,expand:c,DST:l}=r;$n(e),_a(t);const u=Nv(l),f=n.toString(2).length,h=Math.ceil((f+o)/8),d=t*i*h;let _;if(c==="xmd")_=Xf(e,u,d,s);else if(c==="xof")_=Yf(e,u,d,o,s);else if(c==="_internal_pass")_=e;else throw new Error('expand must be "xmd" or "xof"');const T=new Array(t);for(let R=0;R<t;R++){const L=new Array(i);for(let V=0;V<i;V++){const P=h*(V+R*i),k=_.subarray(P,P+h);L[V]=(0,Lv.mod)(Cv(k),n)}T[R]=L}return T}Dt.hash_to_field=Rs;function jv(e,t){const r=t.map(n=>Array.from(n).reverse());return(n,o)=>{const[i,s,c,l]=r.map(u=>u.reduce((f,h)=>e.add(e.mul(f,n),h)));return n=e.div(i,s),o=e.mul(o,e.div(c,l)),{x:n,y:o}}}Dt.isogenyMap=jv;function $v(e,t,r){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,o){const i=Rs(n,2,{...r,DST:r.DST,...o}),s=e.fromAffine(t(i[0])),c=e.fromAffine(t(i[1])),l=s.add(c).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,o){const i=Rs(n,1,{...r,DST:r.encodeDST,...o}),s=e.fromAffine(t(i[0])).clearCofactor();return s.assertValidity(),s}}}Dt.createHasher=$v;var sn={},Qf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;const t=ht,r=pr;class n extends r.Hash{constructor(s,c){super(),this.finished=!1,this.destroyed=!1,(0,t.hash)(s);const l=(0,r.toBytes)(c);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,f=new Uint8Array(u);f.set(l.length>u?s.create().update(l).digest():l);for(let h=0;h<f.length;h++)f[h]^=54;this.iHash.update(f),this.oHash=s.create();for(let h=0;h<f.length;h++)f[h]^=106;this.oHash.update(f),f.fill(0)}update(s){return(0,t.exists)(this),this.iHash.update(s),this}digestInto(s){(0,t.exists)(this),(0,t.bytes)(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:c,iHash:l,finished:u,destroyed:f,blockLen:h,outputLen:d}=this;return s=s,s.finished=u,s.destroyed=f,s.blockLen=h,s.outputLen=d,s.oHash=c._cloneInto(s.oHash),s.iHash=l._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=n;const o=(i,s,c)=>new n(i,s).update(c).digest();e.hmac=o,e.hmac.create=(i,s)=>new n(i,s)})(Qf);Object.defineProperty(sn,"__esModule",{value:!0});sn.createCurve=sn.getHash=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dv=Qf,cu=pr,Mv=ya;function ed(e){return{hash:e,hmac:(t,...r)=>(0,Dv.hmac)(e,t,(0,cu.concatBytes)(...r)),randomBytes:cu.randomBytes}}sn.getHash=ed;function Fv(e,t){const r=n=>(0,Mv.weierstrass)({...e,...ed(n)});return Object.freeze({...r(t),create:r})}sn.createCurve=Fv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=nn,r=pr,n=Ce,o=ya,i=Pe,s=Dt,c=sn,l=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),u=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),f=BigInt(1),h=BigInt(2),d=(x,F)=>(x+F/h)/F;function _(x){const F=l,G=BigInt(3),ne=BigInt(6),W=BigInt(11),ie=BigInt(22),fe=BigInt(23),ue=BigInt(44),ve=BigInt(88),ge=x*x*x%F,_e=ge*ge*x%F,Le=(0,n.pow2)(_e,G,F)*_e%F,Ne=(0,n.pow2)(Le,G,F)*_e%F,Re=(0,n.pow2)(Ne,h,F)*ge%F,I=(0,n.pow2)(Re,W,F)*Re%F,N=(0,n.pow2)(I,ie,F)*I%F,J=(0,n.pow2)(N,ue,F)*N%F,ce=(0,n.pow2)(J,ve,F)*J%F,le=(0,n.pow2)(ce,ue,F)*N%F,he=(0,n.pow2)(le,G,F)*_e%F,Te=(0,n.pow2)(he,fe,F)*I%F,xe=(0,n.pow2)(Te,ne,F)*ge%F,Be=(0,n.pow2)(xe,h,F);if(!T.eql(T.sqr(Be),x))throw new Error("Cannot find square root");return Be}const T=(0,n.Field)(l,void 0,void 0,{sqrt:_});e.secp256k1=(0,c.createCurve)({a:BigInt(0),b:BigInt(7),Fp:T,n:u,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:x=>{const F=u,G=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),ne=-f*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),W=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),ie=G,fe=BigInt("0x100000000000000000000000000000000"),ue=d(ie*x,F),ve=d(-ne*x,F);let ge=(0,n.mod)(x-ue*G-ve*W,F),_e=(0,n.mod)(-ue*ne-ve*ie,F);const Le=ge>fe,Ne=_e>fe;if(Le&&(ge=F-ge),Ne&&(_e=F-_e),ge>fe||_e>fe)throw new Error("splitScalar: Endomorphism failed, k="+x);return{k1neg:Le,k1:ge,k2neg:Ne,k2:_e}}}},t.sha256);const R=BigInt(0),L=x=>typeof x=="bigint"&&R<x&&x<l,V=x=>typeof x=="bigint"&&R<x&&x<u,P={};function k(x,...F){let G=P[x];if(G===void 0){const ne=(0,t.sha256)(Uint8Array.from(x,W=>W.charCodeAt(0)));G=(0,i.concatBytes)(ne,ne),P[x]=G}return(0,t.sha256)((0,i.concatBytes)(G,...F))}const S=x=>x.toRawBytes(!0).slice(1),$=x=>(0,i.numberToBytesBE)(x,32),q=x=>(0,n.mod)(x,l),re=x=>(0,n.mod)(x,u),U=e.secp256k1.ProjectivePoint,H=(x,F,G)=>U.BASE.multiplyAndAddUnsafe(x,F,G);function ae(x){let F=e.secp256k1.utils.normPrivateKeyToScalar(x),G=U.fromPrivateKey(F);return{scalar:G.hasEvenY()?F:re(-F),bytes:S(G)}}function ee(x){if(!L(x))throw new Error("bad x: need 0 < x < p");const F=q(x*x),G=q(F*x+BigInt(7));let ne=_(G);ne%h!==R&&(ne=q(-ne));const W=new U(x,ne,f);return W.assertValidity(),W}function g(...x){return re((0,i.bytesToNumberBE)(k("BIP0340/challenge",...x)))}function y(x){return ae(x).bytes}function w(x,F,G=(0,r.randomBytes)(32)){const ne=(0,i.ensureBytes)("message",x),{bytes:W,scalar:ie}=ae(F),fe=(0,i.ensureBytes)("auxRand",G,32),ue=$(ie^(0,i.bytesToNumberBE)(k("BIP0340/aux",fe))),ve=k("BIP0340/nonce",ue,W,ne),ge=re((0,i.bytesToNumberBE)(ve));if(ge===R)throw new Error("sign failed: k is zero");const{bytes:_e,scalar:Le}=ae(ge),Ne=g(_e,W,ne),Re=new Uint8Array(64);if(Re.set(_e,0),Re.set($(re(Le+Ne*ie)),32),!B(Re,ne,W))throw new Error("sign: Invalid signature produced");return Re}function B(x,F,G){const ne=(0,i.ensureBytes)("signature",x,64),W=(0,i.ensureBytes)("message",F),ie=(0,i.ensureBytes)("publicKey",G,32);try{const fe=ee((0,i.bytesToNumberBE)(ie)),ue=(0,i.bytesToNumberBE)(ne.subarray(0,32));if(!L(ue))return!1;const ve=(0,i.bytesToNumberBE)(ne.subarray(32,64));if(!V(ve))return!1;const ge=g($(ue),S(fe),W),_e=H(fe,ve,re(-ge));return!(!_e||!_e.hasEvenY()||_e.toAffine().x!==ue)}catch{return!1}}e.schnorr={getPublicKey:y,sign:w,verify:B,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:ee,pointToBytes:S,numberToBytesBE:i.numberToBytesBE,bytesToNumberBE:i.bytesToNumberBE,taggedHash:k,mod:n.mod}};const M=(0,s.isogenyMap)(T,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(x=>x.map(F=>BigInt(F)))),O=(0,o.mapToCurveSimpleSWU)(T,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:T.create(BigInt("-11"))}),D=(0,s.createHasher)(e.secp256k1.ProjectivePoint,x=>{const{x:F,y:G}=O(T.create(x[0]));return M(F,G)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:T.ORDER,m:1,k:128,expand:"xmd",hash:t.sha256});e.hashToCurve=D.hashToCurve,e.encodeToCurve=D.encodeToCurve})(Bf);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.secp256k1=void 0;var t=Bf;Object.defineProperty(e,"secp256k1",{enumerable:!0,get:function(){return t.secp256k1}})})(Jo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_WITHDRAWALS_PER_PAYLOAD=e.RLP_EMPTY_STRING=e.KECCAK256_RLP=e.KECCAK256_RLP_S=e.KECCAK256_RLP_ARRAY=e.KECCAK256_RLP_ARRAY_S=e.KECCAK256_NULL=e.KECCAK256_NULL_S=e.TWO_POW256=e.SECP256K1_ORDER_DIV_2=e.SECP256K1_ORDER=e.MAX_INTEGER_BIGINT=e.MAX_INTEGER=e.MAX_UINT64=void 0;const t=ir,r=Jo;e.MAX_UINT64=BigInt("0xffffffffffffffff"),e.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),e.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),e.SECP256K1_ORDER=r.secp256k1.CURVE.n,e.SECP256K1_ORDER_DIV_2=r.secp256k1.CURVE.n/BigInt(2),e.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),e.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",e.KECCAK256_NULL=t.Buffer.from(e.KECCAK256_NULL_S,"hex"),e.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",e.KECCAK256_RLP_ARRAY=t.Buffer.from(e.KECCAK256_RLP_ARRAY_S,"hex"),e.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",e.KECCAK256_RLP=t.Buffer.from(e.KECCAK256_RLP_S,"hex"),e.RLP_EMPTY_STRING=t.Buffer.from([128]),e.MAX_WITHDRAWALS_PER_PAYLOAD=16})(Zo);var ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.GWEI_TO_WEI=void 0;ei.GWEI_TO_WEI=BigInt(1e9);var wa={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.RLP=tr.utils=tr.decode=tr.encode=void 0;function va(e){if(Array.isArray(e)){const r=[];let n=0;for(let o=0;o<e.length;o++){const i=va(e[o]);r.push(i),n+=i.length}return Is(du(n,192),...r)}const t=sd(e);return t.length===1&&t[0]<128?t:Is(du(t.length,128),t)}tr.encode=va;function qr(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function fu(e){if(e[0]===0)throw new Error("invalid RLP: extra zeros");return nd(rd(e))}function du(e,t){if(e<56)return Uint8Array.from([e+t]);const r=Ts(e),n=r.length/2,o=Ts(t+55+n);return Uint8Array.from(vo(o+r))}function td(e,t=!1){if(typeof e>"u"||e===null||e.length===0)return Uint8Array.from([]);const r=sd(e),n=As(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return n.data}tr.decode=td;function As(e){let t,r,n,o,i;const s=[],c=e[0];if(c<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(c<=183){if(t=c-127,c===128?n=Uint8Array.from([]):n=qr(e,1,t),t===2&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}else if(c<=191){if(r=c-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=fu(qr(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=qr(e,r,t+r),{data:n,remainder:e.slice(t+r)}}else if(c<=247){for(t=c-191,o=qr(e,1,t);o.length;)i=As(o),s.push(i.data),o=i.remainder;return{data:s,remainder:e.slice(t)}}else{if(r=c-246,t=fu(qr(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const l=r+t;if(l>e.length)throw new Error("invalid RLP: total length is larger than the data");for(o=qr(e,r,l);o.length;)i=As(o),s.push(i.data),o=i.remainder;return{data:s,remainder:e.slice(l)}}}const Uv=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function rd(e){let t="";for(let r=0;r<e.length;r++)t+=Uv[e[r]];return t}function nd(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function vo(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=r*2;t[r]=nd(e.slice(n,n+2))}return t}function Is(...e){if(e.length===1)return e[0];const t=e.reduce((n,o)=>n+o.length,0),r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){const i=e[n];r.set(i,o),o+=i.length}return r}function od(e){return new TextEncoder().encode(e)}function Ts(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function Hv(e){return e.length%2?`0${e}`:e}function id(e){return e.length>=2&&e[0]==="0"&&e[1]==="x"}function zv(e){return typeof e!="string"?e:id(e)?e.slice(2):e}function sd(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return id(e)?vo(Hv(zv(e))):od(e);if(typeof e=="number"||typeof e=="bigint")return e?vo(Ts(e)):Uint8Array.from([]);if(e==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}tr.utils={bytesToHex:rd,concatBytes:Is,hexToBytes:vo,utf8ToBytes:od};tr.RLP={encode:va,decode:td};var Vt={},qe={},ke={};Object.defineProperty(ke,"__esModule",{value:!0});ke.add5L=ke.add5H=ke.add4H=ke.add4L=ke.add3H=ke.add3L=ke.add=ke.rotlBL=ke.rotlBH=ke.rotlSL=ke.rotlSH=ke.rotr32L=ke.rotr32H=ke.rotrBL=ke.rotrBH=ke.rotrSL=ke.rotrSH=ke.shrSL=ke.shrSH=ke.toBig=ke.split=ke.fromBig=void 0;const ao=BigInt(2**32-1),Os=BigInt(32);function Ea(e,t=!1){return t?{h:Number(e&ao),l:Number(e>>Os&ao)}:{h:Number(e>>Os&ao)|0,l:Number(e&ao)|0}}ke.fromBig=Ea;function ad(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:s}=Ea(e[o],t);[r[o],n[o]]=[i,s]}return[r,n]}ke.split=ad;const ld=(e,t)=>BigInt(e>>>0)<<Os|BigInt(t>>>0);ke.toBig=ld;const ud=(e,t,r)=>e>>>r;ke.shrSH=ud;const cd=(e,t,r)=>e<<32-r|t>>>r;ke.shrSL=cd;const fd=(e,t,r)=>e>>>r|t<<32-r;ke.rotrSH=fd;const dd=(e,t,r)=>e<<32-r|t>>>r;ke.rotrSL=dd;const hd=(e,t,r)=>e<<64-r|t>>>r-32;ke.rotrBH=hd;const pd=(e,t,r)=>e>>>r-32|t<<64-r;ke.rotrBL=pd;const gd=(e,t)=>t;ke.rotr32H=gd;const bd=(e,t)=>e;ke.rotr32L=bd;const md=(e,t,r)=>e<<r|t>>>32-r;ke.rotlSH=md;const yd=(e,t,r)=>t<<r|e>>>32-r;ke.rotlSL=yd;const _d=(e,t,r)=>t<<r-32|e>>>64-r;ke.rotlBH=_d;const wd=(e,t,r)=>e<<r-32|t>>>64-r;ke.rotlBL=wd;function vd(e,t,r,n){const o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}ke.add=vd;const Ed=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);ke.add3L=Ed;const Sd=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;ke.add3H=Sd;const Rd=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);ke.add4L=Rd;const Ad=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0;ke.add4H=Ad;const Id=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0);ke.add5L=Id;const Td=(e,t,r,n,o,i)=>t+r+n+o+i+(e/2**32|0)|0;ke.add5H=Td;const Wv={fromBig:Ea,split:ad,toBig:ld,shrSH:ud,shrSL:cd,rotrSH:fd,rotrSL:dd,rotrBH:hd,rotrBL:pd,rotr32H:gd,rotr32L:bd,rotlSH:md,rotlSL:yd,rotlBH:_d,rotlBL:wd,add:vd,add3L:Ed,add3H:Sd,add4L:Rd,add4H:Ad,add5H:Td,add5L:Id};ke.default=Wv;Object.defineProperty(qe,"__esModule",{value:!0});qe.shake256=qe.shake128=qe.keccak_512=qe.keccak_384=qe.keccak_256=qe.keccak_224=qe.sha3_512=qe.sha3_384=qe.sha3_256=qe.sha3_224=qe.Keccak=qe.keccakP=void 0;const Vr=ht,Dn=ke,kn=pr,[Od,xd,kd]=[[],[],[]],qv=BigInt(0),Sn=BigInt(1),Vv=BigInt(2),Gv=BigInt(7),Zv=BigInt(256),Jv=BigInt(113);for(let e=0,t=Sn,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],Od.push(2*(5*n+r)),xd.push((e+1)*(e+2)/2%64);let o=qv;for(let i=0;i<7;i++)t=(t<<Sn^(t>>Gv)*Jv)%Zv,t&Vv&&(o^=Sn<<(Sn<<BigInt(i))-Sn);kd.push(o)}const[Kv,Xv]=(0,Dn.split)(kd,!0),hu=(e,t,r)=>r>32?(0,Dn.rotlBH)(e,t,r):(0,Dn.rotlSH)(e,t,r),pu=(e,t,r)=>r>32?(0,Dn.rotlBL)(e,t,r):(0,Dn.rotlSL)(e,t,r);function Pd(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let s=0;s<10;s++)r[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){const c=(s+8)%10,l=(s+2)%10,u=r[l],f=r[l+1],h=hu(u,f,1)^r[c],d=pu(u,f,1)^r[c+1];for(let _=0;_<50;_+=10)e[s+_]^=h,e[s+_+1]^=d}let o=e[2],i=e[3];for(let s=0;s<24;s++){const c=xd[s],l=hu(o,i,c),u=pu(o,i,c),f=Od[s];o=e[f],i=e[f+1],e[f]=l,e[f+1]=u}for(let s=0;s<50;s+=10){for(let c=0;c<10;c++)r[c]=e[s+c];for(let c=0;c<10;c++)e[s+c]^=~r[(c+2)%10]&r[(c+4)%10]}e[0]^=Kv[n],e[1]^=Xv[n]}r.fill(0)}qe.keccakP=Pd;class Gn extends kn.Hash{constructor(t,r,n,o=!1,i=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=o,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,Vr.number)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,kn.u32)(this.state)}keccak(){Pd(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){(0,Vr.exists)(this);const{blockLen:r,state:n}=this;t=(0,kn.toBytes)(t);const o=t.length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);for(let c=0;c<s;c++)n[this.pos++]^=t[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:r,pos:n,blockLen:o}=this;t[n]^=r,r&128&&n===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){(0,Vr.exists)(this,!1),(0,Vr.bytes)(t),this.finish();const r=this.state,{blockLen:n}=this;for(let o=0,i=t.length;o<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-o);t.set(r.subarray(this.posOut,this.posOut+s),o),this.posOut+=s,o+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,Vr.number)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,Vr.output)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:r,suffix:n,outputLen:o,rounds:i,enableXOF:s}=this;return t||(t=new Gn(r,n,o,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=o,t.enableXOF=s,t.destroyed=this.destroyed,t}}qe.Keccak=Gn;const Ir=(e,t,r)=>(0,kn.wrapConstructor)(()=>new Gn(t,e,r));qe.sha3_224=Ir(6,144,224/8);qe.sha3_256=Ir(6,136,256/8);qe.sha3_384=Ir(6,104,384/8);qe.sha3_512=Ir(6,72,512/8);qe.keccak_224=Ir(1,144,224/8);qe.keccak_256=Ir(1,136,256/8);qe.keccak_384=Ir(1,104,384/8);qe.keccak_512=Ir(1,72,512/8);const Ld=(e,t,r)=>(0,kn.wrapXOFConstructorWithOpts)((n={})=>new Gn(t,e,n.dkLen===void 0?r:n.dkLen,!0));qe.shake128=Ld(31,168,128/8);qe.shake256=Ld(31,136,256/8);var Eo={exports:{}};Eo.exports;(function(e,t){var r=rt&&rt.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.wrapHash=t.equalsBytes=t.hexToBytes=t.bytesToUtf8=t.utf8ToBytes=t.createView=t.concatBytes=t.toHex=t.bytesToHex=t.assertBytes=t.assertBool=void 0;const n=r(ht),o=pr,i=n.default.bool;t.assertBool=i;const s=n.default.bytes;t.assertBytes=s;var c=pr;Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}});function l(d){if(!(d instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof d}`);return new TextDecoder().decode(d)}t.bytesToUtf8=l;function u(d){const _=d.startsWith("0x")?d.substring(2):d;return(0,o.hexToBytes)(_)}t.hexToBytes=u;function f(d,_){if(d.length!==_.length)return!1;for(let T=0;T<d.length;T++)if(d[T]!==_[T])return!1;return!0}t.equalsBytes=f;function h(d){return _=>(n.default.bytes(_),d(_))}t.wrapHash=h,t.crypto=(()=>{const d=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,_=typeof Ma=="function"&&Ma.bind(e);return{node:_&&!d?_("crypto"):void 0,web:d}})()})(Eo,Eo.exports);var Nd=Eo.exports;Object.defineProperty(Vt,"__esModule",{value:!0});Vt.keccak512=Vt.keccak384=Vt.keccak256=Vt.keccak224=void 0;const Mn=qe,ti=Nd;Vt.keccak224=(0,ti.wrapHash)(Mn.keccak_224);Vt.keccak256=(()=>{const e=(0,ti.wrapHash)(Mn.keccak_256);return e.create=Mn.keccak_256.create,e})();Vt.keccak384=(0,ti.wrapHash)(Mn.keccak_384);Vt.keccak512=(0,ti.wrapHash)(Mn.keccak_512);var zr={},Mt={},Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.isHexString=Ve.getKeys=Ve.fromAscii=Ve.fromUtf8=Ve.toAscii=Ve.arrayContainsArray=Ve.getBinarySize=Ve.padToEven=Ve.stripHexPrefix=Ve.isHexPrefixed=void 0;function Cd(e){if(typeof e!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof e}`);return e[0]==="0"&&e[1]==="x"}Ve.isHexPrefixed=Cd;const Yv=e=>{if(typeof e!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof e}`);return Cd(e)?e.slice(2):e};Ve.stripHexPrefix=Yv;function Bd(e){let t=e;if(typeof t!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof t}`);return t.length%2&&(t=`0${t}`),t}Ve.padToEven=Bd;function Qv(e){if(typeof e!="string")throw new Error(`[getBinarySize] method requires input type 'string', received ${typeof e}`);return me.Buffer.byteLength(e,"utf8")}Ve.getBinarySize=Qv;function eE(e,t,r){if(Array.isArray(e)!==!0)throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(Array.isArray(t)!==!0)throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[r===!0?"some":"every"](n=>e.indexOf(n)>=0)}Ve.arrayContainsArray=eE;function tE(e){let t="",r=0;const n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){const o=parseInt(e.substr(r,2),16);t+=String.fromCharCode(o)}return t}Ve.toAscii=tE;function rE(e){const t=me.Buffer.from(e,"utf8");return`0x${Bd(t.toString("hex")).replace(/^0+|0+$/g,"")}`}Ve.fromUtf8=rE;function nE(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`}Ve.fromAscii=nE;function oE(e,t,r){if(!Array.isArray(e))throw new Error(`[getKeys] method expects input 'params' to be an array, got ${typeof e}`);if(typeof t!="string")throw new Error(`[getKeys] method expects input 'key' to be type 'string', got ${typeof e}`);const n=[];for(let o=0;o<e.length;o++){let i=e[o][t];if(r===!0&&!i)i="";else if(typeof i!="string")throw new Error(`invalid abi - expected type 'string', received ${typeof i}`);n.push(i)}return n}Ve.getKeys=oE;function iE(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||typeof t<"u"&&t>0&&e.length!==2+2*t)}Ve.isHexString=iE;Object.defineProperty(Mt,"__esModule",{value:!0});Mt.assertIsString=Mt.assertIsArray=Mt.assertIsBuffer=Mt.assertIsHexString=void 0;const sE=Ve,aE=function(e){if(!(0,sE.isHexString)(e)){const t=`This method only supports 0x-prefixed hex strings but input was: ${e}`;throw new Error(t)}};Mt.assertIsHexString=aE;const lE=function(e){if(!me.Buffer.isBuffer(e)){const t=`This method only supports Buffer but input was: ${e}`;throw new Error(t)}};Mt.assertIsBuffer=lE;const uE=function(e){if(!Array.isArray(e)){const t=`This method only supports number arrays but input was: ${e}`;throw new Error(t)}};Mt.assertIsArray=uE;const cE=function(e){if(typeof e!="string"){const t=`This method only supports strings but input was: ${e}`;throw new Error(t)}};Mt.assertIsString=cE;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.intToUnpaddedBuffer=e.bigIntToUnpaddedBuffer=e.bigIntToHex=e.bufArrToArr=e.arrToBufArr=e.validateNoLeadingZeroes=e.baToJSON=e.toUtf8=e.short=e.addHexPrefix=e.toUnsigned=e.fromSigned=e.bufferToInt=e.bigIntToBuffer=e.bufferToBigInt=e.bufferToHex=e.toBuffer=e.unpadHexString=e.unpadArray=e.unpadBuffer=e.setLengthRight=e.setLengthLeft=e.zeros=e.intToBuffer=e.intToHex=void 0;const t=Mt,r=Ve,n=function(w){if(!Number.isSafeInteger(w)||w<0)throw new Error(`Received an invalid integer type: ${w}`);return`0x${w.toString(16)}`};e.intToHex=n;const o=function(w){const B=(0,e.intToHex)(w);return me.Buffer.from((0,r.padToEven)(B.slice(2)),"hex")};e.intToBuffer=o;const i=function(w){return me.Buffer.allocUnsafe(w).fill(0)};e.zeros=i;const s=function(w,B,M){const O=(0,e.zeros)(B);return M?w.length<B?(w.copy(O),O):w.slice(0,B):w.length<B?(w.copy(O,B-w.length),O):w.slice(-B)},c=function(w,B){return(0,t.assertIsBuffer)(w),s(w,B,!1)};e.setLengthLeft=c;const l=function(w,B){return(0,t.assertIsBuffer)(w),s(w,B,!0)};e.setLengthRight=l;const u=function(w){let B=w[0];for(;w.length>0&&B.toString()==="0";)w=w.slice(1),B=w[0];return w},f=function(w){return(0,t.assertIsBuffer)(w),u(w)};e.unpadBuffer=f;const h=function(w){return(0,t.assertIsArray)(w),u(w)};e.unpadArray=h;const d=function(w){return(0,t.assertIsHexString)(w),w=(0,r.stripHexPrefix)(w),"0x"+u(w)};e.unpadHexString=d;const _=function(w){if(w==null)return me.Buffer.allocUnsafe(0);if(me.Buffer.isBuffer(w))return me.Buffer.from(w);if(Array.isArray(w)||w instanceof Uint8Array)return me.Buffer.from(w);if(typeof w=="string"){if(!(0,r.isHexString)(w))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${w}`);return me.Buffer.from((0,r.padToEven)((0,r.stripHexPrefix)(w)),"hex")}if(typeof w=="number")return(0,e.intToBuffer)(w);if(typeof w=="bigint"){if(w<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${w}`);let B=w.toString(16);return B.length%2&&(B="0"+B),me.Buffer.from(B,"hex")}if(w.toArray)return me.Buffer.from(w.toArray());if(w.toBuffer)return me.Buffer.from(w.toBuffer());throw new Error("invalid type")};e.toBuffer=_;const T=function(w){return w=(0,e.toBuffer)(w),"0x"+w.toString("hex")};e.bufferToHex=T;function R(w){const B=(0,e.bufferToHex)(w);return BigInt(B==="0x"?0:B)}e.bufferToBigInt=R;function L(w){return(0,e.toBuffer)("0x"+w.toString(16))}e.bigIntToBuffer=L;const V=function(w){const B=Number(R(w));if(!Number.isSafeInteger(B))throw new Error("Number exceeds 53 bits");return B};e.bufferToInt=V;const P=function(w){return BigInt.asIntN(256,R(w))};e.fromSigned=P;const k=function(w){return L(BigInt.asUintN(256,w))};e.toUnsigned=k;const S=function(w){return typeof w!="string"||(0,r.isHexPrefixed)(w)?w:"0x"+w};e.addHexPrefix=S;function $(w,B=50){const M=me.Buffer.isBuffer(w)?w.toString("hex"):w;return M.length<=B?M:M.slice(0,B)+""}e.short=$;const q=function(w){const B=/^(00)+|(00)+$/g;if(w=(0,r.stripHexPrefix)(w),w.length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return me.Buffer.from(w.replace(B,""),"hex").toString("utf8")};e.toUtf8=q;const re=function(w){if(me.Buffer.isBuffer(w))return`0x${w.toString("hex")}`;if(w instanceof Array){const B=[];for(let M=0;M<w.length;M++)B.push((0,e.baToJSON)(w[M]));return B}};e.baToJSON=re;const U=function(w){for(const[B,M]of Object.entries(w))if(M!==void 0&&M.length>0&&M[0]===0)throw new Error(`${B} cannot have leading zeroes, received: ${M.toString("hex")}`)};e.validateNoLeadingZeroes=U;function H(w){return Array.isArray(w)?w.map(B=>H(B)):me.Buffer.from(w)}e.arrToBufArr=H;function ae(w){return Array.isArray(w)?w.map(B=>ae(B)):Uint8Array.from(w??[])}e.bufArrToArr=ae;const ee=w=>"0x"+w.toString(16);e.bigIntToHex=ee;function g(w){return(0,e.unpadBuffer)(L(w))}e.bigIntToUnpaddedBuffer=g;function y(w){return(0,e.unpadBuffer)((0,e.intToBuffer)(w))}e.intToUnpaddedBuffer=y})(zr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.accountBodyToRLP=e.accountBodyToSlim=e.accountBodyFromSlim=e.isZeroAddress=e.zeroAddress=e.importPublic=e.privateToAddress=e.privateToPublic=e.publicToAddress=e.pubToAddress=e.isValidPublic=e.isValidPrivate=e.generateAddress2=e.generateAddress=e.isValidChecksumAddress=e.toChecksumAddress=e.isValidAddress=e.Account=void 0;const t=tr,r=Vt,n=Jo,o=Nd,i=zr,s=Zo,c=Mt,l=Ve,u=BigInt(0);class f{constructor(y=u,w=u,B=s.KECCAK256_RLP,M=s.KECCAK256_NULL){this.nonce=y,this.balance=w,this.storageRoot=B,this.codeHash=M,this._validate()}static fromAccountData(y){const{nonce:w,balance:B,storageRoot:M,codeHash:O}=y;return new f(w!==void 0?(0,i.bufferToBigInt)((0,i.toBuffer)(w)):void 0,B!==void 0?(0,i.bufferToBigInt)((0,i.toBuffer)(B)):void 0,M!==void 0?(0,i.toBuffer)(M):void 0,O!==void 0?(0,i.toBuffer)(O):void 0)}static fromRlpSerializedAccount(y){const w=(0,i.arrToBufArr)(t.RLP.decode(Uint8Array.from(y)));if(!Array.isArray(w))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(w)}static fromValuesArray(y){const[w,B,M,O]=y;return new f((0,i.bufferToBigInt)(w),(0,i.bufferToBigInt)(B),M,O)}_validate(){if(this.nonce<u)throw new Error("nonce must be greater than zero");if(this.balance<u)throw new Error("balance must be greater than zero");if(this.storageRoot.length!==32)throw new Error("storageRoot must have a length of 32");if(this.codeHash.length!==32)throw new Error("codeHash must have a length of 32")}raw(){return[(0,i.bigIntToUnpaddedBuffer)(this.nonce),(0,i.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return me.Buffer.from(t.RLP.encode((0,i.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(s.KECCAK256_NULL)}isEmpty(){return this.balance===u&&this.nonce===u&&this.codeHash.equals(s.KECCAK256_NULL)}}e.Account=f;const h=function(g){try{(0,c.assertIsString)(g)}catch{return!1}return/^0x[0-9a-fA-F]{40}$/.test(g)};e.isValidAddress=h;const d=function(g,y){(0,c.assertIsHexString)(g);const w=(0,l.stripHexPrefix)(g).toLowerCase();let B="";y!==void 0&&(B=(0,i.bufferToBigInt)((0,i.toBuffer)(y)).toString()+"0x");const M=me.Buffer.from(B+w,"utf8"),O=(0,o.bytesToHex)((0,r.keccak256)(M));let D="0x";for(let x=0;x<w.length;x++)parseInt(O[x],16)>=8?D+=w[x].toUpperCase():D+=w[x];return D};e.toChecksumAddress=d;const _=function(g,y){return(0,e.isValidAddress)(g)&&(0,e.toChecksumAddress)(g,y)===g};e.isValidChecksumAddress=_;const T=function(g,y){return(0,c.assertIsBuffer)(g),(0,c.assertIsBuffer)(y),(0,i.bufferToBigInt)(y)===BigInt(0)?me.Buffer.from((0,r.keccak256)(t.RLP.encode((0,i.bufArrToArr)([g,null])))).slice(-20):me.Buffer.from((0,r.keccak256)(t.RLP.encode((0,i.bufArrToArr)([g,y])))).slice(-20)};e.generateAddress=T;const R=function(g,y,w){if((0,c.assertIsBuffer)(g),(0,c.assertIsBuffer)(y),(0,c.assertIsBuffer)(w),g.length!==20)throw new Error("Expected from to be of length 20");if(y.length!==32)throw new Error("Expected salt to be of length 32");const B=(0,r.keccak256)(me.Buffer.concat([me.Buffer.from("ff","hex"),g,y,(0,r.keccak256)(w)]));return(0,i.toBuffer)(B).slice(-20)};e.generateAddress2=R;const L=function(g){return n.secp256k1.utils.isValidPrivateKey(g)};e.isValidPrivate=L;const V=function(g,y=!1){if((0,c.assertIsBuffer)(g),g.length===64)try{return n.secp256k1.ProjectivePoint.fromHex(me.Buffer.concat([me.Buffer.from([4]),g])),!0}catch{return!1}if(!y)return!1;try{return n.secp256k1.ProjectivePoint.fromHex(g),!0}catch{return!1}};e.isValidPublic=V;const P=function(g,y=!1){if((0,c.assertIsBuffer)(g),y&&g.length!==64&&(g=me.Buffer.from(n.secp256k1.ProjectivePoint.fromHex(g).toRawBytes(!1).slice(1))),g.length!==64)throw new Error("Expected pubKey to be of length 64");return me.Buffer.from((0,r.keccak256)(g)).slice(-20)};e.pubToAddress=P,e.publicToAddress=e.pubToAddress;const k=function(g){return(0,c.assertIsBuffer)(g),me.Buffer.from(n.secp256k1.ProjectivePoint.fromPrivateKey(g).toRawBytes(!1).slice(1))};e.privateToPublic=k;const S=function(g){return(0,e.publicToAddress)((0,e.privateToPublic)(g))};e.privateToAddress=S;const $=function(g){return(0,c.assertIsBuffer)(g),g.length!==64&&(g=me.Buffer.from(n.secp256k1.ProjectivePoint.fromHex(g).toRawBytes(!1).slice(1))),g};e.importPublic=$;const q=function(){const g=(0,i.zeros)(20);return(0,i.bufferToHex)(g)};e.zeroAddress=q;const re=function(g){try{(0,c.assertIsString)(g)}catch{return!1}return(0,e.zeroAddress)()===g};e.isZeroAddress=re;function U(g){const[y,w,B,M]=g;return[y,w,(0,i.arrToBufArr)(B).length===0?s.KECCAK256_RLP:B,(0,i.arrToBufArr)(M).length===0?s.KECCAK256_NULL:M]}e.accountBodyFromSlim=U;const H=new Uint8Array(0);function ae(g){const[y,w,B,M]=g;return[y,w,(0,i.arrToBufArr)(B).equals(s.KECCAK256_RLP)?H:B,(0,i.arrToBufArr)(M).equals(s.KECCAK256_NULL)?H:M]}e.accountBodyToSlim=ae;function ee(g,y=!0){const w=y?U(g):g;return(0,i.arrToBufArr)(t.RLP.encode(w))}e.accountBodyToRLP=ee})(wa);var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.Address=void 0;const Rn=wa,lo=zr;class cr{constructor(t){if(t.length!==20)throw new Error("Invalid address length");this.buf=t}static zero(){return new cr((0,lo.zeros)(20))}static fromString(t){if(!(0,Rn.isValidAddress)(t))throw new Error("Invalid address");return new cr((0,lo.toBuffer)(t))}static fromPublicKey(t){if(!me.Buffer.isBuffer(t))throw new Error("Public key should be Buffer");const r=(0,Rn.pubToAddress)(t);return new cr(r)}static fromPrivateKey(t){if(!me.Buffer.isBuffer(t))throw new Error("Private key should be Buffer");const r=(0,Rn.privateToAddress)(t);return new cr(r)}static generate(t,r){if(typeof r!="bigint")throw new Error("Expected nonce to be a bigint");return new cr((0,Rn.generateAddress)(t.buf,(0,lo.bigIntToBuffer)(r)))}static generate2(t,r,n){if(!me.Buffer.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!me.Buffer.isBuffer(n))throw new Error("Expected initCode to be a Buffer");return new cr((0,Rn.generateAddress2)(t.buf,r,n))}equals(t){return this.buf.equals(t.buf)}isZero(){return this.equals(cr.zero())}isPrecompileOrSystemAddress(){const t=(0,lo.bufferToBigInt)(this.buf),r=BigInt(0),n=BigInt("0xffff");return t>=r&&t<=n}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return me.Buffer.from(this.buf)}}Zn.Address=cr;var ri={},Sa={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toType=e.TypeOutput=void 0;const t=zr,r=Ve;var n;(function(i){i[i.Number=0]="Number",i[i.BigInt=1]="BigInt",i[i.Buffer=2]="Buffer",i[i.PrefixedHexString=3]="PrefixedHexString"})(n=e.TypeOutput||(e.TypeOutput={}));function o(i,s){if(i===null)return null;if(i===void 0)return;if(typeof i=="string"&&!(0,r.isHexString)(i))throw new Error(`A string must be provided with a 0x-prefix, given: ${i}`);if(typeof i=="number"&&!Number.isSafeInteger(i))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const c=(0,t.toBuffer)(i);switch(s){case n.Buffer:return c;case n.BigInt:return(0,t.bufferToBigInt)(c);case n.Number:{const l=(0,t.bufferToBigInt)(c);if(l>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(l)}case n.PrefixedHexString:return(0,t.bufferToHex)(c);default:throw new Error("unknown outputType")}}e.toType=o})(Sa);Object.defineProperty(ri,"__esModule",{value:!0});ri.Withdrawal=void 0;const gu=Zn,Ji=zr,ot=Sa;class Pn{constructor(t,r,n,o){this.index=t,this.validatorIndex=r,this.address=n,this.amount=o}static fromWithdrawalData(t){const{index:r,validatorIndex:n,address:o,amount:i}=t,s=(0,ot.toType)(r,ot.TypeOutput.BigInt),c=(0,ot.toType)(n,ot.TypeOutput.BigInt),l=new gu.Address((0,ot.toType)(o,ot.TypeOutput.Buffer)),u=(0,ot.toType)(i,ot.TypeOutput.BigInt);return new Pn(s,c,l,u)}static fromValuesArray(t){if(t.length!==4)throw Error(`Invalid withdrawalArray length expected=4 actual=${t.length}`);const[r,n,o,i]=t;return Pn.fromWithdrawalData({index:r,validatorIndex:n,address:o,amount:i})}static toBufferArray(t){const{index:r,validatorIndex:n,address:o,amount:i}=t,s=(0,ot.toType)(r,ot.TypeOutput.BigInt)===BigInt(0)?me.Buffer.alloc(0):(0,ot.toType)(r,ot.TypeOutput.Buffer),c=(0,ot.toType)(n,ot.TypeOutput.BigInt)===BigInt(0)?me.Buffer.alloc(0):(0,ot.toType)(n,ot.TypeOutput.Buffer);let l;o instanceof gu.Address?l=o.buf:l=(0,ot.toType)(o,ot.TypeOutput.Buffer);const u=(0,ot.toType)(i,ot.TypeOutput.BigInt)===BigInt(0)?me.Buffer.alloc(0):(0,ot.toType)(i,ot.TypeOutput.Buffer);return[s,c,l,u]}raw(){return Pn.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,Ji.bigIntToHex)(this.index),validatorIndex:(0,Ji.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,Ji.bigIntToHex)(this.amount)}}}ri.Withdrawal=Pn;var _t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.hashPersonalMessage=_t.isValidSignature=_t.fromRpcSig=_t.toCompactSig=_t.toRpcSig=_t.ecrecover=_t.ecsign=void 0;const fE=Vt,jd=Jo,At=zr,Ki=Zo,dE=Mt;function hE(e,t,r){const n=jd.secp256k1.sign(e,t),o=n.toCompactRawBytes(),i=me.Buffer.from(o.slice(0,32)),s=me.Buffer.from(o.slice(32,64)),c=r===void 0?BigInt(n.recovery+27):BigInt(n.recovery+35)+BigInt(r)*BigInt(2);return{r:i,s,v:c}}_t.ecsign=hE;function ni(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===void 0?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function oi(e){return e===BigInt(0)||e===BigInt(1)}const pE=function(e,t,r,n,o){const i=me.Buffer.concat([(0,At.setLengthLeft)(r,32),(0,At.setLengthLeft)(n,32)],64),s=ni(t,o);if(!oi(s))throw new Error("Invalid signature v value");const c=jd.secp256k1.Signature.fromCompact(i).addRecoveryBit(Number(s)).recoverPublicKey(e);return me.Buffer.from(c.toRawBytes(!1).slice(1))};_t.ecrecover=pE;const gE=function(e,t,r,n){const o=ni(e,n);if(!oi(o))throw new Error("Invalid signature v value");return(0,At.bufferToHex)(me.Buffer.concat([(0,At.setLengthLeft)(t,32),(0,At.setLengthLeft)(r,32),(0,At.toBuffer)(e)]))};_t.toRpcSig=gE;const bE=function(e,t,r,n){const o=ni(e,n);if(!oi(o))throw new Error("Invalid signature v value");let i=r;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(i=me.Buffer.from(r),i[0]|=128),(0,At.bufferToHex)(me.Buffer.concat([(0,At.setLengthLeft)(t,32),(0,At.setLengthLeft)(i,32)]))};_t.toCompactSig=bE;const mE=function(e){const t=(0,At.toBuffer)(e);let r,n,o;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),o=(0,At.bufferToBigInt)(t.slice(64));else if(t.length===64)r=t.slice(0,32),n=t.slice(32,64),o=BigInt((0,At.bufferToInt)(t.slice(32,33))>>7),n[0]&=127;else throw new Error("Invalid signature length");return o<27&&(o=o+BigInt(27)),{v:o,r,s:n}};_t.fromRpcSig=mE;const yE=function(e,t,r,n=!0,o){if(t.length!==32||r.length!==32||!oi(ni(e,o)))return!1;const i=(0,At.bufferToBigInt)(t),s=(0,At.bufferToBigInt)(r);return!(i===BigInt(0)||i>=Ki.SECP256K1_ORDER||s===BigInt(0)||s>=Ki.SECP256K1_ORDER||n&&s>=Ki.SECP256K1_ORDER_DIV_2)};_t.isValidSignature=yE;const _E=function(e){(0,dE.assertIsBuffer)(e);const t=me.Buffer.from(`Ethereum Signed Message:
${e.length}`,"utf-8");return me.Buffer.from((0,fE.keccak256)(me.Buffer.concat([t,e])))};_t.hashPersonalMessage=_E;var $d={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.compactBytesToNibbles=e.bytesToNibbles=e.nibblesToCompactBytes=e.nibblesToBytes=e.hasTerminator=void 0;const t=s=>s.length>0&&s[s.length-1]===16;e.hasTerminator=t;const r=(s,c)=>{for(let l=0,u=0;u<s.length;l+=1,u+=2)c[l]=s[u]<<4|s[u+1]};e.nibblesToBytes=r;const n=s=>{let c=0;(0,e.hasTerminator)(s)&&(c=1,s=s.subarray(0,s.length-1));const l=new Uint8Array(s.length/2+1);return l[0]=c<<5,(s.length&1)===1&&(l[0]|=16,l[0]|=s[0],s=s.subarray(1)),(0,e.nibblesToBytes)(s,l.subarray(1)),l};e.nibblesToCompactBytes=n;const o=s=>{const c=s.length*2+1,l=new Uint8Array(c);for(let u=0;u<s.length;u++){const f=s[u];l[u*2]=f/16,l[u*2+1]=f%16}return l[c-1]=16,l};e.bytesToNibbles=o;const i=s=>{if(s.length===0)return s;let c=(0,e.bytesToNibbles)(s);c[0]<2&&(c=c.subarray(0,c.length-1));const l=2-(c[0]&1);return c.subarray(l)};e.compactBytesToNibbles=i})($d);var ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.AsyncEventEmitter=void 0;const wE=ln;async function vE(e,t,r){let n;for await(const o of t)try{o.length<2?o.call(e,r):await new Promise((i,s)=>{o.call(e,r,c=>{c?s(c):i()})})}catch(i){n=i}if(n)throw n}class EE extends wE.EventEmitter{emit(t,...r){let[n,o]=r;const i=this;let s=i._events[t]??[];return o===void 0&&typeof n=="function"&&(o=n,n=void 0),(t==="newListener"||t==="removeListener")&&(n={event:n,fn:o},o=void 0),s=Array.isArray(s)?s:[s],vE(i,s.slice(),n).then(o).catch(o),i.listenerCount(t)>0}once(t,r){const n=this;let o;if(typeof r!="function")throw new TypeError("listener must be a function");return r.length>=2?o=function(i,s){n.removeListener(t,o),r(i,s)}:o=function(i){n.removeListener(t,o),r(i,o)},n.on(t,o),n}first(t,r){let n=this._events[t]??[];if(typeof r!="function")throw new TypeError("listener must be a function");return Array.isArray(n)||(this._events[t]=n=[n]),n.unshift(r),this}before(t,r,n){return this.beforeOrAfter(t,r,n)}after(t,r,n){return this.beforeOrAfter(t,r,n,"after")}beforeOrAfter(t,r,n,o){let i=this._events[t]??[],s,c;const l=o==="after"?1:0;if(typeof n!="function")throw new TypeError("listener must be a function");if(typeof r!="function")throw new TypeError("target must be a function");for(Array.isArray(i)||(this._events[t]=i=[i]),c=i.length,s=i.length;s--;)if(i[s]===r){c=s+l;break}return i.splice(c,0,n),this}on(t,r){return super.on(t,r)}addListener(t,r){return super.addListener(t,r)}prependListener(t,r){return super.prependListener(t,r)}prependOnceListener(t,r){return super.prependOnceListener(t,r)}removeAllListeners(t){return super.removeAllListeners(t)}removeListener(t,r){return super.removeListener(t,r)}eventNames(){return super.eventNames()}listeners(t){return super.listeners(t)}listenerCount(t){return super.listenerCount(t)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(t){return super.setMaxListeners(t)}}ii.AsyncEventEmitter=EE;var si={};Object.defineProperty(si,"__esModule",{value:!0});si.Lock=void 0;class SE{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise(t=>this.promiseResolverQueue.push(t))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(this.permits===1&&this.promiseResolverQueue.length>0){this.permits-=1;const t=this.promiseResolverQueue.shift();t&&t(!0)}}}si.Lock=SE;var an={},jr={},bu={},mu={},Xi,yu;function RE(){if(yu)return Xi;yu=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return Xi=e,Xi}var qt={},_u={},wu;function ai(){return wu||(wu=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(i,s){return Object.prototype.hasOwnProperty.call(i,s)}e.assign=function(i){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var c=s.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var l in c)r(c,l)&&(i[l]=c[l])}}return i},e.shrinkBuf=function(i,s){return i.length===s?i:i.subarray?i.subarray(0,s):(i.length=s,i)};var n={arraySet:function(i,s,c,l,u){if(s.subarray&&i.subarray){i.set(s.subarray(c,c+l),u);return}for(var f=0;f<l;f++)i[u+f]=s[c+f]},flattenChunks:function(i){var s,c,l,u,f,h;for(l=0,s=0,c=i.length;s<c;s++)l+=i[s].length;for(h=new Uint8Array(l),u=0,s=0,c=i.length;s<c;s++)f=i[s],h.set(f,u),u+=f.length;return h}},o={arraySet:function(i,s,c,l,u){for(var f=0;f<l;f++)i[u+f]=s[c+f]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(t)}(_u)),_u}var xr={},vu;function AE(){if(vu)return xr;vu=1;var e=ai(),t=4,r=0,n=1,o=2;function i(v){for(var oe=v.length;--oe>=0;)v[oe]=0}var s=0,c=1,l=2,u=3,f=258,h=29,d=256,_=d+1+h,T=30,R=19,L=2*_+1,V=15,P=16,k=7,S=256,$=16,q=17,re=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],H=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],g=512,y=new Array((_+2)*2);i(y);var w=new Array(T*2);i(w);var B=new Array(g);i(B);var M=new Array(f-u+1);i(M);var O=new Array(h);i(O);var D=new Array(T);i(D);function x(v,oe,de,ye,j){this.static_tree=v,this.extra_bits=oe,this.extra_base=de,this.elems=ye,this.max_length=j,this.has_stree=v&&v.length}var F,G,ne;function W(v,oe){this.dyn_tree=v,this.max_code=0,this.stat_desc=oe}function ie(v){return v<256?B[v]:B[256+(v>>>7)]}function fe(v,oe){v.pending_buf[v.pending++]=oe&255,v.pending_buf[v.pending++]=oe>>>8&255}function ue(v,oe,de){v.bi_valid>P-de?(v.bi_buf|=oe<<v.bi_valid&65535,fe(v,v.bi_buf),v.bi_buf=oe>>P-v.bi_valid,v.bi_valid+=de-P):(v.bi_buf|=oe<<v.bi_valid&65535,v.bi_valid+=de)}function ve(v,oe,de){ue(v,de[oe*2],de[oe*2+1])}function ge(v,oe){var de=0;do de|=v&1,v>>>=1,de<<=1;while(--oe>0);return de>>>1}function _e(v){v.bi_valid===16?(fe(v,v.bi_buf),v.bi_buf=0,v.bi_valid=0):v.bi_valid>=8&&(v.pending_buf[v.pending++]=v.bi_buf&255,v.bi_buf>>=8,v.bi_valid-=8)}function Le(v,oe){var de=oe.dyn_tree,ye=oe.max_code,j=oe.stat_desc.static_tree,te=oe.stat_desc.has_stree,p=oe.stat_desc.extra_bits,se=oe.stat_desc.extra_base,Ie=oe.stat_desc.max_length,a,K,X,m,C,Z,Ee=0;for(m=0;m<=V;m++)v.bl_count[m]=0;for(de[v.heap[v.heap_max]*2+1]=0,a=v.heap_max+1;a<L;a++)K=v.heap[a],m=de[de[K*2+1]*2+1]+1,m>Ie&&(m=Ie,Ee++),de[K*2+1]=m,!(K>ye)&&(v.bl_count[m]++,C=0,K>=se&&(C=p[K-se]),Z=de[K*2],v.opt_len+=Z*(m+C),te&&(v.static_len+=Z*(j[K*2+1]+C)));if(Ee!==0){do{for(m=Ie-1;v.bl_count[m]===0;)m--;v.bl_count[m]--,v.bl_count[m+1]+=2,v.bl_count[Ie]--,Ee-=2}while(Ee>0);for(m=Ie;m!==0;m--)for(K=v.bl_count[m];K!==0;)X=v.heap[--a],!(X>ye)&&(de[X*2+1]!==m&&(v.opt_len+=(m-de[X*2+1])*de[X*2],de[X*2+1]=m),K--)}}function Ne(v,oe,de){var ye=new Array(V+1),j=0,te,p;for(te=1;te<=V;te++)ye[te]=j=j+de[te-1]<<1;for(p=0;p<=oe;p++){var se=v[p*2+1];se!==0&&(v[p*2]=ge(ye[se]++,se))}}function Re(){var v,oe,de,ye,j,te=new Array(V+1);for(de=0,ye=0;ye<h-1;ye++)for(O[ye]=de,v=0;v<1<<U[ye];v++)M[de++]=ye;for(M[de-1]=ye,j=0,ye=0;ye<16;ye++)for(D[ye]=j,v=0;v<1<<H[ye];v++)B[j++]=ye;for(j>>=7;ye<T;ye++)for(D[ye]=j<<7,v=0;v<1<<H[ye]-7;v++)B[256+j++]=ye;for(oe=0;oe<=V;oe++)te[oe]=0;for(v=0;v<=143;)y[v*2+1]=8,v++,te[8]++;for(;v<=255;)y[v*2+1]=9,v++,te[9]++;for(;v<=279;)y[v*2+1]=7,v++,te[7]++;for(;v<=287;)y[v*2+1]=8,v++,te[8]++;for(Ne(y,_+1,te),v=0;v<T;v++)w[v*2+1]=5,w[v*2]=ge(v,5);F=new x(y,U,d+1,_,V),G=new x(w,H,0,T,V),ne=new x(new Array(0),ae,0,R,k)}function I(v){var oe;for(oe=0;oe<_;oe++)v.dyn_ltree[oe*2]=0;for(oe=0;oe<T;oe++)v.dyn_dtree[oe*2]=0;for(oe=0;oe<R;oe++)v.bl_tree[oe*2]=0;v.dyn_ltree[S*2]=1,v.opt_len=v.static_len=0,v.last_lit=v.matches=0}function N(v){v.bi_valid>8?fe(v,v.bi_buf):v.bi_valid>0&&(v.pending_buf[v.pending++]=v.bi_buf),v.bi_buf=0,v.bi_valid=0}function J(v,oe,de,ye){N(v),fe(v,de),fe(v,~de),e.arraySet(v.pending_buf,v.window,oe,de,v.pending),v.pending+=de}function ce(v,oe,de,ye){var j=oe*2,te=de*2;return v[j]<v[te]||v[j]===v[te]&&ye[oe]<=ye[de]}function le(v,oe,de){for(var ye=v.heap[de],j=de<<1;j<=v.heap_len&&(j<v.heap_len&&ce(oe,v.heap[j+1],v.heap[j],v.depth)&&j++,!ce(oe,ye,v.heap[j],v.depth));)v.heap[de]=v.heap[j],de=j,j<<=1;v.heap[de]=ye}function he(v,oe,de){var ye,j,te=0,p,se;if(v.last_lit!==0)do ye=v.pending_buf[v.d_buf+te*2]<<8|v.pending_buf[v.d_buf+te*2+1],j=v.pending_buf[v.l_buf+te],te++,ye===0?ve(v,j,oe):(p=M[j],ve(v,p+d+1,oe),se=U[p],se!==0&&(j-=O[p],ue(v,j,se)),ye--,p=ie(ye),ve(v,p,de),se=H[p],se!==0&&(ye-=D[p],ue(v,ye,se)));while(te<v.last_lit);ve(v,S,oe)}function Te(v,oe){var de=oe.dyn_tree,ye=oe.stat_desc.static_tree,j=oe.stat_desc.has_stree,te=oe.stat_desc.elems,p,se,Ie=-1,a;for(v.heap_len=0,v.heap_max=L,p=0;p<te;p++)de[p*2]!==0?(v.heap[++v.heap_len]=Ie=p,v.depth[p]=0):de[p*2+1]=0;for(;v.heap_len<2;)a=v.heap[++v.heap_len]=Ie<2?++Ie:0,de[a*2]=1,v.depth[a]=0,v.opt_len--,j&&(v.static_len-=ye[a*2+1]);for(oe.max_code=Ie,p=v.heap_len>>1;p>=1;p--)le(v,de,p);a=te;do p=v.heap[1],v.heap[1]=v.heap[v.heap_len--],le(v,de,1),se=v.heap[1],v.heap[--v.heap_max]=p,v.heap[--v.heap_max]=se,de[a*2]=de[p*2]+de[se*2],v.depth[a]=(v.depth[p]>=v.depth[se]?v.depth[p]:v.depth[se])+1,de[p*2+1]=de[se*2+1]=a,v.heap[1]=a++,le(v,de,1);while(v.heap_len>=2);v.heap[--v.heap_max]=v.heap[1],Le(v,oe),Ne(de,Ie,v.bl_count)}function xe(v,oe,de){var ye,j=-1,te,p=oe[0*2+1],se=0,Ie=7,a=4;for(p===0&&(Ie=138,a=3),oe[(de+1)*2+1]=65535,ye=0;ye<=de;ye++)te=p,p=oe[(ye+1)*2+1],!(++se<Ie&&te===p)&&(se<a?v.bl_tree[te*2]+=se:te!==0?(te!==j&&v.bl_tree[te*2]++,v.bl_tree[$*2]++):se<=10?v.bl_tree[q*2]++:v.bl_tree[re*2]++,se=0,j=te,p===0?(Ie=138,a=3):te===p?(Ie=6,a=3):(Ie=7,a=4))}function Be(v,oe,de){var ye,j=-1,te,p=oe[0*2+1],se=0,Ie=7,a=4;for(p===0&&(Ie=138,a=3),ye=0;ye<=de;ye++)if(te=p,p=oe[(ye+1)*2+1],!(++se<Ie&&te===p)){if(se<a)do ve(v,te,v.bl_tree);while(--se!==0);else te!==0?(te!==j&&(ve(v,te,v.bl_tree),se--),ve(v,$,v.bl_tree),ue(v,se-3,2)):se<=10?(ve(v,q,v.bl_tree),ue(v,se-3,3)):(ve(v,re,v.bl_tree),ue(v,se-11,7));se=0,j=te,p===0?(Ie=138,a=3):te===p?(Ie=6,a=3):(Ie=7,a=4)}}function we(v){var oe;for(xe(v,v.dyn_ltree,v.l_desc.max_code),xe(v,v.dyn_dtree,v.d_desc.max_code),Te(v,v.bl_desc),oe=R-1;oe>=3&&v.bl_tree[ee[oe]*2+1]===0;oe--);return v.opt_len+=3*(oe+1)+5+5+4,oe}function Me(v,oe,de,ye){var j;for(ue(v,oe-257,5),ue(v,de-1,5),ue(v,ye-4,4),j=0;j<ye;j++)ue(v,v.bl_tree[ee[j]*2+1],3);Be(v,v.dyn_ltree,oe-1),Be(v,v.dyn_dtree,de-1)}function st(v){var oe=4093624447,de;for(de=0;de<=31;de++,oe>>>=1)if(oe&1&&v.dyn_ltree[de*2]!==0)return r;if(v.dyn_ltree[9*2]!==0||v.dyn_ltree[10*2]!==0||v.dyn_ltree[13*2]!==0)return n;for(de=32;de<d;de++)if(v.dyn_ltree[de*2]!==0)return n;return r}var Je=!1;function vt(v){Je||(Re(),Je=!0),v.l_desc=new W(v.dyn_ltree,F),v.d_desc=new W(v.dyn_dtree,G),v.bl_desc=new W(v.bl_tree,ne),v.bi_buf=0,v.bi_valid=0,I(v)}function at(v,oe,de,ye){ue(v,(s<<1)+(ye?1:0),3),J(v,oe,de)}function Ue(v){ue(v,c<<1,3),ve(v,S,y),_e(v)}function Qe(v,oe,de,ye){var j,te,p=0;v.level>0?(v.strm.data_type===o&&(v.strm.data_type=st(v)),Te(v,v.l_desc),Te(v,v.d_desc),p=we(v),j=v.opt_len+3+7>>>3,te=v.static_len+3+7>>>3,te<=j&&(j=te)):j=te=de+5,de+4<=j&&oe!==-1?at(v,oe,de,ye):v.strategy===t||te===j?(ue(v,(c<<1)+(ye?1:0),3),he(v,y,w)):(ue(v,(l<<1)+(ye?1:0),3),Me(v,v.l_desc.max_code+1,v.d_desc.max_code+1,p+1),he(v,v.dyn_ltree,v.dyn_dtree)),I(v),ye&&N(v)}function et(v,oe,de){return v.pending_buf[v.d_buf+v.last_lit*2]=oe>>>8&255,v.pending_buf[v.d_buf+v.last_lit*2+1]=oe&255,v.pending_buf[v.l_buf+v.last_lit]=de&255,v.last_lit++,oe===0?v.dyn_ltree[de*2]++:(v.matches++,oe--,v.dyn_ltree[(M[de]+d+1)*2]++,v.dyn_dtree[ie(oe)*2]++),v.last_lit===v.lit_bufsize-1}return xr._tr_init=vt,xr._tr_stored_block=at,xr._tr_flush_block=Qe,xr._tr_tally=et,xr._tr_align=Ue,xr}var Yi,Eu;function Dd(){if(Eu)return Yi;Eu=1;function e(t,r,n,o){for(var i=t&65535|0,s=t>>>16&65535|0,c=0;n!==0;){c=n>2e3?2e3:n,n-=c;do i=i+r[o++]|0,s=s+i|0;while(--c);i%=65521,s%=65521}return i|s<<16|0}return Yi=e,Yi}var Qi,Su;function Md(){if(Su)return Qi;Su=1;function e(){for(var n,o=[],i=0;i<256;i++){n=i;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;o[i]=n}return o}var t=e();function r(n,o,i,s){var c=t,l=s+i;n^=-1;for(var u=s;u<l;u++)n=n>>>8^c[(n^o[u])&255];return n^-1}return Qi=r,Qi}var Ru,Au;function IE(){return Au||(Au=1,Ru={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),Ru}var Iu;function TE(){if(Iu)return qt;Iu=1;var e=ai(),t=AE(),r=Dd(),n=Md(),o=IE(),i=0,s=1,c=3,l=4,u=5,f=0,h=1,d=-2,_=-3,T=-5,R=-1,L=1,V=2,P=3,k=4,S=0,$=2,q=8,re=9,U=15,H=8,ae=29,ee=256,g=ee+1+ae,y=30,w=19,B=2*g+1,M=15,O=3,D=258,x=D+O+1,F=32,G=42,ne=69,W=73,ie=91,fe=103,ue=113,ve=666,ge=1,_e=2,Le=3,Ne=4,Re=3;function I(a,K){return a.msg=o[K],K}function N(a){return(a<<1)-(a>4?9:0)}function J(a){for(var K=a.length;--K>=0;)a[K]=0}function ce(a){var K=a.state,X=K.pending;X>a.avail_out&&(X=a.avail_out),X!==0&&(e.arraySet(a.output,K.pending_buf,K.pending_out,X,a.next_out),a.next_out+=X,K.pending_out+=X,a.total_out+=X,a.avail_out-=X,K.pending-=X,K.pending===0&&(K.pending_out=0))}function le(a,K){t._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,K),a.block_start=a.strstart,ce(a.strm)}function he(a,K){a.pending_buf[a.pending++]=K}function Te(a,K){a.pending_buf[a.pending++]=K>>>8&255,a.pending_buf[a.pending++]=K&255}function xe(a,K,X,m){var C=a.avail_in;return C>m&&(C=m),C===0?0:(a.avail_in-=C,e.arraySet(K,a.input,a.next_in,C,X),a.state.wrap===1?a.adler=r(a.adler,K,C,X):a.state.wrap===2&&(a.adler=n(a.adler,K,C,X)),a.next_in+=C,a.total_in+=C,C)}function Be(a,K){var X=a.max_chain_length,m=a.strstart,C,Z,Ee=a.prev_length,b=a.nice_match,E=a.strstart>a.w_size-x?a.strstart-(a.w_size-x):0,Q=a.window,be=a.w_mask,pe=a.prev,Oe=a.strstart+D,je=Q[m+Ee-1],ze=Q[m+Ee];a.prev_length>=a.good_match&&(X>>=2),b>a.lookahead&&(b=a.lookahead);do if(C=K,!(Q[C+Ee]!==ze||Q[C+Ee-1]!==je||Q[C]!==Q[m]||Q[++C]!==Q[m+1])){m+=2,C++;do;while(Q[++m]===Q[++C]&&Q[++m]===Q[++C]&&Q[++m]===Q[++C]&&Q[++m]===Q[++C]&&Q[++m]===Q[++C]&&Q[++m]===Q[++C]&&Q[++m]===Q[++C]&&Q[++m]===Q[++C]&&m<Oe);if(Z=D-(Oe-m),m=Oe-D,Z>Ee){if(a.match_start=K,Ee=Z,Z>=b)break;je=Q[m+Ee-1],ze=Q[m+Ee]}}while((K=pe[K&be])>E&&--X!==0);return Ee<=a.lookahead?Ee:a.lookahead}function we(a){var K=a.w_size,X,m,C,Z,Ee;do{if(Z=a.window_size-a.lookahead-a.strstart,a.strstart>=K+(K-x)){e.arraySet(a.window,a.window,K,K,0),a.match_start-=K,a.strstart-=K,a.block_start-=K,m=a.hash_size,X=m;do C=a.head[--X],a.head[X]=C>=K?C-K:0;while(--m);m=K,X=m;do C=a.prev[--X],a.prev[X]=C>=K?C-K:0;while(--m);Z+=K}if(a.strm.avail_in===0)break;if(m=xe(a.strm,a.window,a.strstart+a.lookahead,Z),a.lookahead+=m,a.lookahead+a.insert>=O)for(Ee=a.strstart-a.insert,a.ins_h=a.window[Ee],a.ins_h=(a.ins_h<<a.hash_shift^a.window[Ee+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[Ee+O-1])&a.hash_mask,a.prev[Ee&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=Ee,Ee++,a.insert--,!(a.lookahead+a.insert<O)););}while(a.lookahead<x&&a.strm.avail_in!==0)}function Me(a,K){var X=65535;for(X>a.pending_buf_size-5&&(X=a.pending_buf_size-5);;){if(a.lookahead<=1){if(we(a),a.lookahead===0&&K===i)return ge;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;var m=a.block_start+X;if((a.strstart===0||a.strstart>=m)&&(a.lookahead=a.strstart-m,a.strstart=m,le(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-x&&(le(a,!1),a.strm.avail_out===0))return ge}return a.insert=0,K===l?(le(a,!0),a.strm.avail_out===0?Le:Ne):(a.strstart>a.block_start&&(le(a,!1),a.strm.avail_out),ge)}function st(a,K){for(var X,m;;){if(a.lookahead<x){if(we(a),a.lookahead<x&&K===i)return ge;if(a.lookahead===0)break}if(X=0,a.lookahead>=O&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+O-1])&a.hash_mask,X=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),X!==0&&a.strstart-X<=a.w_size-x&&(a.match_length=Be(a,X)),a.match_length>=O)if(m=t._tr_tally(a,a.strstart-a.match_start,a.match_length-O),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=O){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+O-1])&a.hash_mask,X=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else m=t._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(m&&(le(a,!1),a.strm.avail_out===0))return ge}return a.insert=a.strstart<O-1?a.strstart:O-1,K===l?(le(a,!0),a.strm.avail_out===0?Le:Ne):a.last_lit&&(le(a,!1),a.strm.avail_out===0)?ge:_e}function Je(a,K){for(var X,m,C;;){if(a.lookahead<x){if(we(a),a.lookahead<x&&K===i)return ge;if(a.lookahead===0)break}if(X=0,a.lookahead>=O&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+O-1])&a.hash_mask,X=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=O-1,X!==0&&a.prev_length<a.max_lazy_match&&a.strstart-X<=a.w_size-x&&(a.match_length=Be(a,X),a.match_length<=5&&(a.strategy===L||a.match_length===O&&a.strstart-a.match_start>4096)&&(a.match_length=O-1)),a.prev_length>=O&&a.match_length<=a.prev_length){C=a.strstart+a.lookahead-O,m=t._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-O),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=C&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+O-1])&a.hash_mask,X=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=O-1,a.strstart++,m&&(le(a,!1),a.strm.avail_out===0))return ge}else if(a.match_available){if(m=t._tr_tally(a,0,a.window[a.strstart-1]),m&&le(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return ge}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(m=t._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<O-1?a.strstart:O-1,K===l?(le(a,!0),a.strm.avail_out===0?Le:Ne):a.last_lit&&(le(a,!1),a.strm.avail_out===0)?ge:_e}function vt(a,K){for(var X,m,C,Z,Ee=a.window;;){if(a.lookahead<=D){if(we(a),a.lookahead<=D&&K===i)return ge;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=O&&a.strstart>0&&(C=a.strstart-1,m=Ee[C],m===Ee[++C]&&m===Ee[++C]&&m===Ee[++C])){Z=a.strstart+D;do;while(m===Ee[++C]&&m===Ee[++C]&&m===Ee[++C]&&m===Ee[++C]&&m===Ee[++C]&&m===Ee[++C]&&m===Ee[++C]&&m===Ee[++C]&&C<Z);a.match_length=D-(Z-C),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=O?(X=t._tr_tally(a,1,a.match_length-O),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(X=t._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),X&&(le(a,!1),a.strm.avail_out===0))return ge}return a.insert=0,K===l?(le(a,!0),a.strm.avail_out===0?Le:Ne):a.last_lit&&(le(a,!1),a.strm.avail_out===0)?ge:_e}function at(a,K){for(var X;;){if(a.lookahead===0&&(we(a),a.lookahead===0)){if(K===i)return ge;break}if(a.match_length=0,X=t._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,X&&(le(a,!1),a.strm.avail_out===0))return ge}return a.insert=0,K===l?(le(a,!0),a.strm.avail_out===0?Le:Ne):a.last_lit&&(le(a,!1),a.strm.avail_out===0)?ge:_e}function Ue(a,K,X,m,C){this.good_length=a,this.max_lazy=K,this.nice_length=X,this.max_chain=m,this.func=C}var Qe;Qe=[new Ue(0,0,0,0,Me),new Ue(4,4,8,4,st),new Ue(4,5,16,8,st),new Ue(4,6,32,32,st),new Ue(4,4,16,16,Je),new Ue(8,16,32,32,Je),new Ue(8,16,128,128,Je),new Ue(8,32,128,256,Je),new Ue(32,128,258,1024,Je),new Ue(32,258,258,4096,Je)];function et(a){a.window_size=2*a.w_size,J(a.head),a.max_lazy_match=Qe[a.level].max_lazy,a.good_match=Qe[a.level].good_length,a.nice_match=Qe[a.level].nice_length,a.max_chain_length=Qe[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=O-1,a.match_available=0,a.ins_h=0}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(B*2),this.dyn_dtree=new e.Buf16((2*y+1)*2),this.bl_tree=new e.Buf16((2*w+1)*2),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(M+1),this.heap=new e.Buf16(2*g+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*g+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function oe(a){var K;return!a||!a.state?I(a,d):(a.total_in=a.total_out=0,a.data_type=$,K=a.state,K.pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap?G:ue,a.adler=K.wrap===2?0:1,K.last_flush=i,t._tr_init(K),f)}function de(a){var K=oe(a);return K===f&&et(a.state),K}function ye(a,K){return!a||!a.state||a.state.wrap!==2?d:(a.state.gzhead=K,f)}function j(a,K,X,m,C,Z){if(!a)return d;var Ee=1;if(K===R&&(K=6),m<0?(Ee=0,m=-m):m>15&&(Ee=2,m-=16),C<1||C>re||X!==q||m<8||m>15||K<0||K>9||Z<0||Z>k)return I(a,d);m===8&&(m=9);var b=new v;return a.state=b,b.strm=a,b.wrap=Ee,b.gzhead=null,b.w_bits=m,b.w_size=1<<b.w_bits,b.w_mask=b.w_size-1,b.hash_bits=C+7,b.hash_size=1<<b.hash_bits,b.hash_mask=b.hash_size-1,b.hash_shift=~~((b.hash_bits+O-1)/O),b.window=new e.Buf8(b.w_size*2),b.head=new e.Buf16(b.hash_size),b.prev=new e.Buf16(b.w_size),b.lit_bufsize=1<<C+6,b.pending_buf_size=b.lit_bufsize*4,b.pending_buf=new e.Buf8(b.pending_buf_size),b.d_buf=1*b.lit_bufsize,b.l_buf=3*b.lit_bufsize,b.level=K,b.strategy=Z,b.method=X,de(a)}function te(a,K){return j(a,K,q,U,H,S)}function p(a,K){var X,m,C,Z;if(!a||!a.state||K>u||K<0)return a?I(a,d):d;if(m=a.state,!a.output||!a.input&&a.avail_in!==0||m.status===ve&&K!==l)return I(a,a.avail_out===0?T:d);if(m.strm=a,X=m.last_flush,m.last_flush=K,m.status===G)if(m.wrap===2)a.adler=0,he(m,31),he(m,139),he(m,8),m.gzhead?(he(m,(m.gzhead.text?1:0)+(m.gzhead.hcrc?2:0)+(m.gzhead.extra?4:0)+(m.gzhead.name?8:0)+(m.gzhead.comment?16:0)),he(m,m.gzhead.time&255),he(m,m.gzhead.time>>8&255),he(m,m.gzhead.time>>16&255),he(m,m.gzhead.time>>24&255),he(m,m.level===9?2:m.strategy>=V||m.level<2?4:0),he(m,m.gzhead.os&255),m.gzhead.extra&&m.gzhead.extra.length&&(he(m,m.gzhead.extra.length&255),he(m,m.gzhead.extra.length>>8&255)),m.gzhead.hcrc&&(a.adler=n(a.adler,m.pending_buf,m.pending,0)),m.gzindex=0,m.status=ne):(he(m,0),he(m,0),he(m,0),he(m,0),he(m,0),he(m,m.level===9?2:m.strategy>=V||m.level<2?4:0),he(m,Re),m.status=ue);else{var Ee=q+(m.w_bits-8<<4)<<8,b=-1;m.strategy>=V||m.level<2?b=0:m.level<6?b=1:m.level===6?b=2:b=3,Ee|=b<<6,m.strstart!==0&&(Ee|=F),Ee+=31-Ee%31,m.status=ue,Te(m,Ee),m.strstart!==0&&(Te(m,a.adler>>>16),Te(m,a.adler&65535)),a.adler=1}if(m.status===ne)if(m.gzhead.extra){for(C=m.pending;m.gzindex<(m.gzhead.extra.length&65535)&&!(m.pending===m.pending_buf_size&&(m.gzhead.hcrc&&m.pending>C&&(a.adler=n(a.adler,m.pending_buf,m.pending-C,C)),ce(a),C=m.pending,m.pending===m.pending_buf_size));)he(m,m.gzhead.extra[m.gzindex]&255),m.gzindex++;m.gzhead.hcrc&&m.pending>C&&(a.adler=n(a.adler,m.pending_buf,m.pending-C,C)),m.gzindex===m.gzhead.extra.length&&(m.gzindex=0,m.status=W)}else m.status=W;if(m.status===W)if(m.gzhead.name){C=m.pending;do{if(m.pending===m.pending_buf_size&&(m.gzhead.hcrc&&m.pending>C&&(a.adler=n(a.adler,m.pending_buf,m.pending-C,C)),ce(a),C=m.pending,m.pending===m.pending_buf_size)){Z=1;break}m.gzindex<m.gzhead.name.length?Z=m.gzhead.name.charCodeAt(m.gzindex++)&255:Z=0,he(m,Z)}while(Z!==0);m.gzhead.hcrc&&m.pending>C&&(a.adler=n(a.adler,m.pending_buf,m.pending-C,C)),Z===0&&(m.gzindex=0,m.status=ie)}else m.status=ie;if(m.status===ie)if(m.gzhead.comment){C=m.pending;do{if(m.pending===m.pending_buf_size&&(m.gzhead.hcrc&&m.pending>C&&(a.adler=n(a.adler,m.pending_buf,m.pending-C,C)),ce(a),C=m.pending,m.pending===m.pending_buf_size)){Z=1;break}m.gzindex<m.gzhead.comment.length?Z=m.gzhead.comment.charCodeAt(m.gzindex++)&255:Z=0,he(m,Z)}while(Z!==0);m.gzhead.hcrc&&m.pending>C&&(a.adler=n(a.adler,m.pending_buf,m.pending-C,C)),Z===0&&(m.status=fe)}else m.status=fe;if(m.status===fe&&(m.gzhead.hcrc?(m.pending+2>m.pending_buf_size&&ce(a),m.pending+2<=m.pending_buf_size&&(he(m,a.adler&255),he(m,a.adler>>8&255),a.adler=0,m.status=ue)):m.status=ue),m.pending!==0){if(ce(a),a.avail_out===0)return m.last_flush=-1,f}else if(a.avail_in===0&&N(K)<=N(X)&&K!==l)return I(a,T);if(m.status===ve&&a.avail_in!==0)return I(a,T);if(a.avail_in!==0||m.lookahead!==0||K!==i&&m.status!==ve){var E=m.strategy===V?at(m,K):m.strategy===P?vt(m,K):Qe[m.level].func(m,K);if((E===Le||E===Ne)&&(m.status=ve),E===ge||E===Le)return a.avail_out===0&&(m.last_flush=-1),f;if(E===_e&&(K===s?t._tr_align(m):K!==u&&(t._tr_stored_block(m,0,0,!1),K===c&&(J(m.head),m.lookahead===0&&(m.strstart=0,m.block_start=0,m.insert=0))),ce(a),a.avail_out===0))return m.last_flush=-1,f}return K!==l?f:m.wrap<=0?h:(m.wrap===2?(he(m,a.adler&255),he(m,a.adler>>8&255),he(m,a.adler>>16&255),he(m,a.adler>>24&255),he(m,a.total_in&255),he(m,a.total_in>>8&255),he(m,a.total_in>>16&255),he(m,a.total_in>>24&255)):(Te(m,a.adler>>>16),Te(m,a.adler&65535)),ce(a),m.wrap>0&&(m.wrap=-m.wrap),m.pending!==0?f:h)}function se(a){var K;return!a||!a.state?d:(K=a.state.status,K!==G&&K!==ne&&K!==W&&K!==ie&&K!==fe&&K!==ue&&K!==ve?I(a,d):(a.state=null,K===ue?I(a,_):f))}function Ie(a,K){var X=K.length,m,C,Z,Ee,b,E,Q,be;if(!a||!a.state||(m=a.state,Ee=m.wrap,Ee===2||Ee===1&&m.status!==G||m.lookahead))return d;for(Ee===1&&(a.adler=r(a.adler,K,X,0)),m.wrap=0,X>=m.w_size&&(Ee===0&&(J(m.head),m.strstart=0,m.block_start=0,m.insert=0),be=new e.Buf8(m.w_size),e.arraySet(be,K,X-m.w_size,m.w_size,0),K=be,X=m.w_size),b=a.avail_in,E=a.next_in,Q=a.input,a.avail_in=X,a.next_in=0,a.input=K,we(m);m.lookahead>=O;){C=m.strstart,Z=m.lookahead-(O-1);do m.ins_h=(m.ins_h<<m.hash_shift^m.window[C+O-1])&m.hash_mask,m.prev[C&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=C,C++;while(--Z);m.strstart=C,m.lookahead=O-1,we(m)}return m.strstart+=m.lookahead,m.block_start=m.strstart,m.insert=m.lookahead,m.lookahead=0,m.match_length=m.prev_length=O-1,m.match_available=0,a.next_in=E,a.input=Q,a.avail_in=b,m.wrap=Ee,f}return qt.deflateInit=te,qt.deflateInit2=j,qt.deflateReset=de,qt.deflateResetKeep=oe,qt.deflateSetHeader=ye,qt.deflate=p,qt.deflateEnd=se,qt.deflateSetDictionary=Ie,qt.deflateInfo="pako deflate (from Nodeca project)",qt}var jt={},es,Tu;function OE(){if(Tu)return es;Tu=1;var e=30,t=12;return es=function(r,n){var o,i,s,c,l,u,f,h,d,_,T,R,L,V,P,k,S,$,q,re,U,H,ae,ee,g;o=r.state,i=r.next_in,ee=r.input,s=i+(r.avail_in-5),c=r.next_out,g=r.output,l=c-(n-r.avail_out),u=c+(r.avail_out-257),f=o.dmax,h=o.wsize,d=o.whave,_=o.wnext,T=o.window,R=o.hold,L=o.bits,V=o.lencode,P=o.distcode,k=(1<<o.lenbits)-1,S=(1<<o.distbits)-1;e:do{L<15&&(R+=ee[i++]<<L,L+=8,R+=ee[i++]<<L,L+=8),$=V[R&k];t:for(;;){if(q=$>>>24,R>>>=q,L-=q,q=$>>>16&255,q===0)g[c++]=$&65535;else if(q&16){re=$&65535,q&=15,q&&(L<q&&(R+=ee[i++]<<L,L+=8),re+=R&(1<<q)-1,R>>>=q,L-=q),L<15&&(R+=ee[i++]<<L,L+=8,R+=ee[i++]<<L,L+=8),$=P[R&S];r:for(;;){if(q=$>>>24,R>>>=q,L-=q,q=$>>>16&255,q&16){if(U=$&65535,q&=15,L<q&&(R+=ee[i++]<<L,L+=8,L<q&&(R+=ee[i++]<<L,L+=8)),U+=R&(1<<q)-1,U>f){r.msg="invalid distance too far back",o.mode=e;break e}if(R>>>=q,L-=q,q=c-l,U>q){if(q=U-q,q>d&&o.sane){r.msg="invalid distance too far back",o.mode=e;break e}if(H=0,ae=T,_===0){if(H+=h-q,q<re){re-=q;do g[c++]=T[H++];while(--q);H=c-U,ae=g}}else if(_<q){if(H+=h+_-q,q-=_,q<re){re-=q;do g[c++]=T[H++];while(--q);if(H=0,_<re){q=_,re-=q;do g[c++]=T[H++];while(--q);H=c-U,ae=g}}}else if(H+=_-q,q<re){re-=q;do g[c++]=T[H++];while(--q);H=c-U,ae=g}for(;re>2;)g[c++]=ae[H++],g[c++]=ae[H++],g[c++]=ae[H++],re-=3;re&&(g[c++]=ae[H++],re>1&&(g[c++]=ae[H++]))}else{H=c-U;do g[c++]=g[H++],g[c++]=g[H++],g[c++]=g[H++],re-=3;while(re>2);re&&(g[c++]=g[H++],re>1&&(g[c++]=g[H++]))}}else if(q&64){r.msg="invalid distance code",o.mode=e;break e}else{$=P[($&65535)+(R&(1<<q)-1)];continue r}break}}else if(q&64)if(q&32){o.mode=t;break e}else{r.msg="invalid literal/length code",o.mode=e;break e}else{$=V[($&65535)+(R&(1<<q)-1)];continue t}break}}while(i<s&&c<u);re=L>>3,i-=re,L-=re<<3,R&=(1<<L)-1,r.next_in=i,r.next_out=c,r.avail_in=i<s?5+(s-i):5-(i-s),r.avail_out=c<u?257+(u-c):257-(c-u),o.hold=R,o.bits=L},es}var ts,Ou;function xE(){if(Ou)return ts;Ou=1;var e=ai(),t=15,r=852,n=592,o=0,i=1,s=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return ts=function(h,d,_,T,R,L,V,P){var k=P.bits,S=0,$=0,q=0,re=0,U=0,H=0,ae=0,ee=0,g=0,y=0,w,B,M,O,D,x=null,F=0,G,ne=new e.Buf16(t+1),W=new e.Buf16(t+1),ie=null,fe=0,ue,ve,ge;for(S=0;S<=t;S++)ne[S]=0;for($=0;$<T;$++)ne[d[_+$]]++;for(U=k,re=t;re>=1&&ne[re]===0;re--);if(U>re&&(U=re),re===0)return R[L++]=1<<24|64<<16|0,R[L++]=1<<24|64<<16|0,P.bits=1,0;for(q=1;q<re&&ne[q]===0;q++);for(U<q&&(U=q),ee=1,S=1;S<=t;S++)if(ee<<=1,ee-=ne[S],ee<0)return-1;if(ee>0&&(h===o||re!==1))return-1;for(W[1]=0,S=1;S<t;S++)W[S+1]=W[S]+ne[S];for($=0;$<T;$++)d[_+$]!==0&&(V[W[d[_+$]]++]=$);if(h===o?(x=ie=V,G=19):h===i?(x=c,F-=257,ie=l,fe-=257,G=256):(x=u,ie=f,G=-1),y=0,$=0,S=q,D=L,H=U,ae=0,M=-1,g=1<<U,O=g-1,h===i&&g>r||h===s&&g>n)return 1;for(;;){ue=S-ae,V[$]<G?(ve=0,ge=V[$]):V[$]>G?(ve=ie[fe+V[$]],ge=x[F+V[$]]):(ve=96,ge=0),w=1<<S-ae,B=1<<H,q=B;do B-=w,R[D+(y>>ae)+B]=ue<<24|ve<<16|ge|0;while(B!==0);for(w=1<<S-1;y&w;)w>>=1;if(w!==0?(y&=w-1,y+=w):y=0,$++,--ne[S]===0){if(S===re)break;S=d[_+V[$]]}if(S>U&&(y&O)!==M){for(ae===0&&(ae=U),D+=q,H=S-ae,ee=1<<H;H+ae<re&&(ee-=ne[H+ae],!(ee<=0));)H++,ee<<=1;if(g+=1<<H,h===i&&g>r||h===s&&g>n)return 1;M=y&O,R[M]=U<<24|H<<16|D-L|0}}return y!==0&&(R[D+y]=S-ae<<24|64<<16|0),P.bits=U,0},ts}var xu;function kE(){if(xu)return jt;xu=1;var e=ai(),t=Dd(),r=Md(),n=OE(),o=xE(),i=0,s=1,c=2,l=4,u=5,f=6,h=0,d=1,_=2,T=-2,R=-3,L=-4,V=-5,P=8,k=1,S=2,$=3,q=4,re=5,U=6,H=7,ae=8,ee=9,g=10,y=11,w=12,B=13,M=14,O=15,D=16,x=17,F=18,G=19,ne=20,W=21,ie=22,fe=23,ue=24,ve=25,ge=26,_e=27,Le=28,Ne=29,Re=30,I=31,N=32,J=852,ce=592,le=15,he=le;function Te(j){return(j>>>24&255)+(j>>>8&65280)+((j&65280)<<8)+((j&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Be(j){var te;return!j||!j.state?T:(te=j.state,j.total_in=j.total_out=te.total=0,j.msg="",te.wrap&&(j.adler=te.wrap&1),te.mode=k,te.last=0,te.havedict=0,te.dmax=32768,te.head=null,te.hold=0,te.bits=0,te.lencode=te.lendyn=new e.Buf32(J),te.distcode=te.distdyn=new e.Buf32(ce),te.sane=1,te.back=-1,h)}function we(j){var te;return!j||!j.state?T:(te=j.state,te.wsize=0,te.whave=0,te.wnext=0,Be(j))}function Me(j,te){var p,se;return!j||!j.state||(se=j.state,te<0?(p=0,te=-te):(p=(te>>4)+1,te<48&&(te&=15)),te&&(te<8||te>15))?T:(se.window!==null&&se.wbits!==te&&(se.window=null),se.wrap=p,se.wbits=te,we(j))}function st(j,te){var p,se;return j?(se=new xe,j.state=se,se.window=null,p=Me(j,te),p!==h&&(j.state=null),p):T}function Je(j){return st(j,he)}var vt=!0,at,Ue;function Qe(j){if(vt){var te;for(at=new e.Buf32(512),Ue=new e.Buf32(32),te=0;te<144;)j.lens[te++]=8;for(;te<256;)j.lens[te++]=9;for(;te<280;)j.lens[te++]=7;for(;te<288;)j.lens[te++]=8;for(o(s,j.lens,0,288,at,0,j.work,{bits:9}),te=0;te<32;)j.lens[te++]=5;o(c,j.lens,0,32,Ue,0,j.work,{bits:5}),vt=!1}j.lencode=at,j.lenbits=9,j.distcode=Ue,j.distbits=5}function et(j,te,p,se){var Ie,a=j.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new e.Buf8(a.wsize)),se>=a.wsize?(e.arraySet(a.window,te,p-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(Ie=a.wsize-a.wnext,Ie>se&&(Ie=se),e.arraySet(a.window,te,p-se,Ie,a.wnext),se-=Ie,se?(e.arraySet(a.window,te,p-se,se,0),a.wnext=se,a.whave=a.wsize):(a.wnext+=Ie,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=Ie))),0}function v(j,te){var p,se,Ie,a,K,X,m,C,Z,Ee,b,E,Q,be,pe=0,Oe,je,ze,Ke,br,lr,Ze,ft,tt=new e.Buf8(4),ut,dt,Nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!j||!j.state||!j.output||!j.input&&j.avail_in!==0)return T;p=j.state,p.mode===w&&(p.mode=B),K=j.next_out,Ie=j.output,m=j.avail_out,a=j.next_in,se=j.input,X=j.avail_in,C=p.hold,Z=p.bits,Ee=X,b=m,ft=h;e:for(;;)switch(p.mode){case k:if(p.wrap===0){p.mode=B;break}for(;Z<16;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}if(p.wrap&2&&C===35615){p.check=0,tt[0]=C&255,tt[1]=C>>>8&255,p.check=r(p.check,tt,2,0),C=0,Z=0,p.mode=S;break}if(p.flags=0,p.head&&(p.head.done=!1),!(p.wrap&1)||(((C&255)<<8)+(C>>8))%31){j.msg="incorrect header check",p.mode=Re;break}if((C&15)!==P){j.msg="unknown compression method",p.mode=Re;break}if(C>>>=4,Z-=4,Ze=(C&15)+8,p.wbits===0)p.wbits=Ze;else if(Ze>p.wbits){j.msg="invalid window size",p.mode=Re;break}p.dmax=1<<Ze,j.adler=p.check=1,p.mode=C&512?g:w,C=0,Z=0;break;case S:for(;Z<16;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}if(p.flags=C,(p.flags&255)!==P){j.msg="unknown compression method",p.mode=Re;break}if(p.flags&57344){j.msg="unknown header flags set",p.mode=Re;break}p.head&&(p.head.text=C>>8&1),p.flags&512&&(tt[0]=C&255,tt[1]=C>>>8&255,p.check=r(p.check,tt,2,0)),C=0,Z=0,p.mode=$;case $:for(;Z<32;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}p.head&&(p.head.time=C),p.flags&512&&(tt[0]=C&255,tt[1]=C>>>8&255,tt[2]=C>>>16&255,tt[3]=C>>>24&255,p.check=r(p.check,tt,4,0)),C=0,Z=0,p.mode=q;case q:for(;Z<16;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}p.head&&(p.head.xflags=C&255,p.head.os=C>>8),p.flags&512&&(tt[0]=C&255,tt[1]=C>>>8&255,p.check=r(p.check,tt,2,0)),C=0,Z=0,p.mode=re;case re:if(p.flags&1024){for(;Z<16;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}p.length=C,p.head&&(p.head.extra_len=C),p.flags&512&&(tt[0]=C&255,tt[1]=C>>>8&255,p.check=r(p.check,tt,2,0)),C=0,Z=0}else p.head&&(p.head.extra=null);p.mode=U;case U:if(p.flags&1024&&(E=p.length,E>X&&(E=X),E&&(p.head&&(Ze=p.head.extra_len-p.length,p.head.extra||(p.head.extra=new Array(p.head.extra_len)),e.arraySet(p.head.extra,se,a,E,Ze)),p.flags&512&&(p.check=r(p.check,se,E,a)),X-=E,a+=E,p.length-=E),p.length))break e;p.length=0,p.mode=H;case H:if(p.flags&2048){if(X===0)break e;E=0;do Ze=se[a+E++],p.head&&Ze&&p.length<65536&&(p.head.name+=String.fromCharCode(Ze));while(Ze&&E<X);if(p.flags&512&&(p.check=r(p.check,se,E,a)),X-=E,a+=E,Ze)break e}else p.head&&(p.head.name=null);p.length=0,p.mode=ae;case ae:if(p.flags&4096){if(X===0)break e;E=0;do Ze=se[a+E++],p.head&&Ze&&p.length<65536&&(p.head.comment+=String.fromCharCode(Ze));while(Ze&&E<X);if(p.flags&512&&(p.check=r(p.check,se,E,a)),X-=E,a+=E,Ze)break e}else p.head&&(p.head.comment=null);p.mode=ee;case ee:if(p.flags&512){for(;Z<16;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}if(C!==(p.check&65535)){j.msg="header crc mismatch",p.mode=Re;break}C=0,Z=0}p.head&&(p.head.hcrc=p.flags>>9&1,p.head.done=!0),j.adler=p.check=0,p.mode=w;break;case g:for(;Z<32;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}j.adler=p.check=Te(C),C=0,Z=0,p.mode=y;case y:if(p.havedict===0)return j.next_out=K,j.avail_out=m,j.next_in=a,j.avail_in=X,p.hold=C,p.bits=Z,_;j.adler=p.check=1,p.mode=w;case w:if(te===u||te===f)break e;case B:if(p.last){C>>>=Z&7,Z-=Z&7,p.mode=_e;break}for(;Z<3;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}switch(p.last=C&1,C>>>=1,Z-=1,C&3){case 0:p.mode=M;break;case 1:if(Qe(p),p.mode=ne,te===f){C>>>=2,Z-=2;break e}break;case 2:p.mode=x;break;case 3:j.msg="invalid block type",p.mode=Re}C>>>=2,Z-=2;break;case M:for(C>>>=Z&7,Z-=Z&7;Z<32;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}if((C&65535)!==(C>>>16^65535)){j.msg="invalid stored block lengths",p.mode=Re;break}if(p.length=C&65535,C=0,Z=0,p.mode=O,te===f)break e;case O:p.mode=D;case D:if(E=p.length,E){if(E>X&&(E=X),E>m&&(E=m),E===0)break e;e.arraySet(Ie,se,a,E,K),X-=E,a+=E,m-=E,K+=E,p.length-=E;break}p.mode=w;break;case x:for(;Z<14;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}if(p.nlen=(C&31)+257,C>>>=5,Z-=5,p.ndist=(C&31)+1,C>>>=5,Z-=5,p.ncode=(C&15)+4,C>>>=4,Z-=4,p.nlen>286||p.ndist>30){j.msg="too many length or distance symbols",p.mode=Re;break}p.have=0,p.mode=F;case F:for(;p.have<p.ncode;){for(;Z<3;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}p.lens[Nt[p.have++]]=C&7,C>>>=3,Z-=3}for(;p.have<19;)p.lens[Nt[p.have++]]=0;if(p.lencode=p.lendyn,p.lenbits=7,ut={bits:p.lenbits},ft=o(i,p.lens,0,19,p.lencode,0,p.work,ut),p.lenbits=ut.bits,ft){j.msg="invalid code lengths set",p.mode=Re;break}p.have=0,p.mode=G;case G:for(;p.have<p.nlen+p.ndist;){for(;pe=p.lencode[C&(1<<p.lenbits)-1],Oe=pe>>>24,je=pe>>>16&255,ze=pe&65535,!(Oe<=Z);){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}if(ze<16)C>>>=Oe,Z-=Oe,p.lens[p.have++]=ze;else{if(ze===16){for(dt=Oe+2;Z<dt;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}if(C>>>=Oe,Z-=Oe,p.have===0){j.msg="invalid bit length repeat",p.mode=Re;break}Ze=p.lens[p.have-1],E=3+(C&3),C>>>=2,Z-=2}else if(ze===17){for(dt=Oe+3;Z<dt;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}C>>>=Oe,Z-=Oe,Ze=0,E=3+(C&7),C>>>=3,Z-=3}else{for(dt=Oe+7;Z<dt;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}C>>>=Oe,Z-=Oe,Ze=0,E=11+(C&127),C>>>=7,Z-=7}if(p.have+E>p.nlen+p.ndist){j.msg="invalid bit length repeat",p.mode=Re;break}for(;E--;)p.lens[p.have++]=Ze}}if(p.mode===Re)break;if(p.lens[256]===0){j.msg="invalid code -- missing end-of-block",p.mode=Re;break}if(p.lenbits=9,ut={bits:p.lenbits},ft=o(s,p.lens,0,p.nlen,p.lencode,0,p.work,ut),p.lenbits=ut.bits,ft){j.msg="invalid literal/lengths set",p.mode=Re;break}if(p.distbits=6,p.distcode=p.distdyn,ut={bits:p.distbits},ft=o(c,p.lens,p.nlen,p.ndist,p.distcode,0,p.work,ut),p.distbits=ut.bits,ft){j.msg="invalid distances set",p.mode=Re;break}if(p.mode=ne,te===f)break e;case ne:p.mode=W;case W:if(X>=6&&m>=258){j.next_out=K,j.avail_out=m,j.next_in=a,j.avail_in=X,p.hold=C,p.bits=Z,n(j,b),K=j.next_out,Ie=j.output,m=j.avail_out,a=j.next_in,se=j.input,X=j.avail_in,C=p.hold,Z=p.bits,p.mode===w&&(p.back=-1);break}for(p.back=0;pe=p.lencode[C&(1<<p.lenbits)-1],Oe=pe>>>24,je=pe>>>16&255,ze=pe&65535,!(Oe<=Z);){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}if(je&&!(je&240)){for(Ke=Oe,br=je,lr=ze;pe=p.lencode[lr+((C&(1<<Ke+br)-1)>>Ke)],Oe=pe>>>24,je=pe>>>16&255,ze=pe&65535,!(Ke+Oe<=Z);){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}C>>>=Ke,Z-=Ke,p.back+=Ke}if(C>>>=Oe,Z-=Oe,p.back+=Oe,p.length=ze,je===0){p.mode=ge;break}if(je&32){p.back=-1,p.mode=w;break}if(je&64){j.msg="invalid literal/length code",p.mode=Re;break}p.extra=je&15,p.mode=ie;case ie:if(p.extra){for(dt=p.extra;Z<dt;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}p.length+=C&(1<<p.extra)-1,C>>>=p.extra,Z-=p.extra,p.back+=p.extra}p.was=p.length,p.mode=fe;case fe:for(;pe=p.distcode[C&(1<<p.distbits)-1],Oe=pe>>>24,je=pe>>>16&255,ze=pe&65535,!(Oe<=Z);){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}if(!(je&240)){for(Ke=Oe,br=je,lr=ze;pe=p.distcode[lr+((C&(1<<Ke+br)-1)>>Ke)],Oe=pe>>>24,je=pe>>>16&255,ze=pe&65535,!(Ke+Oe<=Z);){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}C>>>=Ke,Z-=Ke,p.back+=Ke}if(C>>>=Oe,Z-=Oe,p.back+=Oe,je&64){j.msg="invalid distance code",p.mode=Re;break}p.offset=ze,p.extra=je&15,p.mode=ue;case ue:if(p.extra){for(dt=p.extra;Z<dt;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}p.offset+=C&(1<<p.extra)-1,C>>>=p.extra,Z-=p.extra,p.back+=p.extra}if(p.offset>p.dmax){j.msg="invalid distance too far back",p.mode=Re;break}p.mode=ve;case ve:if(m===0)break e;if(E=b-m,p.offset>E){if(E=p.offset-E,E>p.whave&&p.sane){j.msg="invalid distance too far back",p.mode=Re;break}E>p.wnext?(E-=p.wnext,Q=p.wsize-E):Q=p.wnext-E,E>p.length&&(E=p.length),be=p.window}else be=Ie,Q=K-p.offset,E=p.length;E>m&&(E=m),m-=E,p.length-=E;do Ie[K++]=be[Q++];while(--E);p.length===0&&(p.mode=W);break;case ge:if(m===0)break e;Ie[K++]=p.length,m--,p.mode=W;break;case _e:if(p.wrap){for(;Z<32;){if(X===0)break e;X--,C|=se[a++]<<Z,Z+=8}if(b-=m,j.total_out+=b,p.total+=b,b&&(j.adler=p.check=p.flags?r(p.check,Ie,b,K-b):t(p.check,Ie,b,K-b)),b=m,(p.flags?C:Te(C))!==p.check){j.msg="incorrect data check",p.mode=Re;break}C=0,Z=0}p.mode=Le;case Le:if(p.wrap&&p.flags){for(;Z<32;){if(X===0)break e;X--,C+=se[a++]<<Z,Z+=8}if(C!==(p.total&4294967295)){j.msg="incorrect length check",p.mode=Re;break}C=0,Z=0}p.mode=Ne;case Ne:ft=d;break e;case Re:ft=R;break e;case I:return L;case N:default:return T}return j.next_out=K,j.avail_out=m,j.next_in=a,j.avail_in=X,p.hold=C,p.bits=Z,(p.wsize||b!==j.avail_out&&p.mode<Re&&(p.mode<_e||te!==l))&&et(j,j.output,j.next_out,b-j.avail_out),Ee-=j.avail_in,b-=j.avail_out,j.total_in+=Ee,j.total_out+=b,p.total+=b,p.wrap&&b&&(j.adler=p.check=p.flags?r(p.check,Ie,b,j.next_out-b):t(p.check,Ie,b,j.next_out-b)),j.data_type=p.bits+(p.last?64:0)+(p.mode===w?128:0)+(p.mode===ne||p.mode===O?256:0),(Ee===0&&b===0||te===l)&&ft===h&&(ft=V),ft}function oe(j){if(!j||!j.state)return T;var te=j.state;return te.window&&(te.window=null),j.state=null,h}function de(j,te){var p;return!j||!j.state||(p=j.state,!(p.wrap&2))?T:(p.head=te,te.done=!1,h)}function ye(j,te){var p=te.length,se,Ie,a;return!j||!j.state||(se=j.state,se.wrap!==0&&se.mode!==y)?T:se.mode===y&&(Ie=1,Ie=t(Ie,te,p,0),Ie!==se.check)?R:(a=et(j,te,p,p),a?(se.mode=I,L):(se.havedict=1,h))}return jt.inflateReset=we,jt.inflateReset2=Me,jt.inflateResetKeep=Be,jt.inflateInit=Je,jt.inflateInit2=st,jt.inflate=v,jt.inflateEnd=oe,jt.inflateGetHeader=de,jt.inflateSetDictionary=ye,jt.inflateInfo="pako inflate (from Nodeca project)",jt}var ku,Pu;function PE(){return Pu||(Pu=1,ku={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),ku}var Lu;function LE(){return Lu||(Lu=1,function(e){var t=Zu(),r=RE(),n=TE(),o=kE(),i=PE();for(var s in i)e[s]=i[s];e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7;var c=31,l=139;function u(f){if(typeof f!="number"||f<e.DEFLATE||f>e.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=f,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}u.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,t(this.init_done,"close before init"),t(this.mode<=e.UNZIP),this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?n.deflateEnd(this.strm):(this.mode===e.INFLATE||this.mode===e.GUNZIP||this.mode===e.INFLATERAW||this.mode===e.UNZIP)&&o.inflateEnd(this.strm),this.mode=e.NONE,this.dictionary=null},u.prototype.write=function(f,h,d,_,T,R,L){return this._write(!0,f,h,d,_,T,R,L)},u.prototype.writeSync=function(f,h,d,_,T,R,L){return this._write(!1,f,h,d,_,T,R,L)},u.prototype._write=function(f,h,d,_,T,R,L,V){if(t.equal(arguments.length,8),t(this.init_done,"write before init"),t(this.mode!==e.NONE,"already finalized"),t.equal(!1,this.write_in_progress,"write already in progress"),t.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,t.equal(!1,h===void 0,"must provide flush value"),this.write_in_progress=!0,h!==e.Z_NO_FLUSH&&h!==e.Z_PARTIAL_FLUSH&&h!==e.Z_SYNC_FLUSH&&h!==e.Z_FULL_FLUSH&&h!==e.Z_FINISH&&h!==e.Z_BLOCK)throw new Error("Invalid flush value");if(d==null&&(d=me.Buffer.alloc(0),T=0,_=0),this.strm.avail_in=T,this.strm.input=d,this.strm.next_in=_,this.strm.avail_out=V,this.strm.output=R,this.strm.next_out=L,this.flush=h,!f)return this._process(),this._checkError()?this._afterSync():void 0;var P=this;return me.process.nextTick(function(){P._process(),P._after()}),this},u.prototype._afterSync=function(){var f=this.strm.avail_out,h=this.strm.avail_in;return this.write_in_progress=!1,[h,f]},u.prototype._process=function(){var f=null;switch(this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=n.deflate(this.strm,this.flush);break;case e.UNZIP:switch(this.strm.avail_in>0&&(f=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(f===null)break;if(this.strm.input[f]===c){if(this.gzip_id_bytes_read=1,f++,this.strm.avail_in===1)break}else{this.mode=e.INFLATE;break}case 1:if(f===null)break;this.strm.input[f]===l?(this.gzip_id_bytes_read=2,this.mode=e.GUNZIP):this.mode=e.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:for(this.err=o.inflate(this.strm,this.flush),this.err===e.Z_NEED_DICT&&this.dictionary&&(this.err=o.inflateSetDictionary(this.strm,this.dictionary),this.err===e.Z_OK?this.err=o.inflate(this.strm,this.flush):this.err===e.Z_DATA_ERROR&&(this.err=e.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===e.GUNZIP&&this.err===e.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=o.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},u.prototype._checkError=function(){switch(this.err){case e.Z_OK:case e.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===e.Z_FINISH)return this._error("unexpected end of file"),!1;break;case e.Z_STREAM_END:break;case e.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},u.prototype._after=function(){if(this._checkError()){var f=this.strm.avail_out,h=this.strm.avail_in;this.write_in_progress=!1,this.callback(h,f),this.pending_close&&this.close()}},u.prototype._error=function(f){this.strm.msg&&(f=this.strm.msg),this.onerror(f,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},u.prototype.init=function(f,h,d,_,T){t(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),t(f>=8&&f<=15,"invalid windowBits"),t(h>=-1&&h<=9,"invalid compression level"),t(d>=1&&d<=9,"invalid memlevel"),t(_===e.Z_FILTERED||_===e.Z_HUFFMAN_ONLY||_===e.Z_RLE||_===e.Z_FIXED||_===e.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(h,f,d,_,T),this._setDictionary()},u.prototype.params=function(){throw new Error("deflateParams Not supported")},u.prototype.reset=function(){this._reset(),this._setDictionary()},u.prototype._init=function(f,h,d,_,T){switch(this.level=f,this.windowBits=h,this.memLevel=d,this.strategy=_,this.flush=e.Z_NO_FLUSH,this.err=e.Z_OK,(this.mode===e.GZIP||this.mode===e.GUNZIP)&&(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),(this.mode===e.DEFLATERAW||this.mode===e.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new r,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=n.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:this.err=o.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==e.Z_OK&&this._error("Init error"),this.dictionary=T,this.write_in_progress=!1,this.init_done=!0},u.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:this.err=n.deflateSetDictionary(this.strm,this.dictionary);break}this.err!==e.Z_OK&&this._error("Failed to set dictionary")}},u.prototype._reset=function(){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:case e.GZIP:this.err=n.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:case e.GUNZIP:this.err=o.inflateReset(this.strm);break}this.err!==e.Z_OK&&this._error("Failed to reset stream")},e.Zlib=u}(mu)),mu}var Nu;function NE(){return Nu||(Nu=1,function(e){var t=ir.Buffer,r=Ch().Transform,n=LE(),o=Ju,i=Zu().ok,s=ir.kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+s.toString(16)+" bytes";n.Z_MIN_WINDOWBITS=8,n.Z_MAX_WINDOWBITS=15,n.Z_DEFAULT_WINDOWBITS=15,n.Z_MIN_CHUNK=64,n.Z_MAX_CHUNK=1/0,n.Z_DEFAULT_CHUNK=16*1024,n.Z_MIN_MEMLEVEL=1,n.Z_MAX_MEMLEVEL=9,n.Z_DEFAULT_MEMLEVEL=8,n.Z_MIN_LEVEL=-1,n.Z_MAX_LEVEL=9,n.Z_DEFAULT_LEVEL=n.Z_DEFAULT_COMPRESSION;for(var l=Object.keys(n),u=0;u<l.length;u++){var f=l[u];f.match(/^Z/)&&Object.defineProperty(e,f,{enumerable:!0,value:n[f],writable:!1})}for(var h={Z_OK:n.Z_OK,Z_STREAM_END:n.Z_STREAM_END,Z_NEED_DICT:n.Z_NEED_DICT,Z_ERRNO:n.Z_ERRNO,Z_STREAM_ERROR:n.Z_STREAM_ERROR,Z_DATA_ERROR:n.Z_DATA_ERROR,Z_MEM_ERROR:n.Z_MEM_ERROR,Z_BUF_ERROR:n.Z_BUF_ERROR,Z_VERSION_ERROR:n.Z_VERSION_ERROR},d=Object.keys(h),_=0;_<d.length;_++){var T=d[_];h[h[T]]=T}Object.defineProperty(e,"codes",{enumerable:!0,value:Object.freeze(h),writable:!1}),e.Deflate=V,e.Inflate=P,e.Gzip=k,e.Gunzip=S,e.DeflateRaw=$,e.InflateRaw=q,e.Unzip=re,e.createDeflate=function(g){return new V(g)},e.createInflate=function(g){return new P(g)},e.createDeflateRaw=function(g){return new $(g)},e.createInflateRaw=function(g){return new q(g)},e.createGzip=function(g){return new k(g)},e.createGunzip=function(g){return new S(g)},e.createUnzip=function(g){return new re(g)},e.deflate=function(g,y,w){return typeof y=="function"&&(w=y,y={}),R(new V(y),g,w)},e.deflateSync=function(g,y){return L(new V(y),g)},e.gzip=function(g,y,w){return typeof y=="function"&&(w=y,y={}),R(new k(y),g,w)},e.gzipSync=function(g,y){return L(new k(y),g)},e.deflateRaw=function(g,y,w){return typeof y=="function"&&(w=y,y={}),R(new $(y),g,w)},e.deflateRawSync=function(g,y){return L(new $(y),g)},e.unzip=function(g,y,w){return typeof y=="function"&&(w=y,y={}),R(new re(y),g,w)},e.unzipSync=function(g,y){return L(new re(y),g)},e.inflate=function(g,y,w){return typeof y=="function"&&(w=y,y={}),R(new P(y),g,w)},e.inflateSync=function(g,y){return L(new P(y),g)},e.gunzip=function(g,y,w){return typeof y=="function"&&(w=y,y={}),R(new S(y),g,w)},e.gunzipSync=function(g,y){return L(new S(y),g)},e.inflateRaw=function(g,y,w){return typeof y=="function"&&(w=y,y={}),R(new q(y),g,w)},e.inflateRawSync=function(g,y){return L(new q(y),g)};function R(g,y,w){var B=[],M=0;g.on("error",D),g.on("end",x),g.end(y),O();function O(){for(var F;(F=g.read())!==null;)B.push(F),M+=F.length;g.once("readable",O)}function D(F){g.removeListener("end",x),g.removeListener("readable",O),w(F)}function x(){var F,G=null;M>=s?G=new RangeError(c):F=t.concat(B,M),B=[],g.close(),w(G,F)}}function L(g,y){if(typeof y=="string"&&(y=t.from(y)),!t.isBuffer(y))throw new TypeError("Not a string or buffer");var w=g._finishFlushFlag;return g._processChunk(y,w)}function V(g){if(!(this instanceof V))return new V(g);H.call(this,g,n.DEFLATE)}function P(g){if(!(this instanceof P))return new P(g);H.call(this,g,n.INFLATE)}function k(g){if(!(this instanceof k))return new k(g);H.call(this,g,n.GZIP)}function S(g){if(!(this instanceof S))return new S(g);H.call(this,g,n.GUNZIP)}function $(g){if(!(this instanceof $))return new $(g);H.call(this,g,n.DEFLATERAW)}function q(g){if(!(this instanceof q))return new q(g);H.call(this,g,n.INFLATERAW)}function re(g){if(!(this instanceof re))return new re(g);H.call(this,g,n.UNZIP)}function U(g){return g===n.Z_NO_FLUSH||g===n.Z_PARTIAL_FLUSH||g===n.Z_SYNC_FLUSH||g===n.Z_FULL_FLUSH||g===n.Z_FINISH||g===n.Z_BLOCK}function H(g,y){var w=this;if(this._opts=g=g||{},this._chunkSize=g.chunkSize||e.Z_DEFAULT_CHUNK,r.call(this,g),g.flush&&!U(g.flush))throw new Error("Invalid flush flag: "+g.flush);if(g.finishFlush&&!U(g.finishFlush))throw new Error("Invalid flush flag: "+g.finishFlush);if(this._flushFlag=g.flush||n.Z_NO_FLUSH,this._finishFlushFlag=typeof g.finishFlush<"u"?g.finishFlush:n.Z_FINISH,g.chunkSize&&(g.chunkSize<e.Z_MIN_CHUNK||g.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+g.chunkSize);if(g.windowBits&&(g.windowBits<e.Z_MIN_WINDOWBITS||g.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+g.windowBits);if(g.level&&(g.level<e.Z_MIN_LEVEL||g.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+g.level);if(g.memLevel&&(g.memLevel<e.Z_MIN_MEMLEVEL||g.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+g.memLevel);if(g.strategy&&g.strategy!=e.Z_FILTERED&&g.strategy!=e.Z_HUFFMAN_ONLY&&g.strategy!=e.Z_RLE&&g.strategy!=e.Z_FIXED&&g.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+g.strategy);if(g.dictionary&&!t.isBuffer(g.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new n.Zlib(y);var B=this;this._hadError=!1,this._handle.onerror=function(D,x){ae(B),B._hadError=!0;var F=new Error(D);F.errno=x,F.code=e.codes[x],B.emit("error",F)};var M=e.Z_DEFAULT_COMPRESSION;typeof g.level=="number"&&(M=g.level);var O=e.Z_DEFAULT_STRATEGY;typeof g.strategy=="number"&&(O=g.strategy),this._handle.init(g.windowBits||e.Z_DEFAULT_WINDOWBITS,M,g.memLevel||e.Z_DEFAULT_MEMLEVEL,O,g.dictionary),this._buffer=t.allocUnsafe(this._chunkSize),this._offset=0,this._level=M,this._strategy=O,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!w._handle},configurable:!0,enumerable:!0})}o.inherits(H,r),H.prototype.params=function(g,y,w){if(g<e.Z_MIN_LEVEL||g>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+g);if(y!=e.Z_FILTERED&&y!=e.Z_HUFFMAN_ONLY&&y!=e.Z_RLE&&y!=e.Z_FIXED&&y!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+y);if(this._level!==g||this._strategy!==y){var B=this;this.flush(n.Z_SYNC_FLUSH,function(){i(B._handle,"zlib binding closed"),B._handle.params(g,y),B._hadError||(B._level=g,B._strategy=y,w&&w())})}else me.process.nextTick(w)},H.prototype.reset=function(){return i(this._handle,"zlib binding closed"),this._handle.reset()},H.prototype._flush=function(g){this._transform(t.alloc(0),"",g)},H.prototype.flush=function(g,y){var w=this,B=this._writableState;(typeof g=="function"||g===void 0&&!y)&&(y=g,g=n.Z_FULL_FLUSH),B.ended?y&&me.process.nextTick(y):B.ending?y&&this.once("end",y):B.needDrain?y&&this.once("drain",function(){return w.flush(g,y)}):(this._flushFlag=g,this.write(t.alloc(0),"",y))},H.prototype.close=function(g){ae(this,g),me.process.nextTick(ee,this)};function ae(g,y){y&&me.process.nextTick(y),g._handle&&(g._handle.close(),g._handle=null)}function ee(g){g.emit("close")}H.prototype._transform=function(g,y,w){var B,M=this._writableState,O=M.ending||M.ended,D=O&&(!g||M.length===g.length);if(g!==null&&!t.isBuffer(g))return w(new Error("invalid input"));if(!this._handle)return w(new Error("zlib binding closed"));D?B=this._finishFlushFlag:(B=this._flushFlag,g.length>=M.length&&(this._flushFlag=this._opts.flush||n.Z_NO_FLUSH)),this._processChunk(g,B,w)},H.prototype._processChunk=function(g,y,w){var B=g&&g.length,M=this._chunkSize-this._offset,O=0,D=this,x=typeof w=="function";if(!x){var F=[],G=0,ne;this.on("error",function(ve){ne=ve}),i(this._handle,"zlib binding closed");do var W=this._handle.writeSync(y,g,O,B,this._buffer,this._offset,M);while(!this._hadError&&ue(W[0],W[1]));if(this._hadError)throw ne;if(G>=s)throw ae(this),new RangeError(c);var ie=t.concat(F,G);return ae(this),ie}i(this._handle,"zlib binding closed");var fe=this._handle.write(y,g,O,B,this._buffer,this._offset,M);fe.buffer=g,fe.callback=ue;function ue(ve,ge){if(this&&(this.buffer=null,this.callback=null),!D._hadError){var _e=M-ge;if(i(_e>=0,"have should not go down"),_e>0){var Le=D._buffer.slice(D._offset,D._offset+_e);D._offset+=_e,x?D.push(Le):(F.push(Le),G+=Le.length)}if((ge===0||D._offset>=D._chunkSize)&&(M=D._chunkSize,D._offset=0,D._buffer=t.allocUnsafe(D._chunkSize)),ge===0){if(O+=B-ve,B=ve,!x)return!0;var Ne=D._handle.write(y,g,O,B,D._buffer,D._offset,D._chunkSize);Ne.callback=ue,Ne.buffer=g;return}if(!x)return!1;w()}}},o.inherits(V,H),o.inherits(P,H),o.inherits(k,H),o.inherits(S,H),o.inherits($,H),o.inherits(q,H),o.inherits(re,H)}(bu)),bu}Object.defineProperty(jr,"__esModule",{value:!0});jr.InvalidStatusCodeError=jr.InvalidCertError=void 0;const Fd=Object.freeze({redirect:!0,expectStatusCode:200,headers:{},full:!1,keepAlive:!0,cors:!1,referrer:!1,sslAllowSelfSigned:!1,_redirectCount:0});class xs extends Error{constructor(t,r){super(t),this.fingerprint256=r}}jr.InvalidCertError=xs;class Ra extends Error{constructor(t){super(`Request Failed. Status Code: ${t}`),this.statusCode=t}}jr.InvalidStatusCodeError=Ra;function Ud(e,t){if(!t||t==="text"||t==="json")try{let r=new TextDecoder("utf8",{fatal:!0}).decode(e);if(t==="text")return r;try{return JSON.parse(r)}catch(n){if(t==="json")throw n;return r}}catch(r){if(t==="text"||t==="json")throw r}return e}let Cu={};function ks(e,t){var r;let n={...Fd,...t};const o=jh,i=$h,s=NE(),{promisify:c}=Ju,{resolve:l}=Dh,u=!!/^https/.test(e);let f={method:n.method||"GET",headers:{"Accept-Encoding":"gzip, deflate, br"}};const h=_=>_.replace(/:| /g,"").toLowerCase();if(n.keepAlive){const _={keepAlive:!0,keepAliveMsecs:3e4,maxFreeSockets:1024,maxCachedSessions:1024},T=[u,u&&((r=n.sslPinnedCertificates)==null?void 0:r.map(R=>h(R)).sort())].join();f.agent=Cu[T]||(Cu[T]=new(u?i:o).Agent(_))}n.type==="json"&&(f.headers["Content-Type"]="application/json"),n.data&&(n.method||(f.method="POST"),f.body=n.type==="json"?JSON.stringify(n.data):n.data),f.headers={...f.headers,...n.headers},n.sslAllowSelfSigned&&(f.rejectUnauthorized=!1);const d=async _=>{const T=_.statusCode;if(n.redirect&&300<=T&&T<400&&_.headers.location){if(n._redirectCount==10)throw new Error("Request failed. Too much redirects.");return n._redirectCount+=1,await ks(l(e,_.headers.location),n)}if(n.expectStatusCode&&T!==n.expectStatusCode)throw _.resume(),new Ra(T);let R=[];for await(const k of _)R.push(k);let L=me.Buffer.concat(R);const V=_.headers["content-encoding"];V==="br"&&(L=await c(s.brotliDecompress)(L)),(V==="gzip"||V==="deflate")&&(L=await c(s.unzip)(L));const P=Ud(L,n.type);return n.full?{headers:_.headers,status:T,body:P}:P};return new Promise((_,T)=>{var R;const L=async S=>{if(S&&S.code==="DEPTH_ZERO_SELF_SIGNED_CERT")try{await ks(e,{...n,sslAllowSelfSigned:!0,sslPinnedCertificates:[]})}catch($){$&&$.fingerprint256&&(S=new xs(`Self-signed SSL certificate: ${$.fingerprint256}`,$.fingerprint256))}T(S)},V=(u?i:o).request(e,f,S=>{S.on("error",L),(async()=>{try{_(await d(S))}catch($){T($)}})()});V.on("error",L);const P=(R=n.sslPinnedCertificates)==null?void 0:R.map(S=>h(S)),k=S=>{var $;const q=h((($=S.getPeerCertificate())==null?void 0:$.fingerprint256)||"");if(!(!q&&S.isSessionReused())&&!P.includes(q))return V.emit("error",new xs(`Invalid SSL certificate: ${q} Expected: ${P}`,q)),V.abort()};n.sslPinnedCertificates&&V.on("socket",S=>{S.listeners("secureConnect").map($=>($.name||"").replace("bound ","")).includes("mfetchSecureConnect")||S.on("secureConnect",k.bind(null,S))}),n.keepAlive&&V.setNoDelay(!0),f.body&&V.write(f.body),V.end()})}const CE=new Set(["Accept","Accept-Language","Content-Language","Content-Type"].map(e=>e.toLowerCase())),BE=new Set(["Accept-Charset","Accept-Encoding","Access-Control-Request-Headers","Access-Control-Request-Method","Connection","Content-Length","Cookie","Cookie2","Date","DNT","Expect","Host","Keep-Alive","Origin","Referer","TE","Trailer","Transfer-Encoding","Upgrade","Via"].map(e=>e.toLowerCase()));async function jE(e,t){let r={...Fd,...t};const n=new Headers;r.type==="json"&&n.set("Content-Type","application/json");let o=new URL(e);if(o.username){const l=btoa(`${o.username}:${o.password}`);n.set("Authorization",`Basic ${l}`),o.username="",o.password=""}e=""+o;for(let l in r.headers){const u=l.toLowerCase();(CE.has(u)||r.cors&&!BE.has(u))&&n.set(l,r.headers[l])}let i={headers:n,redirect:r.redirect?"follow":"manual"};r.referrer||(i.referrerPolicy="no-referrer"),r.cors&&(i.mode="cors"),r.data&&(r.method||(i.method="POST"),i.body=r.type==="json"?JSON.stringify(r.data):r.data);const s=await fetch(e,i);if(r.expectStatusCode&&s.status!==r.expectStatusCode)throw new Ra(s.status);const c=Ud(new Uint8Array(await s.arrayBuffer()),r.type);return r.full?{headers:Object.fromEntries(s.headers.entries()),status:s.status,body:c}:c}const $E=!!(typeof me.process=="object"&&me.process.versions&&me.process.versions.node&&me.process.versions.v8);function DE(e,t){return($E?ks:jE)(e,t)}jr.default=DE;Object.defineProperty(an,"__esModule",{value:!0});an.getProvider=an.fetchFromProvider=void 0;const ME=jr,FE=async(e,t)=>(await(0,ME.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;an.fetchFromProvider=FE;const UE=e=>{var t;if(typeof e=="string")return e;if(((t=e==null?void 0:e.connection)==null?void 0:t.url)!==void 0)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")};an.getProvider=UE;(function(e){var t=rt&&rt.__createBinding||(Object.create?function(o,i,s,c){c===void 0&&(c=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(o,c,l)}:function(o,i,s,c){c===void 0&&(c=s),o[c]=i[s]}),r=rt&&rt.__exportStar||function(o,i){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&t(i,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.toAscii=e.stripHexPrefix=e.padToEven=e.isHexString=e.isHexPrefixed=e.getKeys=e.getBinarySize=e.fromUtf8=e.fromAscii=e.arrayContainsArray=void 0,r(Zo,e),r(ei,e),r(wa,e),r(Zn,e),r(ri,e),r(_t,e),r(zr,e),r(Sa,e),r($d,e),r(ii,e);var n=Ve;Object.defineProperty(e,"arrayContainsArray",{enumerable:!0,get:function(){return n.arrayContainsArray}}),Object.defineProperty(e,"fromAscii",{enumerable:!0,get:function(){return n.fromAscii}}),Object.defineProperty(e,"fromUtf8",{enumerable:!0,get:function(){return n.fromUtf8}}),Object.defineProperty(e,"getBinarySize",{enumerable:!0,get:function(){return n.getBinarySize}}),Object.defineProperty(e,"getKeys",{enumerable:!0,get:function(){return n.getKeys}}),Object.defineProperty(e,"isHexPrefixed",{enumerable:!0,get:function(){return n.isHexPrefixed}}),Object.defineProperty(e,"isHexString",{enumerable:!0,get:function(){return n.isHexString}}),Object.defineProperty(e,"padToEven",{enumerable:!0,get:function(){return n.padToEven}}),Object.defineProperty(e,"stripHexPrefix",{enumerable:!0,get:function(){return n.stripHexPrefix}}),Object.defineProperty(e,"toAscii",{enumerable:!0,get:function(){return n.toAscii}}),r(si,e),r(an,e)})(Ww);var Hd={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.log=r()})(rt,function(){var t=function(){},r="undefined",n=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],i={},s=null;function c(R,L){var V=R[L];if(typeof V.bind=="function")return V.bind(R);try{return Function.prototype.bind.call(V,R)}catch{return function(){return Function.prototype.apply.apply(V,[R,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function u(R){return R==="debug"&&(R="log"),typeof console===r?!1:R==="trace"&&n?l:console[R]!==void 0?c(console,R):console.log!==void 0?c(console,"log"):t}function f(){for(var R=this.getLevel(),L=0;L<o.length;L++){var V=o[L];this[V]=L<R?t:this.methodFactory(V,R,this.name)}if(this.log=this.debug,typeof console===r&&R<this.levels.SILENT)return"No console available for logging"}function h(R){return function(){typeof console!==r&&(f.call(this),this[R].apply(this,arguments))}}function d(R,L,V){return u(R)||h.apply(this,arguments)}function _(R,L){var V=this,P,k,S,$="loglevel";typeof R=="string"?$+=":"+R:typeof R=="symbol"&&($=void 0);function q(ee){var g=(o[ee]||"silent").toUpperCase();if(!(typeof window===r||!$)){try{window.localStorage[$]=g;return}catch{}try{window.document.cookie=encodeURIComponent($)+"="+g+";"}catch{}}}function re(){var ee;if(!(typeof window===r||!$)){try{ee=window.localStorage[$]}catch{}if(typeof ee===r)try{var g=window.document.cookie,y=encodeURIComponent($),w=g.indexOf(y+"=");w!==-1&&(ee=/^([^;]+)/.exec(g.slice(w+y.length+1))[1])}catch{}return V.levels[ee]===void 0&&(ee=void 0),ee}}function U(){if(!(typeof window===r||!$)){try{window.localStorage.removeItem($)}catch{}try{window.document.cookie=encodeURIComponent($)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function H(ee){var g=ee;if(typeof g=="string"&&V.levels[g.toUpperCase()]!==void 0&&(g=V.levels[g.toUpperCase()]),typeof g=="number"&&g>=0&&g<=V.levels.SILENT)return g;throw new TypeError("log.setLevel() called with invalid level: "+ee)}V.name=R,V.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},V.methodFactory=L||d,V.getLevel=function(){return S??k??P},V.setLevel=function(ee,g){return S=H(ee),g!==!1&&q(S),f.call(V)},V.setDefaultLevel=function(ee){k=H(ee),re()||V.setLevel(ee,!1)},V.resetLevel=function(){S=null,U(),f.call(V)},V.enableAll=function(ee){V.setLevel(V.levels.TRACE,ee)},V.disableAll=function(ee){V.setLevel(V.levels.SILENT,ee)},V.rebuild=function(){if(s!==V&&(P=H(s.getLevel())),f.call(V),s===V)for(var ee in i)i[ee].rebuild()},P=H(s?s.getLevel():"WARN");var ae=re();ae!=null&&(S=H(ae)),f.call(V)}s=new _,s.getLogger=function(R){if(typeof R!="symbol"&&typeof R!="string"||R==="")throw new TypeError("You must supply a name when creating a logger.");var L=i[R];return L||(L=i[R]=new _(R,s.methodFactory)),L};var T=typeof window!==r?window.log:void 0;return s.noConflict=function(){return typeof window!==r&&window.log===s&&(window.log=T),s},s.getLoggers=function(){return i},s.default=s,s})})(Hd);var zd=Hd.exports;const So=Rr(zd);var Ro={exports:{}};Ro.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",o=800,i=16,s=9007199254740991,c="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",f="[object Boolean]",h="[object Date]",d="[object Error]",_="[object Function]",T="[object GeneratorFunction]",R="[object Map]",L="[object Number]",V="[object Null]",P="[object Object]",k="[object Proxy]",S="[object RegExp]",$="[object Set]",q="[object String]",re="[object Undefined]",U="[object WeakMap]",H="[object ArrayBuffer]",ae="[object DataView]",ee="[object Float32Array]",g="[object Float64Array]",y="[object Int8Array]",w="[object Int16Array]",B="[object Int32Array]",M="[object Uint8Array]",O="[object Uint8ClampedArray]",D="[object Uint16Array]",x="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,G=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,W={};W[ee]=W[g]=W[y]=W[w]=W[B]=W[M]=W[O]=W[D]=W[x]=!0,W[c]=W[l]=W[H]=W[f]=W[ae]=W[h]=W[d]=W[_]=W[R]=W[L]=W[P]=W[S]=W[$]=W[q]=W[U]=!1;var ie=typeof rt=="object"&&rt&&rt.Object===Object&&rt,fe=typeof self=="object"&&self&&self.Object===Object&&self,ue=ie||fe||Function("return this")(),ve=t&&!t.nodeType&&t,ge=ve&&!0&&e&&!e.nodeType&&e,_e=ge&&ge.exports===ve,Le=_e&&ie.process,Ne=function(){try{var A=ge&&ge.require&&ge.require("util").types;return A||Le&&Le.binding&&Le.binding("util")}catch{}}(),Re=Ne&&Ne.isTypedArray;function I(A,z,Y){switch(Y.length){case 0:return A.call(z);case 1:return A.call(z,Y[0]);case 2:return A.call(z,Y[0],Y[1]);case 3:return A.call(z,Y[0],Y[1],Y[2])}return A.apply(z,Y)}function N(A,z){for(var Y=-1,Se=Array(A);++Y<A;)Se[Y]=z(Y);return Se}function J(A){return function(z){return A(z)}}function ce(A,z){return A==null?void 0:A[z]}function le(A,z){return function(Y){return A(z(Y))}}var he=Array.prototype,Te=Function.prototype,xe=Object.prototype,Be=ue["__core-js_shared__"],we=Te.toString,Me=xe.hasOwnProperty,st=function(){var A=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),Je=xe.toString,vt=we.call(Object),at=RegExp("^"+we.call(Me).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=_e?ue.Buffer:void 0,Qe=ue.Symbol,et=ue.Uint8Array;Ue&&Ue.allocUnsafe;var v=le(Object.getPrototypeOf,Object),oe=Object.create,de=xe.propertyIsEnumerable,ye=he.splice,j=Qe?Qe.toStringTag:void 0,te=function(){try{var A=hi(Object,"defineProperty");return A({},"",{}),A}catch{}}(),p=Ue?Ue.isBuffer:void 0,se=Math.max,Ie=Date.now,a=hi(ue,"Map"),K=hi(Object,"create"),X=function(){function A(){}return function(z){if(!Tr(z))return{};if(oe)return oe(z);A.prototype=z;var Y=new A;return A.prototype=void 0,Y}}();function m(A){var z=-1,Y=A==null?0:A.length;for(this.clear();++z<Y;){var Se=A[z];this.set(Se[0],Se[1])}}function C(){this.__data__=K?K(null):{},this.size=0}function Z(A){var z=this.has(A)&&delete this.__data__[A];return this.size-=z?1:0,z}function Ee(A){var z=this.__data__;if(K){var Y=z[A];return Y===n?void 0:Y}return Me.call(z,A)?z[A]:void 0}function b(A){var z=this.__data__;return K?z[A]!==void 0:Me.call(z,A)}function E(A,z){var Y=this.__data__;return this.size+=this.has(A)?0:1,Y[A]=K&&z===void 0?n:z,this}m.prototype.clear=C,m.prototype.delete=Z,m.prototype.get=Ee,m.prototype.has=b,m.prototype.set=E;function Q(A){var z=-1,Y=A==null?0:A.length;for(this.clear();++z<Y;){var Se=A[z];this.set(Se[0],Se[1])}}function be(){this.__data__=[],this.size=0}function pe(A){var z=this.__data__,Y=Jn(z,A);if(Y<0)return!1;var Se=z.length-1;return Y==Se?z.pop():ye.call(z,Y,1),--this.size,!0}function Oe(A){var z=this.__data__,Y=Jn(z,A);return Y<0?void 0:z[Y][1]}function je(A){return Jn(this.__data__,A)>-1}function ze(A,z){var Y=this.__data__,Se=Jn(Y,A);return Se<0?(++this.size,Y.push([A,z])):Y[Se][1]=z,this}Q.prototype.clear=be,Q.prototype.delete=pe,Q.prototype.get=Oe,Q.prototype.has=je,Q.prototype.set=ze;function Ke(A){var z=-1,Y=A==null?0:A.length;for(this.clear();++z<Y;){var Se=A[z];this.set(Se[0],Se[1])}}function br(){this.size=0,this.__data__={hash:new m,map:new(a||Q),string:new m}}function lr(A){var z=Xn(this,A).delete(A);return this.size-=z?1:0,z}function Ze(A){return Xn(this,A).get(A)}function ft(A){return Xn(this,A).has(A)}function tt(A,z){var Y=Xn(this,A),Se=Y.size;return Y.set(A,z),this.size+=Y.size==Se?0:1,this}Ke.prototype.clear=br,Ke.prototype.delete=lr,Ke.prototype.get=Ze,Ke.prototype.has=ft,Ke.prototype.set=tt;function ut(A){var z=this.__data__=new Q(A);this.size=z.size}function dt(){this.__data__=new Q,this.size=0}function Nt(A){var z=this.__data__,Y=z.delete(A);return this.size=z.size,Y}function Ht(A){return this.__data__.get(A)}function Kd(A){return this.__data__.has(A)}function Xd(A,z){var Y=this.__data__;if(Y instanceof Q){var Se=Y.__data__;if(!a||Se.length<r-1)return Se.push([A,z]),this.size=++Y.size,this;Y=this.__data__=new Ke(Se)}return Y.set(A,z),this.size=Y.size,this}ut.prototype.clear=dt,ut.prototype.delete=Nt,ut.prototype.get=Ht,ut.prototype.has=Kd,ut.prototype.set=Xd;function Yd(A,z){var Y=bi(A),Se=!Y&&gi(A),$e=!Y&&!Se&&Na(A),We=!Y&&!Se&&!$e&&Ba(A),Xe=Y||Se||$e||We,Fe=Xe?N(A.length,String):[],Ye=Fe.length;for(var zt in A)Xe&&(zt=="length"||$e&&(zt=="offset"||zt=="parent")||We&&(zt=="buffer"||zt=="byteLength"||zt=="byteOffset")||Pa(zt,Ye))||Fe.push(zt);return Fe}function fi(A,z,Y){(Y!==void 0&&!Yn(A[z],Y)||Y===void 0&&!(z in A))&&di(A,z,Y)}function Qd(A,z,Y){var Se=A[z];(!(Me.call(A,z)&&Yn(Se,Y))||Y===void 0&&!(z in A))&&di(A,z,Y)}function Jn(A,z){for(var Y=A.length;Y--;)if(Yn(A[Y][0],z))return Y;return-1}function di(A,z,Y){z=="__proto__"&&te?te(A,z,{configurable:!0,enumerable:!0,value:Y,writable:!0}):A[z]=Y}var eh=hh();function Kn(A){return A==null?A===void 0?re:V:j&&j in Object(A)?ph(A):wh(A)}function xa(A){return bn(A)&&Kn(A)==c}function th(A){if(!Tr(A)||yh(A))return!1;var z=yi(A)?at:G;return z.test(Rh(A))}function rh(A){return bn(A)&&Ca(A.length)&&!!W[Kn(A)]}function nh(A){if(!Tr(A))return _h(A);var z=La(A),Y=[];for(var Se in A)Se=="constructor"&&(z||!Me.call(A,Se))||Y.push(Se);return Y}function ka(A,z,Y,Se,$e){A!==z&&eh(z,function(We,Xe){if($e||($e=new ut),Tr(We))oh(A,z,Xe,Y,ka,Se,$e);else{var Fe=Se?Se(pi(A,Xe),We,Xe+"",A,z,$e):void 0;Fe===void 0&&(Fe=We),fi(A,Xe,Fe)}},ja)}function oh(A,z,Y,Se,$e,We,Xe){var Fe=pi(A,Y),Ye=pi(z,Y),zt=Xe.get(Ye);if(zt){fi(A,Y,zt);return}var Ot=We?We(Fe,Ye,Y+"",A,z,Xe):void 0,mn=Ot===void 0;if(mn){var _i=bi(Ye),wi=!_i&&Na(Ye),Da=!_i&&!wi&&Ba(Ye);Ot=Ye,_i||wi||Da?bi(Fe)?Ot=Fe:Ah(Fe)?Ot=ch(Fe):wi?(mn=!1,Ot=ah(Ye)):Da?(mn=!1,Ot=uh(Ye)):Ot=[]:Ih(Ye)||gi(Ye)?(Ot=Fe,gi(Fe)?Ot=Th(Fe):(!Tr(Fe)||yi(Fe))&&(Ot=gh(Ye))):mn=!1}mn&&(Xe.set(Ye,Ot),$e(Ot,Ye,Se,We,Xe),Xe.delete(Ye)),fi(A,Y,Ot)}function ih(A,z){return Eh(vh(A,z,$a),A+"")}var sh=te?function(A,z){return te(A,"toString",{configurable:!0,enumerable:!1,value:xh(z),writable:!0})}:$a;function ah(A,z){return A.slice()}function lh(A){var z=new A.constructor(A.byteLength);return new et(z).set(new et(A)),z}function uh(A,z){var Y=lh(A.buffer);return new A.constructor(Y,A.byteOffset,A.length)}function ch(A,z){var Y=-1,Se=A.length;for(z||(z=Array(Se));++Y<Se;)z[Y]=A[Y];return z}function fh(A,z,Y,Se){var $e=!Y;Y||(Y={});for(var We=-1,Xe=z.length;++We<Xe;){var Fe=z[We],Ye=void 0;Ye===void 0&&(Ye=A[Fe]),$e?di(Y,Fe,Ye):Qd(Y,Fe,Ye)}return Y}function dh(A){return ih(function(z,Y){var Se=-1,$e=Y.length,We=$e>1?Y[$e-1]:void 0,Xe=$e>2?Y[2]:void 0;for(We=A.length>3&&typeof We=="function"?($e--,We):void 0,Xe&&bh(Y[0],Y[1],Xe)&&(We=$e<3?void 0:We,$e=1),z=Object(z);++Se<$e;){var Fe=Y[Se];Fe&&A(z,Fe,Se,We)}return z})}function hh(A){return function(z,Y,Se){for(var $e=-1,We=Object(z),Xe=Se(z),Fe=Xe.length;Fe--;){var Ye=Xe[++$e];if(Y(We[Ye],Ye,We)===!1)break}return z}}function Xn(A,z){var Y=A.__data__;return mh(z)?Y[typeof z=="string"?"string":"hash"]:Y.map}function hi(A,z){var Y=ce(A,z);return th(Y)?Y:void 0}function ph(A){var z=Me.call(A,j),Y=A[j];try{A[j]=void 0;var Se=!0}catch{}var $e=Je.call(A);return Se&&(z?A[j]=Y:delete A[j]),$e}function gh(A){return typeof A.constructor=="function"&&!La(A)?X(v(A)):{}}function Pa(A,z){var Y=typeof A;return z=z??s,!!z&&(Y=="number"||Y!="symbol"&&ne.test(A))&&A>-1&&A%1==0&&A<z}function bh(A,z,Y){if(!Tr(Y))return!1;var Se=typeof z;return(Se=="number"?mi(Y)&&Pa(z,Y.length):Se=="string"&&z in Y)?Yn(Y[z],A):!1}function mh(A){var z=typeof A;return z=="string"||z=="number"||z=="symbol"||z=="boolean"?A!=="__proto__":A===null}function yh(A){return!!st&&st in A}function La(A){var z=A&&A.constructor,Y=typeof z=="function"&&z.prototype||xe;return A===Y}function _h(A){var z=[];if(A!=null)for(var Y in Object(A))z.push(Y);return z}function wh(A){return Je.call(A)}function vh(A,z,Y){return z=se(z===void 0?A.length-1:z,0),function(){for(var Se=arguments,$e=-1,We=se(Se.length-z,0),Xe=Array(We);++$e<We;)Xe[$e]=Se[z+$e];$e=-1;for(var Fe=Array(z+1);++$e<z;)Fe[$e]=Se[$e];return Fe[z]=Y(Xe),I(A,this,Fe)}}function pi(A,z){if(!(z==="constructor"&&typeof A[z]=="function")&&z!="__proto__")return A[z]}var Eh=Sh(sh);function Sh(A){var z=0,Y=0;return function(){var Se=Ie(),$e=i-(Se-Y);if(Y=Se,$e>0){if(++z>=o)return arguments[0]}else z=0;return A.apply(void 0,arguments)}}function Rh(A){if(A!=null){try{return we.call(A)}catch{}try{return A+""}catch{}}return""}function Yn(A,z){return A===z||A!==A&&z!==z}var gi=xa(function(){return arguments}())?xa:function(A){return bn(A)&&Me.call(A,"callee")&&!de.call(A,"callee")},bi=Array.isArray;function mi(A){return A!=null&&Ca(A.length)&&!yi(A)}function Ah(A){return bn(A)&&mi(A)}var Na=p||kh;function yi(A){if(!Tr(A))return!1;var z=Kn(A);return z==_||z==T||z==u||z==k}function Ca(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=s}function Tr(A){var z=typeof A;return A!=null&&(z=="object"||z=="function")}function bn(A){return A!=null&&typeof A=="object"}function Ih(A){if(!bn(A)||Kn(A)!=P)return!1;var z=v(A);if(z===null)return!0;var Y=Me.call(z,"constructor")&&z.constructor;return typeof Y=="function"&&Y instanceof Y&&we.call(Y)==vt}var Ba=Re?J(Re):rh;function Th(A){return fh(A,ja(A))}function ja(A){return mi(A)?Yd(A):nh(A)}var Oh=dh(function(A,z,Y){ka(A,z,Y)});function xh(A){return function(){return A}}function $a(A){return A}function kh(){return!1}e.exports=Oh})(Ro,Ro.exports);Ro.exports;const HE=So.getLogger("http-helpers");HE.setLevel(zd.levels.INFO);Uh();const An={IFRAME_STATUS:"iframe_status",CREATE_WINDOW:"create_window",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},Yt={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",OPENED_WINDOW:"opened_window",CLOSED_WINDOW:"closed_window",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key"},zE={GET_PROVIDER_STATE:"wallet_get_provider_state"},rs={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function WE(e){return function(t,r,n){n(o=>{r.error&&So.warn(`Error in RPC response:
`,r),!t.isTorusInternal&&(So.info(`RPC (${e.origin}):`,t,"->",r),o())})}}var Bu;(function(e){e.approved="approved",e.cancelled="cancelled",e.confirmed="confirmed",e.failed="failed",e.finalized="finalized",e.processed="processed",e.rejected="rejected",e.signed="signed",e.submitted="submitted",e.unapproved="unapproved",e.dropped="dropped",e.expired="expired"})(Bu||(Bu={}));var qE=Ph();const VE=Rr(qE);var GE={exports:{}},Aa={},Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});function ZE(e){var t=4,r=e.length,n=r%t;if(!n)return e;var o=r,i=t-n,s=r+i,c=me.Buffer.alloc(s);for(c.write(e);i--;)c.write("=",o++);return c.toString()}Ia.default=ZE;Object.defineProperty(Aa,"__esModule",{value:!0});var JE=Ia;function Wd(e,t){return t===void 0&&(t="utf8"),me.Buffer.isBuffer(e)?Ps(e.toString("base64")):Ps(me.Buffer.from(e,t).toString("base64"))}function KE(e,t){return t===void 0&&(t="utf8"),me.Buffer.from(Ta(e),"base64").toString(t)}function Ta(e){return e=e.toString(),JE.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function Ps(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function XE(e){return me.Buffer.from(Ta(e),"base64")}var gn=Wd;gn.encode=Wd;gn.decode=KE;gn.toBase64=Ta;gn.fromBase64=Ps;gn.toBuffer=XE;Aa.default=gn;(function(e){e.exports=Aa.default,e.exports.default=e.exports})(GE);const YE=()=>VE(32).toString("hex");function uo(){}const ju="SYN",ns="ACK",$u="BRK";class Du extends Ao.Duplex{constructor(t){let{name:r,target:n,targetWindow:o=window,targetOrigin:i="*"}=t;if(super({objectMode:!0}),Ae(this,"_init",void 0),Ae(this,"_haveSyn",void 0),Ae(this,"_name",void 0),Ae(this,"_target",void 0),Ae(this,"_targetWindow",void 0),Ae(this,"_targetOrigin",void 0),Ae(this,"_onMessage",void 0),Ae(this,"_synIntervalId",void 0),!r||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=r,this._target=n,this._targetWindow=o,this._targetOrigin=i,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write($u,null,uo),this._haveSyn=!1,this._init=!1}_handShake(){this._write(ju,null,uo),this.cork()}_onData(t){if(!this._init)t===ju?(this._haveSyn=!0,this._write(ns,null,uo)):t===ns&&(this._init=!0,this._haveSyn||this._write(ns,null,uo),this.uncork());else if(t===$u)this._break();else try{this.push(t)}catch(r){this.emit("error",r)}}_postMessage(t){const r=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:t},r)}onMessage(t){const r=t.data;this._targetOrigin!=="*"&&t.origin!==this._targetOrigin||t.source!==this._targetWindow||typeof r!="object"||r.target!==this._name||!r.data||this._onData(r.data)}_read(){}_write(t,r,n){this._postMessage(t),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}function Mu(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function QE(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}class li extends ln.EventEmitter{emit(t){let r=t==="error";const n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];if(r){let l;if(i.length>0&&([l]=i),l instanceof Error)throw l;const u=new Error(`Unhandled error.${l?` (${l.message})`:""}`);throw u.context=l,u}const c=n[t];if(c===void 0)return!1;if(typeof c=="function")Mu(c,this,i);else{const l=c.length,u=QE(c);for(let f=0;f<l;f+=1)Mu(u[f],this,i)}return!0}}class In extends Error{constructor(t){let{code:r,message:n,data:o}=t;if(!Number.isInteger(r))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),Ae(this,"code",void 0),Ae(this,"data",void 0),this.code=r,o!==void 0&&(this.data=o)}toString(){return Gh({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const Ls=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,o)=>{n||o.error?t(n||o.error):!r||Array.isArray(o)?e(o):e(o.result)}};function eS(){const e={};function t(){return!1}const r=new li;function n(c){const l=e[c.id];if(!l)throw new Error(`StreamMiddleware - Unknown response id "${c.id}"`);delete e[c.id],Object.assign(l.res,c),setTimeout(l.end)}function o(c){r.emit("notification",c)}function i(c,l,u){let f;try{c.id?n(c):o(c)}catch(h){f=h}u(f)}const s=new Ao.Duplex({objectMode:!0,read:t,write:i});return{events:r,middleware:(c,l,u,f)=>{s.push(c),e[c.id]={req:c,res:l,next:u,end:f}},stream:s}}function tS(){return(e,t,r,n)=>{const o=e.id,i=YE();e.id=i,t.id=i,r(s=>{e.id=o,t.id=o,s()})}}function Fu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function rS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fu(Object(r),!0).forEach(function(n){Ae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}class fr extends li{constructor(){super(),Ae(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(t,r,n){const o=[];let i=null,s=!1;for(const c of n)if([i,s]=await fr._runMiddleware(t,r,c,o),s)break;return[i,s,o.reverse()]}static _runMiddleware(t,r,n,o){return new Promise(i=>{const s=l=>{const u=l||r.error;u&&(r.error=Gt.serializeError(u)),i([u,!0])},c=l=>{r.error?s(r.error):(l&&(typeof l!="function"&&s(new In({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),o.push(l)),i([null,!1]))};try{n(t,r,c,s)}catch(l){s(l)}})}static async _runReturnHandlers(t){for(const r of t)await new Promise((n,o)=>{r(i=>i?o(i):n())})}static _checkForCompletion(t,r,n){if(!("result"in r)&&!("error"in r))throw new In({code:-32603,message:"Response has no error or result for request"});if(!n)throw new In({code:-32603,message:"Nothing ended request"})}push(t){this._middleware.push(t)}handle(t,r){if(r&&typeof r!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?r?this._handleBatch(t,r):this._handleBatch(t):r?this._handle(t,r):this._promiseHandle(t)}asMiddleware(){return async(t,r,n,o)=>{try{const[i,s,c]=await fr._runAllMiddleware(t,r,this._middleware);return s?(await fr._runReturnHandlers(c),o(i)):n(async l=>{try{await fr._runReturnHandlers(c)}catch(u){return l(u)}return l()})}catch(i){return o(i)}}}async _handleBatch(t,r){try{const n=await Promise.all(t.map(this._promiseHandle.bind(this)));return r?r(null,n):n}catch(n){if(r)return r(n);throw n}}_promiseHandle(t){return new Promise(r=>{this._handle(t,(n,o)=>{r(o)})})}async _handle(t,r){if(!t||Array.isArray(t)||typeof t!="object"){const s=new In({code:-32603,message:"request must be plain object"});return r(s,{id:void 0,jsonrpc:"2.0",error:s})}if(typeof t.method!="string"){const s=new In({code:-32603,message:"method must be string"});return r(s,{id:t.id,jsonrpc:"2.0",error:s})}const n=rS({},t),o={id:n.id,jsonrpc:n.jsonrpc};let i=null;try{await this._processRequest(n,o)}catch(s){i=s}return i&&(delete o.result,o.error||(o.error=Gt.serializeError(i))),r(i,o)}async _processRequest(t,r){const[n,o,i]=await fr._runAllMiddleware(t,r,this._middleware);if(fr._checkForCompletion(t,r,o),await fr._runReturnHandlers(i),n)throw n}}class nS extends Ao.Duplex{constructor(t){let{parent:r,name:n}=t;super({objectMode:!0}),Ae(this,"_parent",void 0),Ae(this,"_name",void 0),this._parent=r,this._name=n}_read(){}_write(t,r,n){this._parent.push({name:this._name,data:t}),n()}}function Uu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Hu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uu(Object(r),!0).forEach(function(n){Ae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const zu=Symbol("IGNORE_SUBSTREAM");class oS extends Ao.Duplex{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(Hu(Hu({},t),{},{objectMode:!0})),Ae(this,"_substreams",void 0),Ae(this,"getStream",void 0),this._substreams={}}createStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const r=new nS({parent:this,name:t});return this._substreams[t]=r,iS(this,n=>r.destroy(n||void 0)),r}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=zu}_read(){}_write(t,r,n){const{name:o,data:i}=t;if(!o)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const s=this._substreams[o];return s?(s!==zu&&s.push(i),n()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${o}"`),n())}}function iS(e,t){const r=kw(t);ru(e,{readable:!1},r),ru(e,{writable:!1},r)}const or=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";or.writable=e=>or(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";or.readable=e=>or(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";or.duplex=e=>or.writable(e)&&or.readable(e);or.transform=e=>or.duplex(e)&&typeof e._transform=="function";var sS=or,aS=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;o--!==0;){var s=i[o];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r};const lS=Rr(aS);var uS="0.3.4",rr={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:e=>`Invalid options. Received: { maxEventListeners: ${e}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`Torus: Connected to chain with ID "${e}".`},warnings:{}};const cS={PRODUCTION:"production",DEVELOPMENT:"development",TESTING:"testing"},On={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},os={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",LINE:"line",GITHUB:"github",KAKAO:"kakao",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",WECHAT:"wechat",EMAIL_PASSWORDLESS:"email_passwordless"},fS={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies bentigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"",actionRequired:"",pendingAction:"",cookiesRequired:"",enableCookies:"TorusCookie",clickHere:""}},ko:{embed:{continue:"",actionRequired:" ",pendingAction:"    .",cookiesRequired:" ",enableCookies:"     Torus .",clickHere:"  "}},zh:{embed:{continue:"",actionRequired:"",pendingAction:"",cookiesRequired:"Cookie",enableCookies:"cookieTorus",clickHere:""}}};var Oa={supportedVerifierList:[os.GOOGLE,os.REDDIT,os.DISCORD],api:"https://api.tor.us",translations:fS,prodTorusUrl:"",localStorageKeyPrefix:"torus-"},He=So.getLogger("solana-embed");function dS(){return(e,t,r)=>{(typeof e.method!="string"||!e.method)&&(t.error=Gt.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),r(n=>{const{error:o}=t;return o&&He.error(`Torus - RPC Error: ${o.message}`,o),n()})}}function hS(e,t,r){let n=`Torus: Lost connection to "${e}".`;t!=null&&t.stack&&(n+=`
${t.stack}`),He.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)}const co=()=>Math.random().toString(36).slice(2),qd=async e=>{let t,r;switch(e){case"testing":t="https://solana-testing.tor.us",r="debug";break;case"development":t="http://localhost:8080",r="debug";break;default:t="https://solana.tor.us",r="error";break}return{torusUrl:t,logLevel:r}},pS=()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(Oa.translations,t[0])?t[0]:"en",e},gS={height:660,width:375},bS={height:740,width:1315},mS={height:700,width:1200},Vd={height:600,width:400};function yS(e){let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(r){return r&&(r.code===22||r.code===1014||r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0}}function Ln(e){let{width:t,height:r}=e;const n=window.screenLeft!==void 0?window.screenLeft:window.screenX,o=window.screenTop!==void 0?window.screenTop:window.screenY,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,c=1,l=Math.abs((i-t)/2/c+n),u=Math.abs((s-r)/2/c+o);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${r/c},width=${t/c},top=${u},left=${l}`}class Gd extends li{constructor(t,r){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=r;if(super(),Ae(this,"isTorus",void 0),Ae(this,"_rpcEngine",void 0),Ae(this,"jsonRpcConnectionEvents",void 0),Ae(this,"_state",void 0),!sS.duplex(t))throw new Error(rr.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(n),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const i=new oS;ou(t,i,t,this._handleStreamDisconnect.bind(this,"Torus")),i.ignoreStream("phishing");const s=eS();ou(s.stream,i.createStream(o),s.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const c=new fr;c.push(tS()),c.push(dS()),c.push(WE({origin:location.origin})),c.push(s.middleware),this._rpcEngine=c,this.jsonRpcConnectionEvents=s.events}async request(t){if(!t||typeof t!="object"||Array.isArray(t))throw Gt.ethErrors.rpc.invalidRequest({message:rr.errors.invalidRequestArgs(),data:t});const{method:r,params:n}=t;if(typeof r!="string"||r.length===0)throw Gt.ethErrors.rpc.invalidRequest({message:rr.errors.invalidRequestMethod(),data:t});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw Gt.ethErrors.rpc.invalidRequest({message:rr.errors.invalidRequestParams(),data:t});return new Promise((o,i)=>{this._rpcRequest({method:r,params:n},Ls(o,i))})}send(t,r){this._rpcRequest(t,r)}sendAsync(t){return new Promise((r,n)=>{this._rpcRequest(t,Ls(r,n))})}_handleStreamDisconnect(t,r){hS(t,r,this),this._handleDisconnect(!1,r?r.message:void 0)}}const _S=function(e,t,r){for(var n=arguments.length,o=new Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];const s=()=>{r(...o),e.removeEventListener(t,s)};e.addEventListener(t,s)};async function Zd(){return new Promise(e=>{document.readyState!=="loading"?e():_S(document,"DOMContentLoaded",e)})}const Yr=e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild};function fo(e){return e.version===void 0}class Jd extends li{constructor(t){let{url:r,target:n,features:o}=t;super(),Ae(this,"url",void 0),Ae(this,"target",void 0),Ae(this,"features",void 0),Ae(this,"window",void 0),Ae(this,"windowTimer",void 0),Ae(this,"iClosedWindow",void 0),this.url=r,this.target=n||"_blank",this.features=o||Ln(mS),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var t;return this.window=window.open(this.url.href,this.target,this.features),(t=this.window)!=null&&t.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(t){t?window.location.replace(this.url.href):window.location.href=this.url.href}}function Wu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function wS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wu(Object(r),!0).forEach(function(n){Ae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}class ui extends Gd{constructor(t,r){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=r;super(t,{maxEventListeners:n,jsonRpcStreamName:o}),Ae(this,"embedTranslations",void 0),Ae(this,"torusUrl",void 0),Ae(this,"dappStorageKey",void 0),Ae(this,"windowRefs",void 0),Ae(this,"tryWindowHandle",void 0),Ae(this,"torusAlertContainer",void 0),Ae(this,"torusIframe",void 0),this._state=wS({},ui._defaultState),this.torusUrl="",this.dappStorageKey="";const i=Oa.translations[pS()];this.embedTranslations=i.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const s=c=>{const{method:l,params:u}=c;if(l===An.IFRAME_STATUS){const{isFullScreen:f,rid:h}=u;this._displayIframe({isFull:f,rid:h})}else if(l===An.CREATE_WINDOW){const{windowId:f,url:h}=u;this._createPopupBlockAlert(f,h)}else if(l===An.CLOSE_WINDOW)this._handleCloseWindow(u);else if(l===An.USER_LOGGED_IN){const{currentLoginProvider:f}=u;this._state.isLoggedIn=!0,this._state.currentLoginProvider=f}else l===An.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",s)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(t){try{const{torusUrl:r,dappStorageKey:n,torusAlertContainer:o,torusIframe:i}=t;this.torusUrl=r,this.dappStorageKey=n,this.torusAlertContainer=o,this.torusIframe=i,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:s,isLoggedIn:c}=await this.request({method:Yt.GET_PROVIDER_STATE,params:[]});this._handleConnect(s,c)}catch(r){He.error("Torus: Failed to get initial state. Please report this bug.",r)}finally{He.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(t){let{url:r,target:n,features:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=new URL(r||`${this.torusUrl}/redirect?windowId=${t}`);this.dappStorageKey&&(i.hash?i.hash+=`&dappStorageKey=${this.dappStorageKey}`:i.hash=`#dappStorageKey=${this.dappStorageKey}`);const s=new Jd({url:i,target:n,features:o});if(s.open(),!s.window){this._createPopupBlockAlert(t,i.href);return}this.windowRefs[t]=s,this.request({method:Yt.OPENED_WINDOW,params:{windowId:t}}),s.once("close",()=>{delete this.windowRefs[t],this.request({method:Yt.CLOSED_WINDOW,params:{windowId:t}})})}_displayIframe(){let{isFull:t=!1,rid:r=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};if(t)n.display="block",n.width="100%",n.height="100%",n.top="0px",n.right="0px",n.left="0px",n.bottom="0px";else switch(n.display=this._state.torusWidgetVisibility?"block":"none",n.height="70px",n.width="70px",this._state.buttonPosition){case On.TOP_LEFT:n.top="0px",n.left="0px",n.right="auto",n.bottom="auto";break;case On.TOP_RIGHT:n.top="0px",n.right="0px",n.left="auto",n.bottom="auto";break;case On.BOTTOM_RIGHT:n.bottom="0px",n.right="0px",n.top="auto",n.left="auto";break;case On.BOTTOM_LEFT:default:n.bottom="0px",n.left="0px",n.top="auto",n.right="auto";break}Object.assign(this.torusIframe.style,n),this._state.isIFrameFullScreen=t,this.request({method:Yt.IFRAME_STATUS,params:{isIFrameFullScreen:t,rid:r}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(t,r){const n=r,o=t;Array.isArray(o)||o.jsonrpc||(o.jsonrpc="2.0"),this.tryWindowHandle(o,n)}_handleConnect(t,r){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:t,isLoggedIn:r}),He.debug(rr.info.connected(t)))}_handleDisconnect(t,r){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let n;t?(n=new Gt.EthereumRpcError(1013,r||rr.errors.disconnected()),He.debug(n)):(n=new Gt.EthereumRpcError(1011,r||rr.errors.permanentlyDisconnected()),He.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleCloseWindow(t){const{windowId:r}=t;this.windowRefs[r]&&(this.windowRefs[r].close(),delete this.windowRefs[r])}async _createPopupBlockAlert(t,r){const n=this.getLogoUrl(),o=Yr(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),i=Yr(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),s=Yr('<div id="torusAlert__btn-container"></div>');s.appendChild(i),o.appendChild(s);const c=()=>{i.addEventListener("click",()=>{this._handleWindow(t,{url:r,target:"_blank",features:Ln(Vd)}),o.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})},l=()=>{this.torusAlertContainer.appendChild(o)};await Zd(),l(),c(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}Ae(ui,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});function qu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function vS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qu(Object(r),!0).forEach(function(n){Ae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}class ci extends Gd{constructor(t,r){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=r;super(t,{maxEventListeners:n,jsonRpcStreamName:o}),Ae(this,"chainId",void 0),Ae(this,"selectedAddress",void 0),Ae(this,"tryWindowHandle",void 0),this._state=vS({},ci._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const i=s=>{const{method:c,params:l}=s;c===rs.ACCOUNTS_CHANGED?this._handleAccountsChanged(l):c===rs.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(l):c===rs.CHAIN_CHANGED&&this._handleChainChanged(l)};this.jsonRpcConnectionEvents.on("notification",i)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:t,chainId:r,isUnlocked:n}=await this.request({method:zE.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:r}),this._handleChainChanged({chainId:r}),this._handleUnlockStateChanged({accounts:t,isUnlocked:n}),this._handleAccountsChanged(t)}catch(t){He.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{He.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=r;const i=t;if(!Array.isArray(i)){if(i.jsonrpc||(i.jsonrpc="2.0"),i.method==="solana_accounts"||i.method==="solana_requestAccounts")o=(s,c)=>{this._handleAccountsChanged(c.result||[],i.method==="solana_accounts",n),r(s,c)};else if(i.method==="wallet_getProviderState"){this._rpcEngine.handle(t,o);return}}this.tryWindowHandle(i,o)}_handleConnect(t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:t}),He.debug(rr.info.connected(t)))}_handleDisconnect(t,r){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let n;t?(n=new Gt.EthereumRpcError(1013,r||rr.errors.disconnected()),He.debug(n)):(n=new Gt.EthereumRpcError(1011,r||rr.errors.permanentlyDisconnected()),He.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleAccountsChanged(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=t;Array.isArray(o)||(He.error("Torus: Received non-array accounts parameter. Please report this bug.",o),o=[]);for(const i of t)if(typeof i!="string"){He.error("Torus: Received non-string account. Please report this bug.",t),o=[];break}lS(this._state.accounts,o)||(r&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&He.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',o),this._state.accounts=o,this.emit("accountsChanged",o)),this.selectedAddress!==o[0]&&(this.selectedAddress=o[0]||null)}_handleChainChanged(){let{chainId:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t){He.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:t});return}t==="loading"?this._handleDisconnect(!0):(this._handleConnect(t),t!==this.chainId&&(this.chainId=t,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:t,isUnlocked:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="boolean"){He.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:r});return}r!==this._state.isUnlocked&&(this._state.isUnlocked=r,this._handleAccountsChanged(t||[]))}}Ae(ci,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function Vu(e){return new Promise((t,r)=>{try{const n=document.createElement("img");n.onload=()=>t(!0),n.onerror=()=>t(!1),n.src=e}catch(n){r(n)}})}const ES=e=>{const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function SS(e){try{const{document:t}=e;let r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await Vu(r.href)||(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find(n=>!!n.href),r&&await Vu(r.href))?r.href:""}catch{return""}}const RS=async()=>({name:ES(window),icon:await SS(window)});function Gu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function is(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gu(Object(r),!0).forEach(function(n){Ae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const AS=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],IS=[Yt.SET_PROVIDER],TS=yS("localStorage");(async function(){try{if(typeof document>"u")return;const e=document.createElement("link"),{torusUrl:t}=await qd("production");e.href=`${t}/frame`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){He.warn(e)}})();class kS{constructor(){let{modalZIndex:t=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ae(this,"isInitialized",void 0),Ae(this,"torusAlert",void 0),Ae(this,"modalZIndex",void 0),Ae(this,"alertZIndex",void 0),Ae(this,"requestedLoginProvider",void 0),Ae(this,"provider",void 0),Ae(this,"communicationProvider",void 0),Ae(this,"dappStorageKey",void 0),Ae(this,"isTopupHidden",!1),Ae(this,"torusAlertContainer",void 0),Ae(this,"torusUrl",void 0),Ae(this,"torusIframe",void 0),Ae(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=t,this.alertZIndex=t+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:t=cS.PRODUCTION,enableLogging:r=!1,network:n,showTorusButton:o=!1,useLocalStorage:i=!1,buttonPosition:s=On.BOTTOM_LEFT,apiKey:c="torus-default",extraParams:l={},whiteLabel:u}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:f,logLevel:h}=await qd(t);He.enableAll(),He.info(f,"url loaded"),He.info(`Solana Embed Version :${uS}`),this.torusUrl=f,He.setDefaultLevel(h),r?He.enableAll():He.disableAll();const d=this.handleDappStorageKey(i),_=new URL(f);_.pathname.endsWith("/")?_.pathname+="frame":_.pathname+="/frame";const T=new URLSearchParams;d&&T.append("dappStorageKey",d),T.append("origin",window.location.origin),_.hash=T.toString(),this.torusIframe=Yr(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${_.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=Yr(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=Yr(`<link href="${f}/css/widget.css" rel="stylesheet" type="text/css">`);const R=async()=>new Promise((L,V)=>{try{window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer),this.torusIframe.addEventListener("load",async()=>{const P=await RS();this.torusIframe.contentWindow.postMessage({buttonPosition:s,apiKey:c,network:n,dappMetadata:P,extraParams:l,whiteLabel:u},_.origin),await this._setupWeb3({torusUrl:f}),o&&this.showTorusButton(),u!=null&&u.topupHide?this.isTopupHidden=u.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,L()})}catch(P){V(P)}});await Zd(),await R()}async login(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=t.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const r=await new Promise((n,o)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,t.login_hint]},Ls(n,o))});if(Array.isArray(r)&&r.length>0)return r;throw new Error("Login failed")}catch(r){throw He.error("login failed",r),r}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(t){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:r,userInfo:n}=t,{success:o}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:r,userInfo:n}});if(!o)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:Yt.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function t(r){return r instanceof Element||r instanceof Document}t(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),t(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),t(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(t){await this.communicationProvider.request({method:Yt.SET_PROVIDER,params:is({},t)})}async showWallet(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await this.communicationProvider.request({method:Yt.WALLET_INSTANCE_ID,params:[]}),o=t?`/${t}`:"",i=new URL(`${this.torusUrl}/wallet${o}`);i.searchParams.append("instanceId",n),Object.keys(r).forEach(s=>{i.searchParams.append(s,r[s])}),this.dappStorageKey&&(i.hash=`#dappStorageKey=${this.dappStorageKey}`),new Jd({url:i,features:Ln(bS)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:Yt.USER_INFO,params:[]})}async initiateTopup(t,r){if(!this.isInitialized)throw new Error("Torus is not initialized");const n=co();return this.communicationProvider._handleWindow(n),await this.communicationProvider.request({method:Yt.TOPUP,params:{provider:t,params:r,windowId:n}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(t){const r=fo(t),n=r?t.serialize({requireAllSignatures:!1}).toString("hex"):me.Buffer.from(t.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:n,isLegacyTransaction:r}})}async signAndSendTransaction(t,r){const n=fo(t),o=n?t.serialize({requireAllSignatures:!1}).toString("hex"):me.Buffer.from(t.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:o,options:r,isLegacyTransaction:n}})}}async signTransaction(t){const r=fo(t),n=r?t.serializeMessage().toString("hex"):me.Buffer.from(t.message.serialize()).toString("hex"),o=await this.provider.request({method:"sign_transaction",params:{message:n,messageOnly:!0,isLegacyTransaction:r}}),i=JSON.parse(o),s={publicKey:new Fa(i.publicKey),signature:me.Buffer.from(i.signature,"hex")};return t.addSignature(s.publicKey,s.signature),t}async signAllTransactions(t){let r;const n=t.map(i=>(r=fo(i),r?i.serializeMessage().toString("hex"):me.Buffer.from(i.message.serialize()).toString("hex"))),o=(await this.provider.request({method:"sign_all_transactions",params:{message:n,messageOnly:!0,isLegacyTransaction:r}})).map(i=>{const s=JSON.parse(i);return{publicKey:new Fa(s.publicKey),signature:me.Buffer.from(s.signature,"hex")}});return t.forEach((i,s)=>(i.addSignature(o[s].publicKey,o[s].signature),i)),t}async signMessage(t){return await this.provider.request({method:"sign_message",params:{data:t}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(t){const r=`${Oa.localStorageKeyPrefix}${window.location.hostname}`;let n="";if(TS&&t){const o=window.localStorage.getItem(r);if(o)n=o;else{const i=`torus-app-${co()}`;window.localStorage.setItem(r,i),n=i}}return this.dappStorageKey=n,n}async _setupWeb3(t){He.info("setupWeb3 running");const r=new Du({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),n=new Du({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),o=new ci(r,{}),i=new ui(n,{});o.tryWindowHandle=(u,f)=>{const h=u;if(!Array.isArray(h)&&AS.includes(h.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const d=co();i._handleWindow(d,{target:"_blank",features:Ln(Vd)}),h.windowId=d}o._rpcEngine.handle(h,f)},i.tryWindowHandle=(u,f)=>{const h=u;if(!Array.isArray(h)&&IS.includes(h.method)){const d=co();i._handleWindow(d,{target:"_blank",features:Ln(gS)}),h.params.windowId=d}i._rpcEngine.handle(h,f)};const s=u=>{const f=o[u],h=this;o[u]=function(d,_){const{method:T,params:R=[]}=d;if(T==="solana_requestAccounts"){if(!_)return h.login({loginProvider:R[0]});h.login({loginProvider:R[0]}).then(L=>_(null,L)).catch(L=>_(L))}return f.apply(this,[d,_])}};s("request"),s("sendAsync"),s("send");const c=new Proxy(o,{deleteProperty:()=>!0}),l=new Proxy(i,{deleteProperty:()=>!0});this.provider=c,this.communicationProvider=l,await Promise.all([o._initializeState(),i._initializeState(is(is({},t),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),He.debug("Torus - injected provider")}}export{On as BUTTON_POSITION,os as LOGIN_PROVIDER,cS as TORUS_BUILD_ENV,ci as TorusInPageProvider,kS as default};
