const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-fXpyUPPA-CpB5LPa8.js","assets/index-Bibw8odz.js","assets/index-BelLbmDI.css","assets/create-D7FD56l0-D2uTFRvt.js","assets/chain-DfK5JtF7-Jmo_aVnV.js","assets/index-BAW2lhvW-Br4WU7QB.js"])))=>i.map(i=>d[i]);
import{bg as $n,aE as Cn,aH as Un,aI as Mn,aJ as Pn,aK as bt,aL as zn,aM as _n,aG as br,aF as _e,_ as vr,aO as Nn,m as Rn,bh as Vn,bi as ye,bj as Ve,bk as Sr,bl as Ur,bm as Rt,bn as Mr,bo as Dn,bp as qn}from"./index-Bibw8odz.js";import{I as Kn,R as Ln}from"./chain-DfK5JtF7-Jmo_aVnV.js";var Wn=Object.defineProperty,Fn=(t,e,r)=>e in t?Wn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ce=(t,e,r)=>(Fn(t,typeof e!="symbol"?e+"":e,r),r);/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */function Pr(t){if(typeof t!="string")throw new TypeError(`Invalid mnemonic type: ${typeof t}`);return t.normalize("NFKD")}function Gn(t){const e=Pr(t),r=e.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:r}}const Jn=t=>Pr(`mnemonic${t}`);function Zn(t,e=""){return Dn(Rt,Gn(t).nfkd,Jn(e),{c:2048,dkLen:64})}function Hn(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var m=0,T=0,I=0,C=f.length;I!==C&&f[I]===0;)I++,m++;for(var V=(C-I)*l+1>>>0,D=new Uint8Array(V);I!==C;){for(var Q=f[I],de=0,W=V-1;(Q!==0||de<T)&&W!==-1;W--,de++)Q+=256*D[W]>>>0,D[W]=Q%a>>>0,Q=Q/a>>>0;if(Q!==0)throw new Error("Non-zero carry");T=de,I++}for(var ne=V-T;ne!==V&&D[ne]===0;)ne++;for(var Ye=c.repeat(m);ne<V;++ne)Ye+=t.charAt(D[ne]);return Ye}function g(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;for(var m=0,T=0,I=0;f[m]===c;)T++,m++;for(var C=(f.length-m)*u+1>>>0,V=new Uint8Array(C);f[m];){var D=e[f.charCodeAt(m)];if(D===255)return;for(var Q=0,de=C-1;(D!==0||Q<I)&&de!==-1;de--,Q++)D+=a*V[de]>>>0,V[de]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");I=Q,m++}for(var W=C-I;W!==C&&V[W]===0;)W++;for(var ne=new Uint8Array(T+(C-W)),Ye=T;W!==C;)ne[Ye++]=V[W++];return ne}function b(f){var m=g(f);if(m)return m;throw new Error("Non-base"+a+" character")}return{encode:d,decodeUnsafe:g,decode:b}}var Xn=Hn;const Yn=Xn,Qn="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var ei=Yn(Qn);const zr=Rn(ei),Ge=t=>zr.encode(t),Je=t=>zr.decode(t);function X(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const vt=8192;function _(t){if(t.length<vt)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=vt){const n=t.slice(r,r+vt);e+=String.fromCharCode(...n)}return btoa(e)}function Ze(t){var e;const r=t.startsWith("0x")?t.slice(2):t,n=((e=(r.length%2===0?r:`0${r}}`).match(/.{2}/g))==null?void 0:e.map(i=>parseInt(i,16)))??[];return Uint8Array.from(n)}function ke(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}function Vt(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}function ti(t){let e=0,r=0,n=0;for(;;){let i=t[n];if(n+=1,e|=(i&127)<<r,!(i&128))break;r+=7}return{value:e,length:n}}class _r{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),r=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+r).toString(10)}read128(){let e=BigInt(this.read64()),r=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+r).toString(10)}read256(){let e=BigInt(this.read128()),r=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+r).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:i}=ti(r);return this.shift(i),n}readVec(e){let r=this.readULEB(),n=[];for(let i=0;i<r;i++)n.push(e(this,i,r));return n}}function ri(t,e){switch(e){case"base58":return Ge(t);case"base64":return _(t);case"hex":return ke(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function ni(t,e){switch(e){case"base58":return Je(t);case"base64":return X(t);case"hex":return Ze(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Nr(t,e=["<",">"]){const[r,n]=e,i=[];let s="",a=0;for(let c=0;c<t.length;c++){const u=t[c];if(u===r&&a++,u===n&&a--,a===0&&u===","){i.push(s.trim()),s="";continue}s+=u}return i.push(s.trim()),i}class Rr{constructor({size:e=1024,maxSize:r,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r||e,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const r=this.bytePosition+e;if(r>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;const i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return St(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return St(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return St(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return Vt(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,i)=>r(this,n,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return ri(this.toBytes(),e)}}function St(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}var Vr=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},G=(t,e,r)=>(Vr(t,e,"read from private field"),r?r.call(t):e.get(t)),lt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},dt=(t,e,r,n)=>(Vr(t,e,"write to private field"),e.set(t,r),r),Ee,Ce,it,pe;const Dr=class{constructor(t){lt(this,Ee,void 0),lt(this,Ce,void 0),this.name=t.name,this.read=t.read,this.serializedSize=t.serializedSize??(()=>null),dt(this,Ee,t.write),dt(this,Ce,t.serialize??((e,r)=>{const n=new Rr({size:this.serializedSize(e)??void 0,...r});return G(this,Ee).call(this,e,n),n.toBytes()})),this.validate=t.validate??(()=>{})}write(t,e){this.validate(t),G(this,Ee).call(this,t,e)}serialize(t,e){return this.validate(t),new ii(this,G(this,Ce).call(this,t,e))}parse(t){const e=new _r(t);return this.read(e)}transform({name:t,input:e,output:r}){return new Dr({name:t??this.name,read:n=>r(this.read(n)),write:(n,i)=>G(this,Ee).call(this,e(n),i),serializedSize:n=>this.serializedSize(e(n)),serialize:(n,i)=>G(this,Ce).call(this,e(n),i),validate:n=>this.validate(e(n))})}};let Z=Dr;Ee=new WeakMap;Ce=new WeakMap;const qr=Symbol.for("@mysten/serialized-bcs");function Dt(t){return!!t&&typeof t=="object"&&t[qr]===!0}class ii{constructor(e,r){lt(this,it,void 0),lt(this,pe,void 0),dt(this,it,e),dt(this,pe,r)}get[qr](){return!0}toBytes(){return G(this,pe)}toHex(){return ke(G(this,pe))}toBase64(){return _(G(this,pe))}toBase58(){return Ge(G(this,pe))}parse(){return G(this,it).parse(G(this,pe))}}it=new WeakMap;pe=new WeakMap;function ht({size:t,...e}){return new Z({...e,serializedSize:()=>t})}function Tt({readMethod:t,writeMethod:e,...r}){return ht({...r,read:n=>n[t](),write:(n,i)=>i[e](n),validate:n=>{var i;if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);(i=r.validate)==null||i.call(r,n)}})}function kt({readMethod:t,writeMethod:e,...r}){return ht({...r,read:n=>n[t](),write:(n,i)=>i[e](BigInt(n)),validate:n=>{var i;const s=BigInt(n);if(s<0||s>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${s}. Expected value in range 0-${r.maxValue}`);(i=r.validate)==null||i.call(r,s)}})}function si({serialize:t,...e}){const r=new Z({...e,serialize:t,write:(n,i)=>{for(const s of r.serialize(n).toBytes())i.write8(s)}});return r}function ai({toBytes:t,fromBytes:e,...r}){return new Z({...r,read:n=>{const i=n.readULEB(),s=n.readBytes(i);return e(s)},write:(n,i)=>{const s=t(n);i.writeULEB(s.length);for(let a=0;a<s.length;a++)i.write8(s[a])},serialize:n=>{const i=t(n),s=Vt(i.length),a=new Uint8Array(s.length+i.length);return a.set(s,0),a.set(i,s.length),a},validate:n=>{var i;if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);(i=r.validate)==null||i.call(r,n)}})}function oi(t){let e=null;function r(){return e||(e=t()),e}return new Z({name:"lazy",read:n=>r().read(n),serializedSize:n=>r().serializedSize(n),write:(n,i)=>r().write(n,i),serialize:(n,i)=>r().serialize(n,i).toBytes()})}const o={u8(t){return Tt({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return Tt({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return Tt({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return kt({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return kt({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return kt({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return ht({name:"bool",size:1,read:e=>e.read8()===1,write:(e,r)=>r.write8(e?1:0),...t,validate:e=>{var r;if((r=t==null?void 0:t.validate)==null||r.call(t,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return si({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(Vt(e)),...t})},bytes(t,e){return ht({name:`bytes[${t}]`,size:t,read:r=>r.readBytes(t),write:(r,n)=>{for(let i=0;i<t;i++)n.write8(r[i]??0)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},string(t){return ai({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,r){return new Z({name:`${e.name}[${t}]`,read:n=>{const i=new Array(t);for(let s=0;s<t;s++)i[s]=e.read(n);return i},write:(n,i)=>{for(const s of n)e.write(s,i)},...r,validate:n=>{var i;if((i=r==null?void 0:r.validate)==null||i.call(r,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},option(t){return o.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>"Some"in e?e.Some:null})},vector(t,e){return new Z({name:`vector<${t.name}>`,read:r=>{const n=r.readULEB(),i=new Array(n);for(let s=0;s<n;s++)i[s]=t.read(r);return i},write:(r,n)=>{n.writeULEB(r.length);for(const i of r)t.write(i,n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(t,e){return new Z({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:r=>{let n=0;for(let i=0;i<t.length;i++){const s=t[i].serializedSize(r[i]);if(s==null)return null;n+=s}return n},read:r=>{const n=[];for(const i of t)n.push(i.read(r));return n},write:(r,n)=>{for(let i=0;i<t.length;i++)t[i].write(r[i],n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)}})},struct(t,e,r){const n=Object.entries(e);return new Z({name:t,serializedSize:i=>{let s=0;for(const[a,c]of n){const u=c.serializedSize(i[a]);if(u==null)return null;s+=u}return s},read:i=>{const s={};for(const[a,c]of n)s[a]=c.read(i);return s},write:(i,s)=>{for(const[a,c]of n)c.write(i[a],s)},...r,validate:i=>{var s;if((s=r==null?void 0:r.validate)==null||s.call(r,i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)}})},enum(t,e,r){const n=Object.entries(e);return new Z({name:t,read:i=>{const s=i.readULEB(),[a,c]=n[s];return{[a]:(c==null?void 0:c.read(i))??!0}},write:(i,s)=>{const[a,c]=Object.entries(i)[0];for(let u=0;u<n.length;u++){const[l,d]=n[u];if(l===a){s.writeULEB(u),d==null||d.write(c,s);return}}},...r,validate:i=>{var s;if((s=r==null?void 0:r.validate)==null||s.call(r,i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);const a=Object.keys(i);if(a.length!==1)throw new TypeError(`Expected object with one key, found ${a.length}`);const[c]=a;if(!Object.hasOwn(e,c))throw new TypeError(`Invalid enum variant ${c}`)}})},map(t,e){return o.vector(o.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:r=>[...r.entries()],output:r=>{const n=new Map;for(const[i,s]of r)n.set(i,s);return n}})},generic(t,e){return(...r)=>e(...r).transform({name:`${e.name}<${r.map(n=>n.name).join(", ")}>`,input:n=>n,output:n=>n})},lazy(t){return oi(t)}},ci=32,Ue=class{constructor(t){if(this.types=new Map,this.counter=0,t instanceof Ue){this.schema=t.schema,this.types=new Map(t.types);return}if(this.schema=t,this.registerAddressType(Ue.ADDRESS,t.addressLength,t.addressEncoding),this.registerVectorType(t.vectorType),t.types&&t.types.structs)for(let e of Object.keys(t.types.structs))this.registerStructType(e,t.types.structs[e]);if(t.types&&t.types.enums)for(let e of Object.keys(t.types.enums))this.registerEnumType(e,t.types.enums[e]);if(t.types&&t.types.aliases)for(let e of Object.keys(t.types.aliases))this.registerAlias(e,t.types.aliases[e]);t.withPrimitives!==!1&&ui(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(t,e,r){if(typeof t=="string"||Array.isArray(t)){const{name:n,params:i}=this.parseTypeName(t);return this.getTypeInterface(n).encode(this,e,r,i)}if(typeof t=="object"){const n=this.tempKey();return new Ue(this).registerStructType(n,t).ser(n,e,r)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(t)}`)}de(t,e,r){if(typeof e=="string")if(r)e=ni(e,r);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof t=="string"||Array.isArray(t)){const{name:n,params:i}=this.parseTypeName(t);return this.getTypeInterface(n).decode(this,e,i)}if(typeof t=="object"){const n=new Ue(this),i=this.tempKey();return n.registerStructType(i,t).de(i,e,r)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(t)}`)}hasType(t){return this.types.has(t)}registerAlias(t,e){return this.types.set(t,e),this}registerType(t,e,r,n=()=>!0){const{name:i,params:s}=this.parseTypeName(t);return this.types.set(i,{encode(a,c,u,l){const d=s.reduce((g,b,f)=>Object.assign(g,{[b]:l[f]}),{});return this._encodeRaw.call(a,new Rr(u),c,l,d)},decode(a,c,u){const l=s.reduce((d,g,b)=>Object.assign(d,{[g]:u[b]}),{});return this._decodeRaw.call(a,new _r(c),u,l)},_encodeRaw(a,c,u,l){if(n(c))return e.call(this,a,c,u,l);throw new Error(`Validation failed for type ${i}, data: ${c}`)},_decodeRaw(a,c,u){return r.call(this,a,c,u)}}),this}registerBcsType(t,e){return this.registerType(t,(r,n,i)=>{const s=i.map(a=>new Z({name:String(a),write:(c,u)=>{const{name:l,params:d}=this.parseTypeName(a),g=this.getTypeInterface(l),b=d.reduce((f,m,T)=>Object.assign(f,{[m]:i[T]}),{});return g._encodeRaw.call(this,u,c,d,b)},read:()=>{throw new Error("Not implemented")}}));return e(...s).write(n,r),r},(r,n)=>{const i=n.map(s=>new Z({name:String(s),write:(a,c)=>{throw new Error("Not implemented")},read:a=>{const{name:c,params:u}=this.parseTypeName(s),l=this.getTypeInterface(c),d=u.reduce((g,b,f)=>Object.assign(g,{[b]:n[f]}),{});return l._decodeRaw.call(this,a,u,d)}}));return e(...i).read(r)}),this}registerAddressType(t,e,r="hex"){switch(r){case"base64":return this.registerType(t,function(n,i){return X(i).reduce((s,a)=>s.write8(a),n)},function(n){return _(n.readBytes(e))});case"hex":return this.registerType(t,function(n,i){return Ze(i).reduce((s,a)=>s.write8(a),n)},function(n){return ke(n.readBytes(e))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(t){let{name:e,params:r}=this.parseTypeName(t);if(r.length>1)throw new Error("Vector can have only one type parameter; got "+e);return this.registerType(t,function(n,i,s,a){return n.writeVec(i,(c,u)=>{let l=s[0];if(!l)throw new Error(`Incorrect number of type parameters passed a to vector '${t}'`);let{name:d,params:g}=this.parseTypeName(l);if(this.hasType(d))return this.getTypeInterface(d)._encodeRaw.call(this,c,u,g,a);if(!(d in a))throw new Error(`Unable to find a matching type definition for ${d} in vector; make sure you passed a generic`);let{name:b,params:f}=this.parseTypeName(a[d]);return this.getTypeInterface(b)._encodeRaw.call(this,c,u,f,a)})},function(n,i,s){return n.readVec(a=>{let c=i[0];if(!c)throw new Error(`Incorrect number of type parameters passed to a vector '${t}'`);let{name:u,params:l}=this.parseTypeName(c);if(this.hasType(u))return this.getTypeInterface(u)._decodeRaw.call(this,a,l,s);if(!(u in s))throw new Error(`Unable to find a matching type definition for ${u} in vector; make sure you passed a generic`);let{name:d,params:g}=this.parseTypeName(s[u]);return this.getTypeInterface(d)._decodeRaw.call(this,a,g,s)})})}registerStructType(t,e){for(let a in e){let c=this.tempKey(),u=e[a];!Array.isArray(u)&&typeof u!="string"&&(e[a]=c,this.registerStructType(c,u))}let r=Object.freeze(e),n=Object.keys(r),{name:i,params:s}=this.parseTypeName(t);return this.registerType(t,function(a,c,u,l){if(!c||c.constructor!==Object)throw new Error(`Expected ${i} to be an Object, got: ${c}`);if(u.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${u.length}`);for(let d of n){if(!(d in c))throw new Error(`Struct ${i} requires field ${d}:${r[d]}`);const{name:g,params:b}=this.parseTypeName(r[d]);if(!s.includes(g))this.getTypeInterface(g)._encodeRaw.call(this,a,c[d],b,l);else{const f=s.indexOf(g);let{name:m,params:T}=this.parseTypeName(u[f]);if(this.hasType(m)){this.getTypeInterface(m)._encodeRaw.call(this,a,c[d],T,l);continue}if(!(m in l))throw new Error(`Unable to find a matching type definition for ${m} in ${i}; make sure you passed a generic`);let{name:I,params:C}=this.parseTypeName(l[m]);this.getTypeInterface(I)._encodeRaw.call(this,a,c[d],C,l)}}return a},function(a,c,u){if(c.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${c.length}`);let l={};for(let d of n){const{name:g,params:b}=this.parseTypeName(r[d]);if(!s.includes(g))l[d]=this.getTypeInterface(g)._decodeRaw.call(this,a,b,u);else{const f=s.indexOf(g);let{name:m,params:T}=this.parseTypeName(c[f]);if(this.hasType(m)){l[d]=this.getTypeInterface(m)._decodeRaw.call(this,a,T,u);continue}if(!(m in u))throw new Error(`Unable to find a matching type definition for ${m} in ${i}; make sure you passed a generic`);let{name:I,params:C}=this.parseTypeName(u[m]);l[d]=this.getTypeInterface(I)._decodeRaw.call(this,a,C,u)}}return l})}registerEnumType(t,e){for(let a in e){let c=this.tempKey(),u=e[a];u!==null&&!Array.isArray(u)&&typeof u!="string"&&(e[a]=c,this.registerStructType(c,u))}let r=Object.freeze(e),n=Object.keys(r),{name:i,params:s}=this.parseTypeName(t);return this.registerType(t,function(a,c,u,l){if(!c)throw new Error(`Unable to write enum "${i}", missing data.
Received: "${c}"`);if(typeof c!="object")throw new Error(`Incorrect data passed into enum "${i}", expected object with properties: "${n.join(" | ")}".
Received: "${JSON.stringify(c)}"`);let d=Object.keys(c)[0];if(d===void 0)throw new Error(`Empty object passed as invariant of the enum "${i}"`);let g=n.indexOf(d);if(g===-1)throw new Error(`Unknown invariant of the enum "${i}", allowed values: "${n.join(" | ")}"; received "${d}"`);let b=n[g],f=r[b];if(a.write8(g),f===null)return a;let m=s.indexOf(f),T=m===-1?f:u[m];{let{name:I,params:C}=this.parseTypeName(T);return this.getTypeInterface(I)._encodeRaw.call(this,a,c[d],C,l)}},function(a,c,u){let l=a.readULEB(),d=n[l],g=r[d];if(l===-1)throw new Error(`Decoding type mismatch, expected enum "${i}" invariant index, received "${l}"`);if(g===null)return{[d]:!0};let b=s.indexOf(g),f=b===-1?g:c[b];{let{name:m,params:T}=this.parseTypeName(f);return{[d]:this.getTypeInterface(m)._decodeRaw.call(this,a,T,u)}}})}getTypeInterface(t){let e=this.types.get(t);if(typeof e=="string"){let r=[];for(;typeof e=="string";){if(r.includes(e))throw new Error(`Recursive definition found: ${r.join(" -> ")} -> ${e}`);r.push(e),e=this.types.get(e)}}if(e===void 0)throw new Error(`Type ${t} is not registered`);return e}parseTypeName(t){if(Array.isArray(t)){let[c,...u]=t;return{name:c,params:u}}if(typeof t!="string")throw new Error(`Illegal type passed as a name of the type: ${t}`);let[e,r]=this.schema.genericSeparators||["<",">"],n=t.indexOf(e),i=Array.from(t).reverse().indexOf(r);if(n===-1&&i===-1)return{name:t,params:[]};if(n===-1||i===-1)throw new Error(`Unclosed generic in name '${t}'`);let s=t.slice(0,n),a=Nr(t.slice(n+1,t.length-i-1),this.schema.genericSeparators);return{name:s,params:a}}};let x=Ue;x.U8="u8";x.U16="u16";x.U32="u32";x.U64="u64";x.U128="u128";x.U256="u256";x.BOOL="bool";x.VECTOR="vector";x.ADDRESS="address";x.STRING="string";x.HEX="hex-string";x.BASE58="base58-string";x.BASE64="base64-string";function ui(t){t.registerType(x.U8,function(e,r){return e.write8(r)},function(e){return e.read8()},e=>e<256),t.registerType(x.U16,function(e,r){return e.write16(r)},function(e){return e.read16()},e=>e<65536),t.registerType(x.U32,function(e,r){return e.write32(r)},function(e){return e.read32()},e=>e<=4294967296n),t.registerType(x.U64,function(e,r){return e.write64(r)},function(e){return e.read64()}),t.registerType(x.U128,function(e,r){return e.write128(r)},function(e){return e.read128()}),t.registerType(x.U256,function(e,r){return e.write256(r)},function(e){return e.read256()}),t.registerType(x.BOOL,function(e,r){return e.write8(r)},function(e){return e.read8().toString(10)==="1"}),t.registerType(x.STRING,function(e,r){return e.writeVec(Array.from(r),(n,i)=>n.write8(i.charCodeAt(0)))},function(e){return e.readVec(r=>r.read8()).map(r=>String.fromCharCode(Number(r))).join("")},e=>!0),t.registerType(x.HEX,function(e,r){return e.writeVec(Array.from(Ze(r)),(n,i)=>n.write8(i))},function(e){let r=e.readVec(n=>n.read8());return ke(new Uint8Array(r))}),t.registerType(x.BASE58,function(e,r){return e.writeVec(Array.from(Je(r)),(n,i)=>n.write8(i))},function(e){let r=e.readVec(n=>n.read8());return Ge(new Uint8Array(r))}),t.registerType(x.BASE64,function(e,r){return e.writeVec(Array.from(X(r)),(n,i)=>n.write8(i))},function(e){let r=e.readVec(n=>n.read8());return _(new Uint8Array(r))})}function li(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:ci,addressEncoding:"hex"}}const di=32;function Tr(t){try{return Je(t).length===di}catch{return!1}}const He=32;function se(t){return hi(t)&&pi(t)===He}function Qe(t){return se(t)}function j(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(He*2,"0")}`}function ee(t,e=!1){return j(t,e)}function hi(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function pi(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}class fi extends TypeError{constructor(e,r){let n;const{message:i,explanation:s,...a}=e,{path:c}=e,u=c.length===0?i:`At path: ${c.join(".")} -- ${i}`;super(s??u),s!=null&&(this.cause=u),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function gi(t){return K(t)&&typeof t[Symbol.iterator]=="function"}function K(t){return typeof t=="object"&&t!=null}function L(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function mi(t){const{done:e,value:r}=t.next();return e?void 0:r}function yi(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:a}=r,{refinement:c,message:u=`Expected a value of type \`${a}\`${c?` with refinement \`${c}\``:""}, but received: \`${L(n)}\``}=t;return{value:n,type:a,refinement:c,key:i[i.length-1],path:i,branch:s,...t,message:u}}function*kr(t,e,r,n){gi(t)||(t=[t]);for(const i of t){const s=yi(i,e,r,n);s&&(yield s)}}function*qt(t,e,r={}){const{path:n=[],branch:i=[t],coerce:s=!1,mask:a=!1}=r,c={path:n,branch:i};if(s&&(t=e.coercer(t,c),a&&e.type!=="type"&&K(e.schema)&&K(t)&&!Array.isArray(t)))for(const l in t)e.schema[l]===void 0&&delete t[l];let u="valid";for(const l of e.validator(t,c))l.explanation=r.message,u="not_valid",yield[l,void 0];for(let[l,d,g]of e.entries(t,c)){const b=qt(d,g,{path:l===void 0?n:[...n,l],branch:l===void 0?i:[...i,d],coerce:s,mask:a,message:r.message});for(const f of b)f[0]?(u=f[0].refinement!=null?"not_refined":"not_valid",yield[f[0],void 0]):s&&(d=f[1],l===void 0?t=d:t instanceof Map?t.set(l,d):t instanceof Set?t.add(d):K(t)&&(d!==void 0||l in t)&&(t[l]=d))}if(u!=="not_valid")for(const l of e.refiner(t,c))l.explanation=r.message,u="not_refined",yield[l,void 0];u==="valid"&&(yield[void 0,t])}class re{constructor(e){const{type:r,schema:n,validator:i,refiner:s,coercer:a=u=>u,entries:c=function*(){}}=e;this.type=r,this.schema=n,this.entries=c,this.coercer=a,i?this.validator=(u,l)=>{const d=i(u,l);return kr(d,l,this,u)}:this.validator=()=>[],s?this.refiner=(u,l)=>{const d=s(u,l);return kr(d,l,this,u)}:this.refiner=()=>[]}assert(e,r){return It(e,this,r)}create(e,r){return Kr(e,this,r)}is(e){return N(e,this)}mask(e,r){return Lr(e,this,r)}validate(e,r={}){return Xe(e,this,r)}}function It(t,e,r){const n=Xe(t,e,{message:r});if(n[0])throw n[0]}function Kr(t,e,r){const n=Xe(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function Lr(t,e,r){const n=Xe(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function N(t,e){return!Xe(t,e)[0]}function Xe(t,e,r={}){const n=qt(t,e,r),i=mi(n);return i[0]?[new fi(i[0],function*(){for(const s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function De(...t){const e=t[0].type==="type",r=t.map(i=>i.schema),n=Object.assign({},...r);return e?bi(n):p(n)}function R(t,e){return new re({type:t,schema:null,validator:e})}function At(){return R("any",()=>!0)}function S(t){return new re({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${L(e)}`}})}function wi(){return R("bigint",t=>typeof t=="bigint")}function M(){return R("boolean",t=>typeof t=="boolean")}function te(){return R("integer",t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${L(t)}`)}function w(t){const e=L(t),r=typeof t;return new re({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${L(n)}`}})}function Wr(){return R("never",()=>!1)}function O(t){return new re({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function Se(){return R("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${L(t)}`)}function p(t){const e=t?Object.keys(t):[],r=Wr();return new re({type:"object",schema:t||null,*entries(n){if(t&&K(n)){const i=new Set(Object.keys(n));for(const s of e)i.delete(s),yield[s,n[s],t[s]];for(const s of i)yield[s,n[s],r]}},validator(n){return K(n)||`Expected an object, but received: ${L(n)}`},coercer(n){return K(n)?{...n}:n}})}function y(t){return new re({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function Y(t,e){return new re({type:"record",schema:null,*entries(r){if(K(r))for(const n in r){const i=r[n];yield[n,n,t],yield[n,i,e]}},validator(r){return K(r)||`Expected an object, but received: ${L(r)}`}})}function h(){return R("string",t=>typeof t=="string"||`Expected a string, but received: ${L(t)}`)}function Fr(t){const e=Wr();return new re({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],t[i]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${L(r)}`}})}function bi(t){const e=Object.keys(t);return new re({type:"type",schema:t,*entries(r){if(K(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return K(r)||`Expected an object, but received: ${L(r)}`},coercer(r){return K(r)?{...r}:r}})}function $(t){const e=t.map(r=>r.type).join(" | ");return new re({type:"union",schema:null,coercer(r){for(const n of t){const[i,s]=n.validate(r,{coerce:!0});if(!i)return s}return r},validator(r,n){const i=[];for(const s of t){const[...a]=qt(r,s,n),[c]=a;if(c[0])for(const[u]of a)u&&i.push(u);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${L(r)}`,...i]}})}function Gr(){return R("unknown",()=>!0)}BigInt(1e9);const Kt="0x1",Jr="0x2";ee("0x6");const vi=`${Jr}::sui::SUI`;ee("0x5");const xe="::",Si="0x2::sui::SUI",Ti="0.50.1",ki="1.19.0",Ei={"-32700":"ParseError","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError"};class Zr extends Error{}class Hr extends Zr{constructor(e,r){super(e),this.code=r,this.type=Ei[r]??"ServerError"}}class xi extends Zr{constructor(e,r,n){super(e),this.status=r,this.statusText=n}}var Lt=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},A=(t,e,r)=>(Lt(t,e,"read from private field"),r?r.call(t):e.get(t)),he=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ie=(t,e,r,n)=>(Lt(t,e,"write to private field"),e.set(t,r),r),ji=(t,e,r,n)=>({set _(i){Ie(t,e,i)},get _(){return A(t,e,n)}}),Xr=(t,e,r)=>(Lt(t,e,"access private method"),r),we,Ne,ae,ve,qe,Ae,Bt,Yr,Wt,Qr;function Ii(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const Ai={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class Bi{constructor(e,r={}){if(he(this,Bt),he(this,Wt),he(this,we,0),he(this,Ne,0),he(this,ae,null),he(this,ve,null),he(this,qe,new Set),he(this,Ae,new Map),this.endpoint=e,this.options={...Ai,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=Ii(this.endpoint))}async makeRequest(e,r){const n=await Xr(this,Bt,Yr).call(this);return new Promise((i,s)=>{Ie(this,we,A(this,we)+1),A(this,Ae).set(A(this,we),{resolve:i,reject:s,timeout:setTimeout(()=>{A(this,Ae).delete(A(this,we)),s(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:A(this,we),method:e,params:r}))}).then(({error:i,result:s})=>{if(i)throw new Hr(i.message,i.code);return s})}async subscribe(e){const r=new Oi(e);return A(this,qe).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}}we=new WeakMap;Ne=new WeakMap;ae=new WeakMap;ve=new WeakMap;qe=new WeakMap;Ae=new WeakMap;Bt=new WeakSet;Yr=function(){return A(this,ve)?A(this,ve):(Ie(this,ve,new Promise(t=>{var e;(e=A(this,ae))==null||e.close(),Ie(this,ae,new this.options.WebSocketConstructor(this.endpoint)),A(this,ae).addEventListener("open",()=>{Ie(this,Ne,0),t(A(this,ae))}),A(this,ae).addEventListener("close",()=>{ji(this,Ne)._++,A(this,Ne)<=this.options.maxReconnects&&setTimeout(()=>{Xr(this,Wt,Qr).call(this)},this.options.reconnectTimeout)}),A(this,ae).addEventListener("message",({data:r})=>{let n;try{n=JSON.parse(r)}catch(i){console.error(new Error(`Failed to parse RPC message: ${r}`,{cause:i}));return}if("id"in n&&n.id!=null&&A(this,Ae).has(n.id)){const{resolve:i,timeout:s}=A(this,Ae).get(n.id);clearTimeout(s),i(n)}else if("params"in n){const{params:i}=n;A(this,qe).forEach(s=>{s.subscriptionId===i.subscription&&i.subscription===s.subscriptionId&&s.onMessage(i.result)})}})})),A(this,ve))};Wt=new WeakSet;Qr=async function(){var t;return(t=A(this,ae))==null||t.close(),Ie(this,ve,null),Promise.allSettled([...A(this,qe)].map(e=>e.subscribe(this)))};class Oi{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}}var Ft=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},q=(t,e,r)=>(Ft(t,e,"read from private field"),r?r.call(t):e.get(t)),et=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ot=(t,e,r,n)=>(Ft(t,e,"write to private field"),e.set(t,r),r),$i=(t,e,r)=>(Ft(t,e,"access private method"),r),Me,J,Re,$t,en;class Ci{constructor(e){et(this,$t),et(this,Me,0),et(this,J,void 0),et(this,Re,void 0),Ot(this,J,e)}fetch(e,r){const n=q(this,J).fetch??globalThis.fetch;if(!this.fetch)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){var r,n;Ot(this,Me,q(this,Me)+1);const i=await this.fetch(((r=q(this,J).rpc)==null?void 0:r.url)??q(this,J).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Ti,"Client-Target-Api-Version":ki,...(n=q(this,J).rpc)==null?void 0:n.headers},body:JSON.stringify({jsonrpc:"2.0",id:q(this,Me),method:e.method,params:e.params})});if(!i.ok)throw new xi(`Unexpected status code: ${i.status}`,i.status,i.statusText);const s=await i.json();if("error"in s&&s.error!=null)throw new Hr(s.error.message,s.error.code);return s.result}async subscribe(e){const r=await $i(this,$t,en).call(this).subscribe(e);return async()=>!!await r()}}Me=new WeakMap;J=new WeakMap;Re=new WeakMap;$t=new WeakSet;en=function(){var t;if(!q(this,Re)){const e=q(this,J).WebSocketConstructor??globalThis.WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Ot(this,Re,new Bi(((t=q(this,J).websocket)==null?void 0:t.url)??q(this,J).url,{WebSocketConstructor:e,...q(this,J).websocket}))}return q(this,Re)};const Ui=/^vector<(.+)>$/,Mi=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class oe{static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const n=e.match(Ui);if(n)return{vector:oe.parseFromStr(n[1],r)};const i=e.match(Mi);if(i)return{struct:{address:r?j(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:oe.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return Nr(e).map(n=>oe.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${oe.tagToString(e.vector)}>`;if("struct"in e){const r=e.struct,n=r.typeParams.map(oe.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}const E=new x({...li(),types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function tn(t){return o.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function Pi(t){return o.enum("Option",{None:null,Some:t})}function Gt(t){return t.transform({input:e=>({[e.kind]:e}),output:e=>{const r=Object.keys(e)[0];return{kind:r,...e[r]}}})}const H=o.bytes(He).transform({input:t=>typeof t=="string"?Ze(j(t)):t,output:t=>j(ke(t))}),Jt=o.vector(o.u8()).transform({name:"ObjectDigest",input:t=>Je(t),output:t=>Ge(new Uint8Array(t))}),Ke=o.struct("SuiObjectRef",{objectId:H,version:o.u64(),digest:Jt}),Zt=o.struct("SharedObjectRef",{objectId:H,initialSharedVersion:o.u64(),mutable:o.bool()}),pt=o.enum("ObjectArg",{ImmOrOwned:Ke,Shared:Zt,Receiving:Ke}),Ht=o.enum("CallArg",{Pure:o.vector(o.u8()),Object:pt,ObjVec:o.vector(pt)}),$e=o.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:o.lazy(()=>$e),struct:o.lazy(()=>rr),u16:null,u32:null,u256:null}),F=Gt(o.enum("Argument",{GasCoin:null,Input:o.struct("Input",{index:o.u16()}),Result:o.struct("Result",{index:o.u16()}),NestedResult:o.struct("NestedResult",{index:o.u16(),resultIndex:o.u16()})})),Xt=o.struct("ProgrammableMoveCall",{package:H,module:o.string(),function:o.string(),type_arguments:o.vector($e),arguments:o.vector(F)}).transform({input:t=>{const[e,r,n]=t.target.split("::"),i=t.typeArguments.map(s=>oe.parseFromStr(s,!0));return{package:j(e),module:r,function:n,type_arguments:i,arguments:t.arguments}},output:t=>({target:[t.package,t.module,t.function].join("::"),arguments:t.arguments,typeArguments:t.type_arguments.map(oe.tagToString)})}),Yt=Gt(o.enum("Transaction",{MoveCall:Xt,TransferObjects:o.struct("TransferObjects",{objects:o.vector(F),address:F}),SplitCoins:o.struct("SplitCoins",{coin:F,amounts:o.vector(F)}),MergeCoins:o.struct("MergeCoins",{destination:F,sources:o.vector(F)}),Publish:o.struct("Publish",{modules:o.vector(o.vector(o.u8())),dependencies:o.vector(H)}),MakeMoveVec:o.struct("MakeMoveVec",{type:Pi($e),objects:o.vector(F)}),Upgrade:o.struct("Upgrade",{modules:o.vector(o.vector(o.u8())),dependencies:o.vector(H),packageId:H,ticket:F})})),Qt=o.struct("ProgrammableTransaction",{inputs:o.vector(Ht),transactions:o.vector(Yt)}),er=o.enum("TransactionKind",{ProgrammableTransaction:Qt,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),tr=o.enum("TransactionExpiration",{None:null,Epoch:tn()}),rr=o.struct("StructTag",{address:H,module:o.string(),name:o.string(),typeParams:o.vector($e)}),nr=o.struct("GasData",{payment:o.vector(Ke),owner:H,price:o.u64(),budget:o.u64()}),ir=o.struct("TransactionDataV1",{kind:er,sender:H,gasData:nr,expiration:tr}),sr=o.enum("TransactionData",{V1:ir}),zi=o.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),_i=o.enum("IntentVersion",{V0:null}),Ni=o.enum("AppId",{Sui:null}),Ri=o.struct("Intent",{scope:zi,version:_i,appId:Ni}),Vi=o.generic(["T"],t=>o.struct("IntentMessage<T>",{intent:Ri,value:t})),ar=o.enum("CompressedSignature",{ED25519:o.fixedArray(64,o.u8()),Secp256k1:o.fixedArray(64,o.u8()),Secp256r1:o.fixedArray(64,o.u8()),ZkLogin:o.vector(o.u8())}),or=o.enum("PublicKey",{ED25519:o.fixedArray(32,o.u8()),Secp256k1:o.fixedArray(33,o.u8()),Secp256r1:o.fixedArray(33,o.u8()),ZkLogin:o.vector(o.u8())}),cr=o.struct("MultiSigPkMap",{pubKey:or,weight:o.u8()}),ur=o.struct("MultiSigPublicKey",{pk_map:o.vector(cr),threshold:o.u16()}),rn=o.struct("MultiSig",{sigs:o.vector(ar),bitmap:o.u16(),multisig_pk:ur}),Di=o.vector(o.u8()).transform({input:t=>typeof t=="string"?X(t):t,output:t=>_(new Uint8Array(t))}),nn=o.struct("SenderSignedTransaction",{intentMessage:Vi(sr),txSignatures:o.vector(Di)}),sn=o.vector(nn,{name:"SenderSignedData"}),B={...o,U8:o.u8(),U16:o.u16(),U32:o.u32(),U64:o.u64(),U128:o.u128(),U256:o.u256(),ULEB128:o.uleb128(),Bool:o.bool(),String:o.string(),Address:H,Argument:F,CallArg:Ht,CompressedSignature:ar,GasData:nr,MultiSig:rn,MultiSigPkMap:cr,MultiSigPublicKey:ur,ObjectArg:pt,ObjectDigest:Jt,ProgrammableMoveCall:Xt,ProgrammableTransaction:Qt,PublicKey:or,SenderSignedData:sn,SenderSignedTransaction:nn,SharedObjectRef:Zt,StructTag:rr,SuiObjectRef:Ke,Transaction:Yt,TransactionData:sr,TransactionDataV1:ir,TransactionExpiration:tr,TransactionKind:er,TypeTag:$e,ser:E.ser.bind(E),de:E.de.bind(E),getTypeInterface:E.getTypeInterface.bind(E),hasType:E.hasType.bind(E),parseTypeName:E.parseTypeName.bind(E),registerAddressType:E.registerAddressType.bind(E),registerAlias:E.registerAlias.bind(E),registerBcsType:E.registerBcsType.bind(E),registerEnumType:E.registerEnumType.bind(E),registerStructType:E.registerStructType.bind(E),registerType:E.registerType.bind(E),types:E.types};E.registerBcsType("utf8string",()=>o.string({name:"utf8string"}));E.registerBcsType("unsafe_u64",()=>tn());E.registerBcsType("enumKind",t=>Gt(t));[H,F,Ht,ar,nr,rn,cr,ur,pt,Jt,Xt,Qt,or,sn,Zt,rr,Ke,Yt,sr,ir,tr,er,$e].forEach(t=>{E.registerBcsType(t.name,()=>t)});const lr=$([p({AddressOwner:h()}),p({ObjectOwner:h()}),p({Shared:p({initial_shared_version:O(h())})}),w("Immutable")]);R("SuiJsonValue",()=>!0);const qi=$([p({u32:h()}),p({u64:h()}),p({f64:h()})]);p({attributes:Y(h(),O(qi)),featureFlags:Y(h(),M()),maxSupportedProtocolVersion:h(),minSupportedProtocolVersion:h(),protocolVersion:h()});$([h(),w("package")]);const fe=p({digest:h(),objectId:h(),version:$([Se(),h(),wi()])});p({owner:lr,reference:fe});p({objectId:h(),sequenceNumber:h()});p({payment:S(fe),owner:h(),price:h(),budget:h()});const Ki=De(fe,p({type:h(),owner:lr,previousTransaction:h()})),Li=Y(h(),At()),Wi=Y(h(),Gr()),Fi=p({type:h(),fields:Li,hasPublicTransfer:M()}),Gi=p({disassembled:Wi}),Ji=$([De(Fi,p({dataType:w("moveObject")})),De(Gi,p({dataType:w("package")}))]),Zi=p({type:h(),hasPublicTransfer:M(),version:h(),bcsBytes:h()}),Hi=p({id:h(),moduleMap:Y(h(),h())}),Xi=$([De(Zi,p({dataType:w("moveObject")})),De(Hi,p({dataType:w("package")}))]);BigInt(1e9);const an=p({code:h(),error:y(h()),object_id:y(h()),parent_object_id:y(h()),version:y(h()),digest:y(h())}),Yi=p({data:O(y(Y(h(),h()))),error:O(y(an))}),Qi=$([Yi,y(Y(h(),h()))]),on=p({objectId:h(),version:h(),digest:h(),type:O(y(h())),content:O(y(Ji)),bcs:O(y(Xi)),owner:O(y(lr)),previousTransaction:O(y(h())),storageRebate:O(y(h())),display:O(y(Qi))});p({showType:O(y(M())),showContent:O(y(M())),showBcs:O(y(M())),showOwner:O(y(M())),showPreviousTransaction:O(y(M())),showStorageRebate:O(y(M())),showDisplay:O(y(M()))});$([w("Exists"),w("notExists"),w("Deleted")]);S(Ki);const es=p({data:O(y(on)),error:O(y(an))});function ts(t){return t.data}function rs(t){if(t.error&&"object_id"in t.error&&"version"in t.error&&"digest"in t.error){const e=t.error;return{objectId:e.object_id,version:e.version,digest:e.digest}}}function Er(t){if("reference"in t)return t.reference;const e=ts(t);return e?{objectId:e.objectId,version:e.version,digest:e.digest}:rs(t)}p({objectId:h(),atCheckpoint:y(Se())});p({data:S(es),nextCursor:y(O(h())),hasNextPage:M()});$([p({details:on,status:w("VersionFound")}),p({details:h(),status:w("ObjectNotExists")}),p({details:fe,status:w("ObjectDeleted")}),p({details:Fr([h(),Se()]),status:w("VersionNotFound")}),p({details:p({asked_version:Se(),latest_version:Se(),object_id:h()}),status:w("VersionTooHigh")})]);const ns=$([h(),p({Object:h()})]);S(ns);const is=p({address:h(),name:h()}),ss=$([w("Private"),w("Public"),w("Friend")]),dr=p({abilities:S(h())}),as=p({constraints:dr,isPhantom:M()}),os=p({TypeParameter:Se()}),Et=Fr([p({module:h(),package:h(),function:h()}),h()]);p({rank3Days:S(Et),rank7Days:S(Et),rank30Days:S(Et)});function cn(t){if(!t)return!1;if(typeof t=="string"||N(t,os)||un(t))return!0;if(typeof t!="object")return!1;const e=t;return!!(N(e.Reference,Be)||N(e.MutableReference,Be)||N(e.Vector,Be))}const Be=R("SuiMoveNormalizedType",cn);function un(t){if(!t||typeof t!="object")return!1;const e=t;if(!e.Struct||typeof e.Struct!="object")return!1;const r=e.Struct;return!(typeof r.address!="string"||typeof r.module!="string"||typeof r.name!="string"||!Array.isArray(r.typeArguments)||!r.typeArguments.every(n=>cn(n)))}R("SuiMoveNormalizedStructType",un);const cs=p({visibility:ss,isEntry:M(),typeParameters:S(dr),parameters:S(Be),return:S(Be)}),us=p({name:h(),type:Be}),ls=p({abilities:dr,typeParameters:S(as),fields:S(us)}),ds=p({fileFormatVersion:Se(),address:h(),name:h(),friends:S(is),structs:Y(h(),ls),exposedFunctions:Y(h(),cs)});Y(h(),ds);function Ct(t){return typeof t=="object"&&"MutableReference"in t?t.MutableReference:void 0}function ln(t){return typeof t=="object"&&"Reference"in t?t.Reference:void 0}function hr(t){if(typeof t=="object"&&"Struct"in t)return t;const e=ln(t),r=Ct(t);if(typeof e=="object"&&"Struct"in e)return e;if(typeof r=="object"&&"Struct"in r)return r}const hs=$([p({ImmOrOwned:fe}),p({Shared:p({objectId:h(),initialSharedVersion:$([te(),h()]),mutable:M()})}),p({Receiving:fe})]),ft=p({Pure:S(te())}),Ut=p({Object:hs}),gt=$([ft,Ut]);function ps(t,e){return{Pure:Array.from(t instanceof Uint8Array?t:Dt(t)?t.toBytes():B.ser(e,t,{maxSize:1/0}).toBytes())}}const z={Pure:ps,ObjectRef({objectId:t,digest:e,version:r}){return{Object:{ImmOrOwned:{digest:e,version:r,objectId:j(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{Object:{Shared:{mutable:e,initialSharedVersion:r,objectId:j(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{Object:{Receiving:{digest:e,version:r,objectId:j(t)}}}}};function xr(t){return typeof t=="string"?j(t):"ImmOrOwned"in t.Object?j(t.Object.ImmOrOwned.objectId):"Receiving"in t.Object?j(t.Object.Receiving.objectId):j(t.Object.Shared.objectId)}function fs(t){return typeof t=="object"&&"Object"in t&&"Shared"in t.Object?t.Object.Shared:void 0}function gs(t){var e;return((e=fs(t))==null?void 0:e.mutable)??!1}function ms(t){function e(r,n){return t(r,n)}return e.u8=r=>t(B.U8.serialize(r)),e.u16=r=>t(B.U16.serialize(r)),e.u32=r=>t(B.U32.serialize(r)),e.u64=r=>t(B.U64.serialize(r)),e.u128=r=>t(B.U128.serialize(r)),e.u256=r=>t(B.U256.serialize(r)),e.bool=r=>t(B.Bool.serialize(r)),e.string=r=>t(B.String.serialize(r)),e.address=r=>t(B.Address.serialize(r)),e.id=e.address,e}const ys="object",ws="ID",bs="ascii",vs="String",Ss="string",Ts="String",ks="option",Es="Option",xs={address:Jr,module:ys,name:ws},js={address:Kt,module:bs,name:vs},Is={address:Kt,module:Ss,name:Ts},As={address:Kt,module:ks,name:Es},tt=(t,e)=>t.address===e.address&&t.module===e.module&&t.name===e.name;function Bs(t){var e;const r=(e=hr(t))==null?void 0:e.Struct;return(r==null?void 0:r.address)==="0x2"&&(r==null?void 0:r.module)==="tx_context"&&(r==null?void 0:r.name)==="TxContext"}function xt(t,e){if(!(typeof e>"u")&&typeof e!==t)throw new Error(`Expect ${e} to be ${t}, received ${typeof e}`)}const Os=["Address","Bool","U8","U16","U32","U64","U128","U256"];function Mt(t,e){if(typeof t=="string"&&Os.includes(t)){if(t in["U8","U16","U32","U64","U128","U256"])xt("number",e);else if(t==="Bool")xt("boolean",e);else if(t==="Address"&&(xt("string",e),e&&!se(e)))throw new Error("Invalid Sui Address");return t.toLowerCase()}else if(typeof t=="string")throw new Error(`Unknown pure normalized type ${JSON.stringify(t,null,2)}`);if("Vector"in t){if((e===void 0||typeof e=="string")&&t.Vector==="U8")return"string";if(e!==void 0&&!Array.isArray(e))throw new Error(`Expect ${e} to be a array, received ${typeof e}`);const r=Mt(t.Vector,e?e[0]:void 0);return r===void 0?void 0:`vector<${r}>`}if("Struct"in t){if(tt(t.Struct,js))return"string";if(tt(t.Struct,Is))return"utf8string";if(tt(t.Struct,xs))return"address";if(tt(t.Struct,As)){const r={Vector:t.Struct.typeArguments[0]};return Mt(r,e)}}}function $s(t,e){const r=Array.from(`${t}::`).map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),Ve(n,{dkLen:32})}function P(t,e){return Kr(t,e)}const Cs=t=>$([p({None:$([w(!0),w(null)])}),p({Some:t})]),Le=$([p({kind:w("Input"),index:te(),value:y(At()),type:y(w("object"))}),p({kind:w("Input"),index:te(),value:y(At()),type:w("pure")})]),Us=[Le,p({kind:w("GasCoin")}),p({kind:w("Result"),index:te()}),p({kind:w("NestedResult"),index:te(),resultIndex:te()})],le=$([...Us]),dn=p({kind:w("MoveCall"),target:R("target",h().validator),typeArguments:S(h()),arguments:S(le)}),hn=p({kind:w("TransferObjects"),objects:S(le),address:le}),pn=p({kind:w("SplitCoins"),coin:le,amounts:S(le)}),fn=p({kind:w("MergeCoins"),destination:le,sources:S(le)}),gn=p({kind:w("MakeMoveVec"),type:y(Cs(Y(h(),Gr()))),objects:S(le)}),mn=p({kind:w("Publish"),modules:S(S(te())),dependencies:S(h())}),yn=p({kind:w("Upgrade"),modules:S(S(te())),dependencies:S(h()),packageId:h(),ticket:le}),Ms=[dn,hn,pn,fn,mn,yn,gn],Ps=$([...Ms]),me={MoveCall(t){return P({kind:"MoveCall",target:t.target,arguments:t.arguments??[],typeArguments:t.typeArguments??[]},dn)},TransferObjects(t,e){return e.kind==="Input"&&e.type==="pure"&&typeof e.value!="object"&&(e.value=z.Pure(B.Address.serialize(e.value))),P({kind:"TransferObjects",objects:t,address:e},hn)},SplitCoins(t,e){return e.forEach(r=>{r.kind==="Input"&&r.type==="pure"&&typeof r.value!="object"&&(r.value=z.Pure(B.U64.serialize(r.value)))}),P({kind:"SplitCoins",coin:t,amounts:e},pn)},MergeCoins(t,e){return P({kind:"MergeCoins",destination:t,sources:e},fn)},Publish({modules:t,dependencies:e}){return P({kind:"Publish",modules:t.map(r=>typeof r=="string"?Array.from(X(r)):r),dependencies:e.map(r=>ee(r))},mn)},Upgrade({modules:t,dependencies:e,packageId:r,ticket:n}){return P({kind:"Upgrade",modules:t.map(i=>typeof i=="string"?Array.from(X(i)):i),dependencies:e.map(i=>ee(i)),packageId:r,ticket:n},yn)},MakeMoveVec({type:t,objects:e}){return P({kind:"MakeMoveVec",type:t?{Some:oe.parseFromStr(t)}:{None:null},objects:e},gn)}},zs=y(O($([p({Epoch:te()}),p({None:$([w(!0),w(null)])})]))),jr=R("StringEncodedBigint",t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}}),_s=p({budget:y(jr),price:y(jr),payment:y(S(fe)),owner:y(h())}),rt=p({version:w(1),sender:y(h()),expiration:zs,gasConfig:_s,inputs:S(Le),transactions:S(Ps)});function Ir(t){return j(t).replace("0x","")}class ue{constructor(e){this.version=1,this.sender=e==null?void 0:e.sender,this.expiration=e==null?void 0:e.expiration,this.gasConfig=(e==null?void 0:e.gasConfig)??{},this.inputs=(e==null?void 0:e.inputs)??[],this.transactions=(e==null?void 0:e.transactions)??[]}static fromKindBytes(e){const r=B.TransactionKind.parse(e),n="ProgrammableTransaction"in r?r.ProgrammableTransaction:null;if(!n)throw new Error("Unable to deserialize from bytes.");const i=P({version:1,gasConfig:{},inputs:n.inputs.map((s,a)=>P({kind:"Input",value:s,index:a,type:N(s,ft)?"pure":"object"},Le)),transactions:n.transactions},rt);return ue.restore(i)}static fromBytes(e){var r;const n=B.TransactionData.parse(e),i=n==null?void 0:n.V1,s="ProgrammableTransaction"in i.kind?(r=i==null?void 0:i.kind)==null?void 0:r.ProgrammableTransaction:null;if(!i||!s)throw new Error("Unable to deserialize from bytes.");const a=P({version:1,sender:i.sender,expiration:i.expiration,gasConfig:i.gasData,inputs:s.inputs.map((c,u)=>P({kind:"Input",value:c,index:u,type:N(c,ft)?"pure":"object"},Le)),transactions:s.transactions},rt);return ue.restore(a)}static restore(e){It(e,rt);const r=new ue;return Object.assign(r,e),r}static getDigestFromBytes(e){const r=$s("TransactionData",e);return Ge(r)}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){const i=this.inputs.map(d=>(It(d.value,gt),d.value)),s={ProgrammableTransaction:{inputs:i,transactions:this.transactions}};if(n)return B.TransactionKind.serialize(s,{maxSize:e}).toBytes();const a=(r==null?void 0:r.expiration)??this.expiration,c=(r==null?void 0:r.sender)??this.sender,u={...this.gasConfig,...r==null?void 0:r.gasConfig};if(!c)throw new Error("Missing transaction sender");if(!u.budget)throw new Error("Missing gas budget");if(!u.payment)throw new Error("Missing gas payment");if(!u.price)throw new Error("Missing gas price");const l={sender:Ir(c),expiration:a||{None:!0},gasData:{payment:u.payment,owner:Ir(this.gasConfig.owner??c),price:BigInt(u.price),budget:BigInt(u.budget)},kind:{ProgrammableTransaction:{inputs:i,transactions:this.transactions}}};return B.TransactionData.serialize({V1:l},{maxSize:e}).toBytes()}getDigest(){const e=this.build({onlyTransactionKind:!1});return ue.getDigestFromBytes(e)}snapshot(){return P(this,rt)}}var pr=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},k=(t,e,r)=>(pr(t,e,"read from private field"),r?r.call(t):e.get(t)),ie=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},nt=(t,e,r,n)=>(pr(t,e,"write to private field"),e.set(t,r),r),U=(t,e,r)=>(pr(t,e,"access private method"),r),v,Pe,st,ze,at,ge,Te,fr,wn,gr,bn,mr,vn,yr,Sn,ot,Pt;const Ns={maxPureArgumentSize:16*1024,maxTxGas:5e10,maxGasObjects:256,maxTxSizeBytes:128*1024};function Rs(t){const e={kind:"Result",index:t},r=[],n=i=>r[i]??(r[i]={kind:"NestedResult",index:t,resultIndex:i});return new Proxy(e,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,s){if(s in i)return Reflect.get(i,s);if(s===Symbol.iterator)return function*(){let c=0;for(;;)yield n(c),c++};if(typeof s=="symbol")return;const a=parseInt(s,10);if(!(Number.isNaN(a)||a<0))return n(a)}})}function Vs(t){const e=hr(t);return e?e.Struct.address==="0x2"&&e.Struct.module==="transfer"&&e.Struct.name==="Receiving":!1}function We(t){if(!t.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}const Tn=Symbol.for("@mysten/transaction"),jt={maxTxGas:"max_tx_gas",maxGasObjects:"max_gas_payment_objects",maxTxSizeBytes:"max_tx_size_bytes",maxPureArgumentSize:"max_pure_argument_size"},Ds=1000n,qs=50,Ks=(t,e)=>Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e));function Ls(t){return!!t&&typeof t=="object"&&t[Tn]===!0}const zt=class{constructor(t){ie(this,Pe),ie(this,ze),ie(this,ge),ie(this,fr),ie(this,gr),ie(this,mr),ie(this,yr),ie(this,ot),ie(this,v,void 0),nt(this,v,new ue(t?t.blockData:void 0))}static fromKind(t){const e=new zt;return nt(e,v,ue.fromKindBytes(typeof t=="string"?X(t):t)),e}static from(t){const e=new zt;return typeof t!="string"||!t.startsWith("{")?nt(e,v,ue.fromBytes(typeof t=="string"?X(t):t)):nt(e,v,ue.restore(JSON.parse(t))),e}setSender(t){k(this,v).sender=t}setSenderIfNotSet(t){k(this,v).sender||(k(this,v).sender=t)}setExpiration(t){k(this,v).expiration=t}setGasPrice(t){k(this,v).gasConfig.price=String(t)}setGasBudget(t){k(this,v).gasConfig.budget=String(t)}setGasOwner(t){k(this,v).gasConfig.owner=t}setGasPayment(t){k(this,v).gasConfig.payment=t.map(e=>Lr(e,fe))}get blockData(){return k(this,v).snapshot()}get[Tn](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:ms((t,e)=>Dt(t)?U(this,Pe,st).call(this,"pure",{Pure:Array.from(t.toBytes())}):U(this,Pe,st).call(this,"pure",t instanceof Uint8Array?z.Pure(t):e?z.Pure(t,e):t))}),this.pure}get gas(){return{kind:"GasCoin"}}object(t){if(typeof t=="object"&&"kind"in t)return t;const e=xr(t),r=k(this,v).inputs.find(n=>n.type==="object"&&e===xr(n.value));return r&&N(r.value,Ut)&&"Shared"in r.value.Object&&N(t,Ut)&&"Shared"in t.Object&&(r.value.Object.Shared.mutable=r.value.Object.Shared.mutable||t.Object.Shared.mutable),r??U(this,Pe,st).call(this,"object",typeof t=="string"?j(t):t)}objectRef(...t){return this.object(z.ObjectRef(...t))}receivingRef(...t){return this.object(z.ReceivingRef(...t))}sharedObjectRef(...t){return this.object(z.SharedObjectRef(...t))}add(t){const e=k(this,v).transactions.push(t);return Rs(e-1)}splitCoins(t,e){return this.add(me.SplitCoins(typeof t=="string"?this.object(t):t,e.map(r=>typeof r=="number"||typeof r=="bigint"||typeof r=="string"?this.pure.u64(r):U(this,ze,at).call(this,r))))}mergeCoins(t,e){return this.add(me.MergeCoins(typeof t=="string"?this.object(t):t,e.map(r=>typeof r=="string"?this.object(r):r)))}publish({modules:t,dependencies:e}){return this.add(me.Publish({modules:t,dependencies:e}))}upgrade({modules:t,dependencies:e,packageId:r,ticket:n}){return this.add(me.Upgrade({modules:t,dependencies:e,packageId:r,ticket:typeof n=="string"?this.object(n):n}))}moveCall({arguments:t,typeArguments:e,target:r}){return this.add(me.MoveCall({arguments:t==null?void 0:t.map(n=>U(this,ze,at).call(this,n)),typeArguments:e,target:r}))}transferObjects(t,e){return this.add(me.TransferObjects(t.map(r=>typeof r=="string"?this.object(r):r),typeof e=="string"?this.pure.address(e):U(this,ze,at).call(this,e)))}makeMoveVec({type:t,objects:e}){return this.add(me.MakeMoveVec({type:t,objects:e.map(r=>typeof r=="string"?this.object(r):r)}))}serialize(){return JSON.stringify(k(this,v).snapshot())}async sign(t){const{signer:e,...r}=t,n=await this.build(r);return e.signTransactionBlock(n)}async build(t={}){return await U(this,ot,Pt).call(this,t),k(this,v).build({maxSizeBytes:U(this,ge,Te).call(this,"maxTxSizeBytes",t),onlyTransactionKind:t.onlyTransactionKind})}async getDigest(t={}){return await U(this,ot,Pt).call(this,t),k(this,v).getDigest()}};let Ws=zt;v=new WeakMap;Pe=new WeakSet;st=function(t,e){const r=k(this,v).inputs.length,n=P({kind:"Input",value:typeof e=="bigint"?String(e):e,index:r,type:t},Le);return k(this,v).inputs.push(n),n};ze=new WeakSet;at=function(t){return Dt(t)?this.pure(t):t};ge=new WeakSet;Te=function(t,{protocolConfig:e,limits:r}){if(r&&typeof r[t]=="number")return r[t];if(!e)return Ns[t];const n=e==null?void 0:e.attributes[jt[t]];if(!n)throw new Error(`Missing expected protocol config: "${jt[t]}"`);const i="u64"in n?n.u64:"u32"in n?n.u32:n.f64;if(!i)throw new Error(`Unexpected protocol config value found for: "${jt[t]}"`);return Number(i)};fr=new WeakSet;wn=function(t){const e=U(this,ge,Te).call(this,"maxPureArgumentSize",t);k(this,v).inputs.forEach((r,n)=>{if(N(r.value,ft)&&r.value.Pure.length>e)throw new Error(`Input at index ${n} is too large, max pure input size is ${e} bytes, got ${r.value.Pure.length} bytes`)})};gr=new WeakSet;bn=async function(t){if(k(this,v).gasConfig.payment){const n=U(this,ge,Te).call(this,"maxGasObjects",t);if(k(this,v).gasConfig.payment.length>n)throw new Error(`Payment objects exceed maximum amount: ${n}`)}if(t.onlyTransactionKind||k(this,v).gasConfig.payment)return;const e=k(this,v).gasConfig.owner??k(this,v).sender,r=(await We(t).getCoins({owner:e,coinType:vi})).data.filter(n=>!k(this,v).inputs.find(i=>N(i.value,gt)&&"Object"in i.value&&"ImmOrOwned"in i.value.Object?n.coinObjectId===i.value.Object.ImmOrOwned.objectId:!1)).slice(0,U(this,ge,Te).call(this,"maxGasObjects",t)-1).map(n=>({objectId:n.coinObjectId,digest:n.digest,version:n.version}));if(!r.length)throw new Error("No valid gas coins found for the transaction.");this.setGasPayment(r)};mr=new WeakSet;vn=async function(t){t.onlyTransactionKind||k(this,v).gasConfig.price||this.setGasPrice(await We(t).getReferenceGasPrice())};yr=new WeakSet;Sn=async function(t){const{inputs:e,transactions:r}=k(this,v),n=[],i=[];if(e.forEach(s=>{if(s.type==="object"&&typeof s.value=="string"){i.push({id:j(s.value),input:s});return}}),r.forEach(s=>{if(s.kind==="MoveCall"&&s.arguments.some(a=>a.kind==="Input"&&!N(e[a.index].value,gt))&&n.push(s),s.kind==="SplitCoins"&&s.amounts.forEach(a=>{if(a.kind==="Input"){const c=e[a.index];typeof c.value!="object"&&(c.value=z.Pure(B.U64.serialize(c.value)))}}),s.kind==="TransferObjects"&&s.address.kind==="Input"){const a=e[s.address.index];typeof a.value!="object"&&(a.value=z.Pure(B.Address.serialize(a.value)))}}),n.length&&await Promise.all(n.map(async s=>{const[a,c,u]=s.target.split("::"),l=await We(t).getNormalizedMoveFunction({package:ee(a),module:c,function:u}),d=l.parameters.length>0&&Bs(l.parameters.at(-1))?l.parameters.slice(0,l.parameters.length-1):l.parameters;if(d.length!==s.arguments.length)throw new Error("Incorrect number of arguments.");d.forEach((g,b)=>{const f=s.arguments[b];if(f.kind!=="Input")return;const m=e[f.index];if(N(m.value,gt))return;const T=m.value,I=Mt(g,T);if(I){m.value=z.Pure(T,I);return}if(hr(g)!=null||typeof g=="object"&&"TypeParameter"in g){if(typeof T!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(T,null,2)}`);i.push({id:T,input:m,normalizedType:g});return}throw new Error(`Unknown call arg type ${JSON.stringify(g,null,2)} for value ${JSON.stringify(T,null,2)}`)})})),i.length){const s=[...new Set(i.map(({id:d})=>d))],a=Ks(s,qs),c=(await Promise.all(a.map(d=>We(t).multiGetObjects({ids:d,options:{showOwner:!0}})))).flat();let u=new Map(s.map((d,g)=>[d,c[g]]));const l=Array.from(u).filter(([d,g])=>g.error).map(([d,g])=>d);if(l.length)throw new Error(`The following input objects are invalid: ${l.join(", ")}`);i.forEach(({id:d,input:g,normalizedType:b})=>{var f;const m=u.get(d),T=(f=m.data)==null?void 0:f.owner,I=T&&typeof T=="object"&&"Shared"in T?T.Shared.initial_shared_version:void 0;if(I){const C=b!=null&&Ct(b)==null&&ln(b)==null,V=gs(g.value)||C||b!=null&&Ct(b)!=null;g.value=z.SharedObjectRef({objectId:d,initialSharedVersion:I,mutable:V})}else b&&Vs(b)?g.value=z.ReceivingRef(Er(m)):g.value=z.ObjectRef(Er(m))})}};ot=new WeakSet;Pt=async function(t){if(!t.onlyTransactionKind&&!k(this,v).sender)throw new Error("Missing transaction sender");if(!t.protocolConfig&&!t.limits&&t.client&&(t.protocolConfig=await t.client.getProtocolConfig()),await Promise.all([U(this,mr,vn).call(this,t),U(this,yr,Sn).call(this,t)]),!t.onlyTransactionKind&&(await U(this,gr,bn).call(this,t),!k(this,v).gasConfig.budget)){const e=await We(t).dryRunTransactionBlock({transactionBlock:k(this,v).build({maxSizeBytes:U(this,ge,Te).call(this,"maxTxSizeBytes",t),overrides:{gasConfig:{budget:String(U(this,ge,Te).call(this,"maxTxGas",t)),payment:[]}}})});if(e.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${e.effects.status.error}`,{cause:e});const r=Ds*BigInt(this.blockData.gasConfig.price||1n),n=BigInt(e.effects.gasUsed.computationCost)+r,i=n+BigInt(e.effects.gasUsed.storageCost)-BigInt(e.effects.gasUsed.storageRebate);this.setGasBudget(i>n?i:n)}U(this,fr,wn).call(this,t)};const Fs=Symbol.for("@mysten/SuiClient");class Gs{get[Fs](){return!0}constructor(e){this.transport=e.transport??new Ci({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!se(j(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!se(j(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!se(j(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!se(j(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!se(j(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!Qe(ee(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(r=>{if(!r||!Qe(ee(r)))throw new Error(`Invalid Sui Object id ${r}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Tr(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(r=>{if(!Tr(r))throw new Error(`Invalid Transaction digest ${r}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock(e){return await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:_(e.transactionBlock),Array.isArray(e.signature)?e.signature:[e.signature],e.options,e.requestType]})}async signAndExecuteTransactionBlock({transactionBlock:e,signer:r,...n}){let i;e instanceof Uint8Array?i=e:(e.setSenderIfNotSet(r.toSuiAddress()),i=await e.build({client:this}));const{signature:s,bytes:a}=await r.signTransactionBlock(i);return this.executeTransactionBlock({transactionBlock:a,signature:s,...n})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!se(j(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!Qe(ee(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){var r;let n;if(Ls(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),n=_(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")n=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)n=_(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,n,(r=e.gasPrice)==null?void 0:r.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:_(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!Qe(ee(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),r=Je(e.digest);return ke(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames(e){return await this.transport.request({method:"suix_resolveNameServiceNames",params:[e.address,e.cursor,e.limit]})}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version]})}async waitForTransactionBlock({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...i}){const s=AbortSignal.timeout(r),a=new Promise((c,u)=>{s.addEventListener("abort",()=>u(s.reason))});for(a.catch(()=>{});!s.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(i)}catch{await Promise.race([new Promise(c=>setTimeout(c,n)),a])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}class kn extends Ln{}const yt="Sui",En=t=>{var e;const r=(e=t.data)==null?void 0:e.content;return r&&r.dataType==="moveObject"?r.fields:null},Ma=(t,e)=>{try{return Br(t)===Br(e)}catch{return!1}},Pa=t=>(t==null?void 0:t.type)==="created",za=t=>(t==null?void 0:t.type)==="published";function Js(t){return Array.isArray(t)}function wr(t){return!Array.isArray(t)&&typeof t=="object"&&"fields"in t&&"type"in t}function Zs(t){return typeof t=="object"&&!Js(t)&&!wr(t)}const Hs=16*1024,_a=t=>B.ser("vector<u8>",t,{maxSize:Hs}).toBytes(),Na=async(t,e)=>{const{data:r,error:n}=await t.getObject({id:e,options:{showContent:!0}});if(n)throw new Error("Error getting object: "+n);if(!r||!wr(r.content))throw new Error(`Cannot get oject for state id ${e}: `+r);return Qs(r.content.type)},Xs=async(t,e)=>{if(!se(e))throw new Error(`Invalid object ID: ${e}`);const r=await t.getObject({id:e,options:{showContent:!0}});return En(r)};async function Ra(t,e){let r,n;do{const a=await t.getDynamicFields({parentId:e,cursor:n});r=a.data.find(c=>c.name.type.endsWith("CurrentPackage")),n=a.hasNextPage?a.nextCursor:null}while(n&&!r);if(!r)throw new Error("CurrentPackage not found");const i=await t.getObject({id:r.objectId,options:{showContent:!0}}),s=En(i);if(!s||!Zs(s))throw new Error("Unable to get fields from object response");if(!("value"in s)||!wr(s.value))throw new Error("Unable to get package id");return s.value.fields.package}const Va=async(t,e,r)=>{let n=null,i=null,s=null,a;do{if(s=await t.getOwnedObjects({owner:r,filter:{StructType:`${e}::emitter::EmitterCap`},options:{showContent:!0},cursor:a}),!s||!s.data)throw Error("Failed to get owned objects");for(const c of s.data){if(!c.data)continue;const{version:u,objectId:l}=c.data;(n===null||u<n)&&(n=u,i=l)}a=s.hasNextPage?s.nextCursor:void 0}while(a);return i},Da=async(t,e)=>{const r=new Ws,[n]=r.publish({modules:t.modules.map(i=>Array.from($n.decode(i))),dependencies:t.dependencies.map(i=>ee(i))});return r.transferObjects([n],r.pure(e)),r},xn=class be extends Kn{constructor(e,r){super(e,r??Un(e,be._platform))}getRpc(e){if(e in this.config)return new Gs({url:this.config[e].rpc});throw new Error("No configuration available for chain: "+e)}getChain(e){if(e in this.config)return new kn(e,this);throw new Error("No configuration available for chain: "+e)}static nativeTokenId(e,r){if(!be.isSupportedChain(r))throw new Error(`invalid chain for ${yt}: ${r}`);return Mn.tokenId(r,Si)}static isNativeTokenId(e,r,n){return!be.isSupportedChain(r)||n.chain!==r?!1:this.nativeTokenId(e,r)===n}static isSupportedChain(e){return Pn(e)===be._platform}static async getDecimals(e,r,n){if(bt(n))return zn(be._platform);const i=new Oe(n);try{const a=await Xs(r,i.toString());if(a&&"decimals"in a)return a.decimals}catch{}const s=await r.getCoinMetadata({coinType:i.getCoinType()});if(s===null)throw new Error(`Can't fetch decimals for token ${i.toString()}`);return s.decimals}static async getBalance(e,r,n,i){if(bt(i)){const{totalBalance:a}=await r.getBalance({owner:n});return BigInt(a)}const{totalBalance:s}=await r.getBalance({owner:n,coinType:i.toString()});return BigInt(s)}static async getBalances(e,r,n,i){return(await Promise.all(i.map(async s=>{const a=await this.getBalance(e,r,n,s);return{[bt(s)?"native":new Oe(s).toString()]:a}}))).reduce((s,a)=>Object.assign(s,a),{})}static async sendWait(e,r,n){const i=[];for(const s of n){const a=await r.executeTransactionBlock(s);await r.waitForTransactionBlock({digest:a.digest}),i.push(a.digest)}return i}static async getLatestBlock(e){return Number(await e.getLatestCheckpointSequenceNumber())}static async getLatestFinalizedBlock(e){return this.getLatestBlock(e)}static chainFromChainId(e){const r=_n(be._platform,e);if(r===void 0)throw new Error(`Unknown native chain id ${e}`);const[n,i]=r;return[n,i]}static async chainFromRpc(e){const r=await e.call("sui_getChainIdentifier",[]);return this.chainFromChainId(r)}};ce(xn,"_platform",yt);let mt=xn;const jn=t=>/^(0x)?[0-9a-fA-F]+::\w+::\w+$/.test(t),Ys=t=>t.replace(/(0x)(0*)/g,"0x");function Ar(t){return t=t.startsWith("0x")?t.slice(2):t,t=t.length%2===0?t:"0"+t,`0x${t.length===64?t:_e.encode(Vn.zpad(_e.decode(t),32))}`}const Br=t=>{const e=t.split(xe);if(e.length!==3)throw new Error(`Invalid Sui type: ${t}`);return[j(e[0]),e[1],e[2]].join(xe)},qa=t=>new Oe(t).getCoinType(),Qs=t=>new Oe(t).getPackageId(),Ka=t=>{const e=Ys(t).match(/0x2::table::Table<(.*)>/);if(!e)throw new Error(`Invalid table type: ${t}`);if(e.length<2)throw new Error(`Invalid table type: ${t}`);const[r]=e[1].split(",");if(!r||!jn(r))throw new Error(`Invalid key type: ${r}`);return r},_t=class ct{constructor(e){if(ce(this,"address"),ce(this,"module"),ct.instanceof(e))this.address=e.address,this.module=e.module;else if(br.instanceof(e))this.address=e.toUint8Array();else if(typeof e=="string"){if(jn(e)){const r=e.split(xe);this.module=r.slice(1).join(xe),e=r[0]}if(e=Ar(e),!_e.valid(e))throw new Error("Invalid Sui address: "+e);this.address=_e.decode(e)}else this.address=e}unwrap(){const e=this.getPackageId(),r=this.module?xe+this.module:"";return`${e}${r}`}toString(){return this.unwrap()}toNative(){return this}toUint8Array(){return this.address}toUniversalAddress(){return new br(this.toUint8Array())}getPackageId(){return Ar(_e.encode(this.address))}getCoinType(){return[this.getPackageId(),"coin","COIN"].join(xe)}static instanceof(e){return e.constructor.platform===ct.platform}equals(e){return ct.instanceof(e)?e.unwrap()===this.unwrap():this.toUniversalAddress().equals(e)}};ce(_t,"byteSize",32),ce(_t,"platform",mt._platform);let Oe=_t;Cn(yt,Oe);var Fe=(t=>(t[t.TransactionData=0]="TransactionData",t[t.TransactionEffects=1]="TransactionEffects",t[t.CheckpointSummary=2]="CheckpointSummary",t[t.PersonalMessage=3]="PersonalMessage",t))(Fe||{});function ea(t){return[t,0,0]}function In(t,e){const r=ea(t),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),n}const wt={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},ta={ED25519:32,Secp256k1:33,Secp256r1:33},ra={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};function na(t){for(let e=0;e<t.length;e++)if(t[e]!==0)return e;return-1}function ia(t,e){const r=t.toString(16);return qn(r.padStart(e*2,"0").slice(-e*2))}function sa(t,e){const r=ia(t,e),n=na(r);return n===-1?new Uint8Array([0]):r.slice(n)}function aa(t,e){const r=sa(t,32);e==="accounts.google.com"&&(e="https://accounts.google.com");const n=new TextEncoder().encode(e),i=new Uint8Array(2+r.length+n.length);return i.set([wt.ZkLogin]),i.set([n.length],1),i.set(n,2),i.set(r,2+n.length),j(Mr(Ve(i,{dkLen:32})).slice(0,He*2))}function oa(t){if(t.length!==1)throw new Error("Invalid base64Url character: "+t);const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t);if(e===-1)throw new Error("Invalid base64Url character: "+t);const r=e.toString(2).padStart(6,"0");return Array.from(r).map(Number)}function ca(t){let e=[];for(let r=0;r<t.length;r++){const n=t.charAt(r),i=oa(n);e=e.concat(i)}return e}function ua(t,e){if(t.length<2)throw new Error(`Input (s = ${t}) is not tightly packed because s.length < 2`);let r=ca(t);const n=e%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${t}) is not tightly packed because i%4 = 3 (i = ${e}))`);const i=(e+t.length-1)%4;if(i!==3)if(i===2)r=r.slice(0,r.length-2);else if(i===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${t}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${e}))`);if(r.length%8!==0)throw new Error("We should never reach here...");const s=new Uint8Array(Math.floor(r.length/8));let a=0;for(let c=0;c<r.length;c+=8){const u=r.slice(c,c+8),l=parseInt(u.join(""),2);s[a++]=l}return new TextDecoder().decode(s)}function la(t){if(!(t.slice(-1)==="}"||t.slice(-1)===","))throw new Error("Invalid claim");const e=JSON.parse("{"+t.slice(0,-1)+"}");if(Object.keys(e).length!==1)throw new Error("Invalid claim");const r=Object.keys(e)[0];return[r,e[r]]}function da(t,e){const r=ua(t.value,t.indexMod4),[n,i]=la(r);if(n!==e)throw new Error(`Invalid field name: found ${n} expected ${e}`);return i}const ha=o.struct("ZkLoginSignature",{inputs:o.struct("ZkLoginSignatureInputs",{proofPoints:o.struct("ZkLoginSignatureInputsProofPoints",{a:o.vector(o.string()),b:o.vector(o.vector(o.string())),c:o.vector(o.string())}),issBase64Details:o.struct("ZkLoginSignatureInputsClaim",{value:o.string(),indexMod4:o.u8()}),headerBase64:o.string(),addressSeed:o.string()}),maxEpoch:o.u64(),userSignature:o.vector(o.u8())});function pa(t){return ha.parse(typeof t=="string"?X(t):t)}function fa({signature:t,signatureScheme:e,publicKey:r}){if(!r)throw new Error("`publicKey` is required");const n=r.toRawBytes(),i=new Uint8Array(1+t.length+n.length);return i.set([wt[e]]),i.set(t,1),i.set(n,1+t.length),_(i)}function ga(t){const e=X(t),r=ra[e[0]];switch(r){case"MultiSig":const n=B.MultiSig.parse(e.slice(1));return{serializedSignature:t,signatureScheme:r,multisig:n,bytes:e};case"ZkLogin":const i=e.slice(1),{inputs:s,maxEpoch:a,userSignature:c}=pa(i),{issBase64Details:u,addressSeed:l}=s,d=da(u,"iss"),g=aa(BigInt(l),d);return{serializedSignature:t,signatureScheme:r,zkLogin:{inputs:s,maxEpoch:a,userSignature:c,iss:d,address:g,addressSeed:BigInt(l)},signature:e};case"ED25519":case"Secp256k1":case"Secp256r1":const b=ta[r],f=e.slice(1,e.length-b),m=e.slice(1+f.length);return{serializedSignature:t,signatureScheme:r,signature:f,publicKey:m,bytes:e};default:throw new Error("Unsupported signature scheme")}}const ut=32,ma="suiprivkey";class ya{async signWithIntent(e,r){const n=In(r,e),i=Ve(n,{dkLen:32});return{signature:fa({signature:await this.sign(i),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:_(e)}}async signTransactionBlock(e){return this.signWithIntent(e,Fe.TransactionData)}async signPersonalMessage(e){return this.signWithIntent(o.vector(o.u8()).serialize(e).toBytes(),Fe.PersonalMessage)}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class wa extends ya{export(){return{schema:this.getKeyScheme(),privateKey:this.getSecretKey()}}}function ba(t,e){if(t.length!==ut)throw new Error("Invalid bytes length");const r=wt[e],n=new Uint8Array(t.length+1);return n.set([r]),n.set(t,1),Sr.encode(ma,Sr.toWords(n))}function Or(t){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(t)}function va(t){return Zn(t,"")}function Sa(t){return ke(va(t))}const Ta="ed25519 seed",ka=2147483648,Ea=new RegExp("^m(\\/[0-9]+')+$"),An=t=>t.replace("'",""),xa=t=>{const e=Ur.create(Rt,Ta).update(Ze(t)).digest(),r=e.slice(0,32),n=e.slice(32);return{key:r,chainCode:n}},ja=({key:t,chainCode:e},r)=>{const n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);const i=new Uint8Array(1+t.length+n.byteLength);i.set(new Uint8Array(1).fill(0)),i.set(t,1),i.set(new Uint8Array(n,0,n.byteLength),t.length+1);const s=Ur.create(Rt,e).update(i).digest(),a=s.slice(0,32),c=s.slice(32);return{key:a,chainCode:c}},Ia=t=>Ea.test(t)?!t.split("/").slice(1).map(An).some(isNaN):!1,$r=(t,e,r=ka)=>{if(!Ia(t))throw new Error("Invalid derivation path");const{key:n,chainCode:i}=xa(e);return t.split("/").slice(1).map(An).map(s=>parseInt(s,10)).reduce((s,a)=>ja(s,a+r),{key:n,chainCode:i})};function Bn(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}class Aa{equals(e){return Bn(this.toRawBytes(),e.toRawBytes())}toBase64(){return _(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return _(e)}verifyWithIntent(e,r,n){const i=In(n,e),s=Ve(i,{dkLen:32});return this.verify(s,r)}verifyPersonalMessage(e,r){return this.verifyWithIntent(B.vector(B.u8()).serialize(e).toBytes(),r,Fe.PersonalMessage)}verifyTransactionBlock(e,r){return this.verifyWithIntent(e,r,Fe.TransactionData)}toSuiBytes(){const e=this.toRawBytes(),r=new Uint8Array(e.length+1);return r.set([this.flag()]),r.set(e,1),r}toSuiAddress(){return j(Mr(Ve(this.toSuiBytes(),{dkLen:32})).slice(0,He*2))}}const Nt=32;class On extends Aa{constructor(e){if(super(),typeof e=="string"?this.data=X(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==Nt)throw new Error(`Invalid public key input. Expected ${Nt} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return wt.ED25519}async verify(e,r){let n;if(typeof r=="string"){const i=ga(r);if(i.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!Bn(this.toRawBytes(),i.publicKey))throw new Error("Signature does not match public key");n=i.signature}else n=r;return ye.sign.detached.verify(e,n,this.toRawBytes())}}On.SIZE=Nt;const Cr="m/44'/784'/0'/0'/0'";class je extends wa{constructor(e){super(),e?this.keypair=e:this.keypair=ye.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new je(ye.sign.keyPair())}static fromSecretKey(e,r){const n=e.length;if(n!==ut)throw new Error(`Wrong secretKey size. Expected ${ut} bytes, got ${n}.`);const i=ye.sign.keyPair.fromSeed(e);if(!r||!r.skipValidation){const s=new TextEncoder().encode("sui validation"),a=ye.sign.detached(s,i.secretKey);if(!ye.sign.detached.verify(s,a,i.publicKey))throw new Error("provided secretKey is invalid")}return new je(i)}getPublicKey(){return new On(this.keypair.publicKey)}getSecretKey(){return ba(this.keypair.secretKey.slice(0,ut),this.getKeyScheme())}async sign(e){return this.signData(e)}signData(e){return ye.sign.detached(e,this.keypair.secretKey)}static deriveKeypair(e,r){if(r==null&&(r=Cr),!Or(r))throw new Error("Invalid derivation path");const{key:n}=$r(r,Sa(e));return je.fromSecretKey(n)}static deriveKeypairFromSeed(e,r){if(r==null&&(r=Cr),!Or(r))throw new Error("Invalid derivation path");const{key:n}=$r(r,e);return je.fromSecretKey(n)}}async function Ba(t,e){const[,r]=await mt.chainFromRpc(t);return new Oa(r,t,je.deriveKeypair(e,"m/44'/784'/0'/0'/0'"))}class Oa{constructor(e,r,n,i){ce(this,"_chain"),ce(this,"_client"),ce(this,"_signer"),ce(this,"_debug"),this._chain=e,this._client=r,this._signer=n,this._debug=i}chain(){return this._chain}address(){return this._signer.toSuiAddress()}async signAndSend(e){const r=[];for(const n of e){const{description:i,transaction:s}=n;this._debug&&console.log(`Signing ${i} for ${this.address()}`);const a=await this._client.signAndExecuteTransactionBlock({transactionBlock:s,signer:this._signer});r.push(a.digest)}return r}}const $a={Address:Oe,Platform:mt,getSigner:Ba,protocols:{WormholeCore:()=>vr(()=>import("./index-fXpyUPPA-CpB5LPa8.js"),__vite__mapDeps([0,1,2,3,4])),TokenBridge:()=>vr(()=>import("./index-BAW2lhvW-Br4WU7QB.js"),__vite__mapDeps([5,1,2,0,3,4]))},getChain:(t,e,r)=>new kn(e,new mt(t,Nn(t,yt,{[e]:r})))},La=Object.freeze(Object.defineProperty({__proto__:null,default:$a},Symbol.toStringTag,{value:"Module"}));export{mt as S,yt as _,Qs as a,Ka as b,En as c,Zs as d,wr as e,za as f,Xs as g,Pa as h,jn as i,qa as j,Ma as k,Va as l,Ra as m,Na as n,Oe as o,Da as p,La as s,Ys as t,_a as u};
